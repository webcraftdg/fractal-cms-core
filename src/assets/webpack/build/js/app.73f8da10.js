"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[524],{240:(e,t,i)=>{var s={};i.r(s),i.d(s,{CheckRules:()=>g,ListLine:()=>u,Menu:()=>m});var a=i(484),c=i(913),r=i(322),n=i(997),h=i(38),l=i(99);class o{constructor(){}getApiBaseUrl(){return this.apiBaseUrl||(this.apiBaseUrl=window.apiBaseUrl?window.apiBaseUrl:"/fractal-cms"),this.apiBaseUrl}}class d{constructor(e=(0,h.hd)(l.xl),t=(0,h.hd)(o),i=(0,h.hd)(h.gF).scopeTo("ApiServices")){this.httpClient=e,this.configService=t,this.logger=i,this.logger.trace("constructor"),this.httpClient.configure(e=>(e.withDefaults({headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"include"}).withInterceptor({request:e=>(console.log(`Requesting ${e.method} ${e.url}`),e),response:e=>(console.log(`Received ${e.status} ${e.url}`),e)}).rejectErrorResponses(),e))}delete(e){return this.httpClient.fetch(e,{method:"DELETE"}).then(e=>e.text())}}let u=(()=>{let e,t,i,s=[(0,n.U4)("fractal-cms-core-list-line")],a=[],c=[],l=[];return t=class{constructor(e=(0,h.hd)(h.gF).scopeTo("ListLine"),t=(0,h.hd)(h.xe),i=(0,h.hd)(n.w3),s=(0,h.hd)(d),a=(0,h.hd)(n.r_)){this.logger=e,this.ea=t,this.element=i,this.apiService=s,this.platform=a,this.id=(0,r.zF)(this,c,void 0),this.buttonDelete=(0,r.zF)(this,l),this.onDelete=e=>{if(this.logger.trace("onDelete"),e.preventDefault(),this.buttonDelete&&!0===confirm("Attention !! vous allez supprimer définitivement cet élément ?")){const e=this.buttonDelete.href;this.apiService.delete(e).then(e=>{this.platform.taskQueue.queueTask(()=>{this.platform.window.location.reload()})}).catch(e=>{this.logger.trace("Delete  ERROR",e)})}},this.logger.trace("constructor")}attached(){this.logger.trace("attached")}detached(){this.logger.trace("detached")}bound(){this.logger.trace("bound"),this.addEvent()}unbinding(){this.logger.trace("unbinding"),this.removeEvent()}addEvent(){this.logger.trace("addEvent"),this.buttonDelete=this.element.querySelector(".user-button-delete"),this.buttonDelete&&this.buttonDelete.addEventListener("click",this.onDelete)}removeEvent(){this.logger.trace("removeEvent"),this.buttonDelete&&this.buttonDelete.removeEventListener("click",this.onDelete)}onValidate(e){return this.logger.trace("onValidate"),!0}},(0,r.yV)(t,"ListLine"),(()=>{const h="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,n._t)()],(0,r.G4)(null,null,i,{kind:"field",name:"id",static:!1,private:!1,access:{has:e=>"id"in e,get:e=>e.id,set:(e,t)=>{e.id=t}},metadata:h},c,l),(0,r.G4)(null,e={value:t},s,{kind:"class",name:t.name,metadata:h},null,a),t=e.value,h&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),(0,r.zF)(t,a)})(),t})(),g=(()=>{let e,t,i,s=[(0,n.U4)("fractal-cms-core-check-rules")],a=[],c=[],l=[];return t=class{constructor(e=(0,h.hd)(h.gF).scopeTo("CheckRules"),t=(0,h.hd)(n.w3)){this.logger=e,this.element=t,this.id=(0,r.zF)(this,c,void 0),this.mainCheck=(0,r.zF)(this,l),this.onCheckMain=e=>{if(this.logger.trace("onCheckMain"),this.mainCheck)return this.childCheck&&this.childCheck.forEach((e,t)=>{e.checked=this.mainCheck.checked}),!0},this.onCheckChild=e=>{this.logger.trace("onCheckMain");const t=e.currentTarget;if(t)return t.checked||this.mainCheck&&(this.mainCheck.checked=!1),!0},this.logger.trace("constructor")}attached(){this.logger.trace("attached"),this.mainCheck=this.element.querySelector("input.main-check"),this.childCheck=this.element.querySelectorAll("input.sub-check"),this.mainCheck&&this.mainCheck.addEventListener("click",this.onCheckMain),this.childCheck&&this.childCheck.forEach((e,t)=>{e.addEventListener("click",this.onCheckChild)})}detached(){this.logger.trace("detached"),this.mainCheck&&this.mainCheck.removeEventListener("click",this.onCheckMain),this.childCheck&&this.childCheck.forEach((e,t)=>{e.removeEventListener("click",this.onCheckChild)})}},(0,r.yV)(t,"CheckRules"),(()=>{const h="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;i=[(0,n._t)()],(0,r.G4)(null,null,i,{kind:"field",name:"id",static:!1,private:!1,access:{has:e=>"id"in e,get:e=>e.id,set:(e,t)=>{e.id=t}},metadata:h},c,l),(0,r.G4)(null,e={value:t},s,{kind:"class",name:t.name,metadata:h},null,a),t=e.value,h&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),(0,r.zF)(t,a)})(),t})(),m=(()=>{let e,t,i=[(0,n.U4)("fractal-cms-core-menu")],s=[];return t=class{constructor(e=(0,h.hd)(h.gF).scopeTo("Menu"),t=(0,h.hd)(n.w3),i=(0,h.hd)(h.xe),s=(0,h.hd)(d),a=(0,h.hd)(n.r_)){this.logger=e,this.element=t,this.ea=i,this.apiService=s,this.platform=a,this.onAction=e=>{this.logger.trace("onAction");let t=e.target;if(t){const e=t.getAttribute("aria-controls");if(e){this.closeOthers(e);const i=this.element.querySelector("#"+e);i&&(i.classList.contains("show")?(i.classList.remove("show"),i.setAttribute("aria-expanded","false"),t.setAttribute("aria-expanded","false")):(i.classList.add("show"),i.setAttribute("aria-expanded","true"),t.setAttribute("aria-expanded","true")))}}},this.logger.trace("constructor")}attached(){this.logger.trace("attached"),this.addEvent()}detached(){this.logger.trace("attached"),this.removeEvent()}addEvent(){this.logger.trace("addEvent"),this.actionButtons=this.element.querySelectorAll('[data-toggle="dropdown"]'),this.actionButtons.forEach((e,t)=>{e.addEventListener("click",this.onAction)})}removeEvent(){this.logger.trace("removeEvent"),this.actionButtons.forEach((e,t)=>{e.removeEventListener("click",this.onAction)})}closeOthers(e){this.logger.trace("closeOthers"),this.element.querySelectorAll(".dropdown-menu").forEach((t,i)=>{t.id!=e&&t.classList.remove("show")})}},(0,r.yV)(t,"Menu"),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(0,r.G4)(null,e={value:t},i,{kind:"class",name:t.name,metadata:a},null,s),t=e.value,a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),(0,r.zF)(t,s)})(),t})();void 0!==webpackBaseUrl&&(i.p=webpackBaseUrl);const v=document.querySelector("body");a.Ay.register(s).register(c.JZ.customize(e=>{e.DefaultTrigger=c.tD.blur})).enhance({host:v,component:class{constructor(e=(0,h.hd)(h.gF)){this.logger=e,this.logger=e.scopeTo("FractalCmsApp")}binding(){this.logger.trace("binding")}attaching(){this.logger.trace("Attaching")}}})}},e=>{e.O(0,[96],()=>e(e.s=240)),e.O()}]);