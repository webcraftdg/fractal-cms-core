(()=>{"use strict";var t={d:(e,s)=>{for(var i in s)t.o(s,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:s[i]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var s=t.g.document;if(!e&&s&&(s.currentScript&&"SCRIPT"===s.currentScript.tagName.toUpperCase()&&(e=s.currentScript.src),!e)){var i=s.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=i[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e+"../"})();var e={};t.r(e),t.d(e,{CheckRules:()=>$m,ListLine:()=>km,Menu:()=>Cm});const s={get:(t,e)=>e[Symbol.metadata]?.[t],define(t,e,...s){let i=Object.getOwnPropertyDescriptor(e,Symbol.metadata)?.value;null==i&&Object.defineProperty(e,Symbol.metadata,{value:i=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const n=s.length;switch(n){case 0:throw new Error("At least one key must be provided");case 1:return void(i[s[0]]=t);case 2:return void(i[s[0]]=i[s[1]]=t);default:for(let e=0;e<n;++e)i[s[e]]=t;return}},has(t,e){const s=e[Symbol.metadata];return null!=s&&t in s},delete(t,e){const s=e[Symbol.metadata];null!=s&&Reflect.deleteProperty(s,t)}},i=Object.freeze,n=Object.assign,r=String,o=s.get,a=s.define,h=t=>t instanceof Promise,l=t=>t instanceof Array,c=t=>t instanceof Set,u=t=>t instanceof Map,d=t=>t instanceof Object;function f(t){return"object"==typeof t&&null!==t||"function"==typeof t}const p=t=>"function"==typeof t,g=t=>"string"==typeof t,m=()=>Object.create(null),v=Object.is,b=(t,...e)=>{const s=r(t).padStart(4,"0");return new Error(`AUR${s}:${e.map(r)}`)},w=(()=>{const t={};let e=!1,s=0,i=0,n=0;return r=>{switch(typeof r){case"number":return r>=0&&(0|r)===r;case"string":if(e=t[r],void 0!==e)return e;if(s=r.length,0===s)return t[r]=!1;for(i=0,n=0;n<s;++n)if(i=r.charCodeAt(n),0===n&&48===i&&s>1||i<48||i>57)return t[r]=!1;return t[r]=!0;default:return!1}}})(),y=function(){const t=n(m(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=e=>""===e?0:e!==e.toUpperCase()?3:e!==e.toLowerCase()?2:!0===t[e]?1:0;return(t,s)=>{const i=t.length;if(0===i)return t;let n,r=!1,o="",a="",h=0,l=t.charAt(0),c=e(l),u=0;for(;u<i;++u)n=h,a=l,h=c,l=t.charAt(u+1),c=e(l),0===h?o.length>0&&(r=!0):(!r&&o.length>0&&2===h&&(r=3===n||3===c),o+=s(a,r),r=!1);return o}}(),k=function(){const t=m(),e=(t,e)=>e?t.toUpperCase():t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=y(s,e)),i}}(),$=function(){const t=m();return e=>{let s=t[e];return void 0===s&&(s=k(e),s.length>0&&(s=s[0].toUpperCase()+s.slice(1)),t[e]=s),s}}(),C=function(){const t=m(),e=(t,e)=>e?`-${t.toLowerCase()}`:t.toLowerCase();return s=>{let i=t[s];return void 0===i&&(i=t[s]=y(s,e)),i}}(),T=t=>{const e=t.length,s=Array(e);let i=0;for(;i<e;++i)s[i]=t[i];return s},x=(t,e)=>{const s=e.name;e.addInitializer(function(){Reflect.defineProperty(this,s,{value:t.bind(this),writable:!0,configurable:!0,enumerable:!1})})},A=(...t)=>{const e=[];let s=0;const i=t.length;let n,r=0,o=0;for(;o<i;++o)if(n=t[o],void 0!==n){r=n.length;let t=0;for(;t<r;++t)e[s++]=n[t]}return e},R=(...t)=>{const e=t.length;let s,i=0;for(;e>i;++i)if(s=t[i],void 0!==s)return s;throw b(20)},S=function(){const t=Function.prototype,e=Object.getPrototypeOf,s=new WeakMap;let i,n=t,r=0;return function(o){if(i=s.get(o),void 0===i)for(s.set(o,i=[n=o]),r=0;(n=e(n))!==t;)i[++r]=n;return i}}();function E(...t){return n(m(),...t)}const I=(()=>{const t=new WeakMap;let e=!1,s="",i=0;return n=>(e=t.get(n),null==e&&(i=(s=n.toString()).length,e=i>28&&s.indexOf("[native code] }")===i-15,t.set(n,e)),e)})(),P=(t,e)=>h(t)?t.then(e):e(t),O=(...t)=>{let e,s,i,n=0,r=t.length;for(;n<r;++n)e=t[n],h(e=t[n])&&(void 0===s?s=e:void 0===i?i=[s,e]:i.push(e));return void 0===i?s:Promise.all(i)},M=(t,e)=>new Rt(t,1,e),B=(t,e)=>new Rt(t,2,e),j=(t,e)=>new Rt(e,5,t),L=new WeakMap,N=t=>(e,s,i)=>{let n=L.get(e);if(void 0===n&&L.set(e,n=new WeakMap),n.has(i))return n.get(i);const r=t(e,s,i);return n.set(i,r),r},D={instance:(t,e)=>new Rt(t,0,e),singleton:M,transient:B,callback:(t,e)=>new Rt(t,3,e),cachedCallback:(t,e)=>new Rt(t,3,N(e)),aliasTo:j,defer:(t,...e)=>new Et(t,e)},V=function(t){return function(e){e.register(M(this,this),j(this,t))}},F="au:annotation",q=(t,e)=>void 0===e?`${F}:${t}`:`${F}:${t}:${e}`,_="au:resource",z=(t,e,s)=>null==e?`${_}:${t}`:null==s?`${_}:${t}:${e}`:`${_}:${t}:${e}:${s}`,K={annotation:i({name:"au:annotation",appendTo:(t,e)=>{const s=o(F,t);void 0===s?a([e],t,F):s.push(e)},set(t,e,s){a(s,t,q(e))},get:(t,e)=>o(q(e),t),getKeys(t){let e=o(F,t);return void 0===e&&a(e=[],t,F),e},isKey:t=>t.startsWith(F),keyFor:q})},U=Object.prototype.hasOwnProperty;function W(t,e,s,i){let n=o(q(t),s);return void 0===n?(n=e[t],void 0===n?(n=s[t],void 0!==n&&U.call(s,t)?n:i()):n):n}function H(t,e,s){let i=o(q(t),e);return void 0===i?(i=e[t],void 0!==i&&U.call(e,t)?i:s()):i}function G(t,e,s){const i=e[t];return void 0===i?s():i}const X=Symbol.for("au:registrable"),Y={none(t){throw b(2,t)},singleton:t=>new Rt(t,1,t),transient:t=>new Rt(t,2,t)};class Q{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){return void 0===t||t===Q.DEFAULT?Q.DEFAULT:new Q(t.inheritParentResources??!1,t.defaultResolver??Y.singleton)}}Q.DEFAULT=Q.from({});const J=t=>new st(null,Q.from(t)),Z=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let tt=0,et=null;class st{get depth(){return null===this.t?0:this.t.depth+1}get parent(){return this.t}constructor(t,e){if(this.id=++tt,this.i=0,this.u=new Map,this.t=t,this.config=e,this.h=new Map,this.res={},null===t)this.root=this,this.R=new Map;else if(this.root=t.root,this.R=t.R,e.inheritParentResources)for(const e in t.res)this.registerResolver(e,t.res[e]);this.h.set(Ct,lt)}register(...t){if(100===++this.i)throw b(6,...t);let e,s,i,n,r,a,h=0,l=t.length;for(;h<l;++h)if(e=t[h],f(e))if(ct(e))e.register(this);else if(null!=(a=o(_,e)))a.register(this);else if(dt(e)){const t=e[Symbol.metadata]?.[X];if(ct(t))t.register(this);else if(g(e.$au?.type)){const t=e.$au,s=(e.aliases??It).concat(t.aliases??It);let i=`${_}:${t.type}:${t.name}`;if(this.has(i,!1))continue;for(j(e,i).register(this),this.has(e,!1)||M(e,e).register(this),n=0,r=s.length;n<r;++n)i=`${_}:${t.type}:${s[n]}`,this.has(i,!1)||j(e,i).register(this)}else M(e,e).register(this)}else for(s=Object.keys(e),n=0,r=s.length;n<r;++n)i=e[s[n]],f(i)&&(ct(i)?i.register(this):this.register(i));return--this.i,this}registerResolver(t,e,s=!1){rt(t);const i=this.h,n=i.get(t);if(null==n){if(i.set(t,e),ft(t)){if(void 0!==this.res[t])throw b(7,t);this.res[t]=e}}else n instanceof Rt&&4===n.$?n._state.push(e):i.set(t,new Rt(t,4,[n,e]));return s&&this.u.set(t,e),e}deregister(t){rt(t);const e=this.h.get(t);null!=e&&(this.h.delete(t),ft(t)&&delete this.res[t],this.u.has(t)&&(e.dispose(),this.u.delete(t)))}registerTransformer(t,e){const s=this.getResolver(t);if(null==s)return!1;if(s.getFactory){const t=s.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(rt(t),void 0!==t.resolve)return t;const s=et;let i,n,r=et=this;try{for(;null!=r;){if(i=r.h.get(t),null!=i)return i;if(null==r.t)return n=ut(t)?this:r,e?this.C(t,n):null;r=r.t}}finally{et=s}return null}has(t,e=!1){return this.h.has(t)||ft(t)&&t in this.res||((e&&this.t?.has(t,!0))??!1)}get(t){if(rt(t),t.$isResolver)return t.resolve(this,this);const e=et;let s,i,n=et=this;try{for(;null!=n;){if(s=n.h.get(t),null!=s)return s.resolve(n,this);if(null==n.t)return i=ut(t)?this:n,s=this.C(t,i),s.resolve(n,this);n=n.t}}finally{et=e}throw b(8,t)}getAll(t,e=!1){rt(t);const s=et,i=et=this;let n,r=i,o=It;try{if(e){for(;null!=r;)n=r.h.get(t),null!=n&&(o=o.concat(ht(n,r,i))),r=r.t;return o}for(;null!=r;){if(n=r.h.get(t),null!=n)return ht(n,r,i);if(r=r.t,null==r)return It}}finally{et=s}return It}invoke(t,e){if(I(t))throw b(15,t);const s=et;et=this;try{return void 0===e?new t(...wt(t).map(ot,this)):new t(...wt(t).map(ot,this),...e)}finally{et=s}}hasFactory(t){return this.R.has(t)}getFactory(t){let e=this.R.get(t);if(void 0===e){if(I(t))throw b(15,t);this.R.set(t,e=new it(t,wt(t)))}return e}registerFactory(t,e){this.R.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===Q.DEFAULT?new st(this,this.config):new st(this,Q.from({...this.config,inheritParentResources:!1})):new st(this,Q.from(t??this.config))}disposeResolvers(){const t=this.h,e=this.u;let s,i;for([i,s]of e.entries())s.dispose?.(),t.delete(i);e.clear()}useResources(t){const e=t.res;for(const t in e)this.registerResolver(t,e[t])}find(t,e){const s=g(e)?`${_}:${t}:${e}`:t;let i=this,n=i.res[s];return null==n&&(i=i.root,n=i.res[s]),null==n?null:n.getFactory?.(i)?.Type??null}dispose(){this.u.size>0&&this.disposeResolvers(),this.h.clear(),this.root===this&&(this.R.clear(),this.res={})}C(t,e){const s=ct(t);if(!p(t)&&!s)throw b(9,t);if(Z.has(t.name))throw b(10,t);if(s){const s=t.register(e,t);if(!(s instanceof Object)||null==s.resolve){const s=e.h.get(t);if(null!=s)return s;throw b(11,t)}return s}if(t.$isInterface)throw b(12,t.friendlyName);const i=this.config.defaultResolver(t,e);return e.h.set(t,i),i}}class it{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){const s=et;let i;et=t;try{return i=void 0===e?new this.Type(...this.dependencies.map(ot,t)):new this.Type(...this.dependencies.map(ot,t),...e),null==this.transformers?i:this.transformers.reduce(nt,i)}finally{et=s}}registerTransformer(t){(this.transformers??=[]).push(t)}}function nt(t,e){return e(t)}function rt(t){if(null==t)throw b(14)}function ot(t){return this.get(t)}function at(...t){if(null==et)throw b(16,...t);return 1===t.length?et.get(t[0]):t.map(ot,et)}const ht=(t,e,s)=>{if(t instanceof Rt&&4===t.$){const i=t._state,n=i.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=i[o].resolve(e,s);return r}return[t.resolve(e,s)]},lt={$isResolver:!0,resolve:(t,e)=>e},ct=t=>p(t?.register),ut=t=>(t=>ct(t)&&"boolean"==typeof t.registerInRequestor)(t)&&t.registerInRequestor,dt=t=>void 0!==t.prototype,ft=t=>g(t)&&t.indexOf(":")>0;class pt{constructor(t,e){this.c=t,this.k=e}instance(t){return this.O(0,t)}singleton(t){return this.O(1,t)}transient(t){return this.O(2,t)}callback(t){return this.O(3,t)}cachedCallback(t){return this.O(3,N(t))}aliasTo(t){return this.O(5,t)}O(t,e){const{c:s,k:i}=this;return this.c=this.k=void 0,s.registerResolver(i,new Rt(i,t,e))}}const gt=t=>{const e=t.slice(),s=Object.keys(t),i=s.length;let n;for(let r=0;r<i;++r)n=s[r],w(n)||(e[n]=t[n]);return e},mt=q("di:paramtypes"),vt=t=>o("design:paramtypes",t),bt=t=>t.metadata[mt]??=[],wt=t=>{const e=q("di:dependencies");let s=o(e,t);if(void 0===s){const i=t.inject;if(void 0===i){const e=vt(t),i=(t=>o(mt,t))(t);if(void 0===e)if(void 0===i){const e=Object.getPrototypeOf(t);s=p(e)&&e!==Function.prototype?gt(wt(e)):[]}else s=gt(i);else if(void 0===i)s=gt(e);else{s=gt(e);let t,n=i.length,r=0;for(;r<n;++r)t=i[r],void 0!==t&&(s[r]=t);const o=Object.keys(i);let a;for(r=0,n=o.length,r=0;r<n;++r)a=o[r],w(a)||(s[a]=i[a])}}else s=gt(i);a(s,t,e)}return s},yt=(t,e)=>{const s=p(t)?t:e,i=(g(t)?t:void 0)??"(anonymous)",n={$isInterface:!0,friendlyName:i,toString:()=>`InterfaceSymbol<${i}>`,register:null!=s?(t,e)=>s(new pt(t,e??n)):void 0};return n},kt=(...t)=>(e,s)=>{switch(s.kind){case"class":{const e=bt(s);let i,n=0;for(;n<t.length;++n)i=t[n],void 0!==i&&(e[n]=i);break}case"field":{const e=bt(s),i=t[0];void 0!==i&&(e[s.name]=i);break}default:throw b(22,String(s.name),s.kind)}},$t=(()=>(Symbol.metadata??=Symbol.for("Symbol.metadata"),{createContainer:J,getDesignParamtypes:vt,getDependencies:wt,createInterface:yt,inject:kt,transient:t=>(t.register=function(e){return B(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=At)=>(t.register=function(e){return M(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)}))(),Ct=yt("IContainer"),Tt=Ct;function xt(t,e){return $t.transient(t)}const At={scoped:!1};$t.singleton;class Rt{get $isResolver(){return!0}constructor(t,e,s){this.j=!1,this.F=null,this.k=t,this.$=e,this._state=s}register(t,e){return t.registerResolver(e||this.k,this)}resolve(t,e){switch(this.$){case 0:return this._state;case 1:if(this.j)throw b(3,this._state.name);return this.j=!0,this._state=(this.F=t.getFactory(this._state)).construct(e),this.$=0,this.j=!1,this._state;case 2:{const s=t.getFactory(this._state);if(null===s)throw b(4,this.k);return s.construct(e)}case 3:return this._state(t,e,this);case 4:return this._state[0].resolve(t,e);case 5:return e.get(this._state);default:throw b(5,this.$)}}getFactory(t){switch(this.$){case 1:case 2:return t.getFactory(this._state);case 5:return t.getResolver(this._state)?.getFactory?.(t)??null;case 0:return this.F;default:return null}}}class St{get friendlyName(){return this.I}constructor(t,e=null,s=null){this.I=t,this.A=e,this.L=s}prepare(t){this.A=t}get $isResolver(){return!0}resolve(){if(null==this.A)throw b(13,this.I);return this.A}getFactory(t){return null==this.L?null:t.getFactory(this.L)}dispose(){this.A=null}}class Et{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter(t=>"object"==typeof t))}}const It=i([]),Pt=i({});function Ot(){}const Mt=yt("IPlatform");function Bt(t){return function(e){function s(t,e){kt(s)(t,e)}return s.$isResolver=!0,s.resolve=function(s,i){return t(e,s,i)},s}}const jt=(t,e=!1)=>{function s(t,e){kt(s)(t,e)}return s.$isResolver=!0,s.resolve=(s,i)=>i.getAll(t,e),s},Lt=Bt((t,e,s)=>s.has(t,!0)?s.get(t):void 0),Nt=Bt((t,e,s)=>(...i)=>e.getFactory(t).construct(s,i)),Dt=Bt((t,e,s)=>s.has(t,!1)?s.get(t):void 0),Vt=Bt((t,e,s)=>s.has(t,!1)?s.get(t):s.root.get(t)),Ft=Bt((t,e,s)=>s.has(t,!1)?s.get(t):s.root.has(t,!1)?s.root.get(t):void 0),qt=Bt((t,e,s)=>s===s.root?s.getAll(t,!1):s.has(t,!1)?s.getAll(t,!1).concat(s.root.getAll(t,!1)):s.root.getAll(t,!1));function _t(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,l="getter"===h?"get":"setter"===h?"set":"value",c=!e&&t?i.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d=!1,f=s.length-1;f>=0;f--){var p={};for(var g in i)p[g]="access"===g?{}:i[g];for(var g in i.access)p.access[g]=i.access[g];p.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[f])("accessor"===h?{get:u.get,set:u.set}:u[l],p);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[l]=a)}c&&Object.defineProperty(c,i.name,u),d=!0}"function"==typeof SuppressedError&&SuppressedError,i({trace:0,debug:1,info:2,warn:3,error:4,fatal:5,none:6});const zt=yt("ILogConfig",t=>t.instance(new Yt("no-colors",3))),Kt=yt("ISink"),Ut=yt("ILogEventFactory",t=>t.singleton(ee)),Wt=yt("ILogger",t=>t.singleton(se)),Ht=yt("ILogScope"),Gt=i({key:q("logger-sink-handles"),define(t,e){a(e.handles,t,this.key)},getHandles(t){return o(this.key,t.constructor)}}),Xt=E({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class Yt{constructor(t,e){this.colorOptions=t,this.level=e}}const Qt=function(){const t={"no-colors":E({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:E({TRC:Xt.grey("TRC"),DBG:Xt.grey("DBG"),INF:Xt.white("INF"),WRN:Xt.yellow("WRN"),ERR:Xt.red("ERR"),FTL:Xt.red("FTL"),QQQ:Xt.grey("???")})};return(e,s)=>e<=0?t[s].TRC:e<=1?t[s].DBG:e<=2?t[s].INF:e<=3?t[s].WRN:e<=4?t[s].ERR:e<=5?t[s].FTL:t[s].QQQ}(),Jt=(t,e)=>"no-colors"===e?t.join("."):t.map(Xt.cyan).join("."),Zt=(t,e)=>"no-colors"===e?new Date(t).toISOString():Xt.grey(new Date(t).toISOString());class te{constructor(t,e,s,i,n,r){this.severity=t,this.message=e,this.optionalParams=s,this.scope=i,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:s,colorOptions:i,timestamp:n}=this;return 0===s.length?`${Zt(n,i)} [${Qt(t,i)}] ${e}`:`${Zt(n,i)} [${Qt(t,i)} ${Jt(s,i)}] ${e}`}getFormattedLogInfo(t=!1){const{severity:e,message:s,scope:i,colorOptions:n,timestamp:r,optionalParams:o}=this;let a=null,h="";t&&s instanceof Error?a=s:h=s;const l=0===i.length?"":` ${Jt(i,n)}`;let c=`${Zt(r,n)} [${Qt(e,n)}${l}] ${h}`;if(void 0===o||0===o.length)return null===a?[c]:[c,a];let u=0;for(;c.includes("%s");)c=c.replace("%s",String(o[u++]));return null!==a?[c,a,...o.slice(u)]:[c,...o.slice(u)]}}class ee{constructor(){this.config=at(zt)}createLogEvent(t,e,s,i){return new te(e,s,i,t.scope,this.config.colorOptions,Date.now())}}let se=(()=>{var t;let e,s,i,n,r,o,a=[];return t=class{constructor(t=at(zt),e=at(Ut),s=at(jt(Kt)),i=at(Lt(Ht))??[],n=null){let r,o,h,l,c,u;if(this.scope=(function(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t)}(this,a),i),this._=m(),this.config=t,this.f=e,this.sinks=s,null===n){this.root=this,this.parent=this,r=this.M=[],o=this.T=[],h=this.P=[],l=this.K=[],c=this.N=[],u=this.G=[];for(const t of s){const e=Gt.getHandles(t);(e?.includes(0)??1)&&r.push(t),(e?.includes(1)??1)&&o.push(t),(e?.includes(2)??1)&&h.push(t),(e?.includes(3)??1)&&l.push(t),(e?.includes(4)??1)&&c.push(t),(e?.includes(5)??1)&&u.push(t)}}else this.root=n.root,this.parent=n,r=this.M=n.M,o=this.T=n.T,h=this.P=n.P,l=this.K=n.K,c=this.N=n.N,u=this.G=n.G}trace(t,...e){this.config.level<=0&&this.W(this.M,0,t,e)}debug(t,...e){this.config.level<=1&&this.W(this.T,1,t,e)}info(t,...e){this.config.level<=2&&this.W(this.P,2,t,e)}warn(t,...e){this.config.level<=3&&this.W(this.K,3,t,e)}error(t,...e){this.config.level<=4&&this.W(this.N,4,t,e)}fatal(t,...e){this.config.level<=5&&this.W(this.G,5,t,e)}scopeTo(e){const s=this._;let i=s[e];return void 0===i&&(i=s[e]=new t(this.config,this.f,null,this.scope.concat(e),this)),i}W(t,e,s,i){const n=p(s)?s():s,r=this.f.createLogEvent(this,e,n,i);for(let e=0,s=t.length;e<s;++e)t[e].handleEvent(r)}},(()=>{const h="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;e=[x],s=[x],i=[x],n=[x],r=[x],o=[x],_t(t,null,e,{kind:"method",name:"trace",static:!1,private:!1,access:{has:t=>"trace"in t,get:t=>t.trace},metadata:h},null,a),_t(t,null,s,{kind:"method",name:"debug",static:!1,private:!1,access:{has:t=>"debug"in t,get:t=>t.debug},metadata:h},null,a),_t(t,null,i,{kind:"method",name:"info",static:!1,private:!1,access:{has:t=>"info"in t,get:t=>t.info},metadata:h},null,a),_t(t,null,n,{kind:"method",name:"warn",static:!1,private:!1,access:{has:t=>"warn"in t,get:t=>t.warn},metadata:h},null,a),_t(t,null,r,{kind:"method",name:"error",static:!1,private:!1,access:{has:t=>"error"in t,get:t=>t.error},metadata:h},null,a),_t(t,null,o,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:t=>"fatal"in t,get:t=>t.fatal},metadata:h},null,a),h&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h})})(),t})();class ie{constructor(t,e){this.type=t,this.cb=e}handle(t){t instanceof this.type&&this.cb.call(null,t)}}const ne=yt("IEventAggregator",t=>t.singleton(re));class re{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw b(18,t);if(g(t)){let s=this.eventLookup[t];if(void 0!==s){s=s.slice();const i=s.length;for(let n=0;n<i;n++)s[n](e,t)}}else{const e=this.messageHandlers.slice(),s=e.length;for(let i=0;i<s;i++)e[i].handle(t)}}subscribe(t,e){if(!t)throw b(19,t);let s,i;return g(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),s=e,i=this.eventLookup[t]):(s=new ie(t,e),i=this.messageHandlers),i.push(s),{dispose(){const t=i.indexOf(s);-1!==t&&i.splice(t,1)}}}subscribeOnce(t,e){const s=this.subscribe(t,(t,i)=>{s.dispose(),e(t,i)});return s}}const oe="AccessThis",ae="AccessGlobal",he="AccessScope",le="AccessMember",ce="AccessKeyed",ue="ArrayBindingPattern",de="ObjectBindingPattern",fe="BindingIdentifier",pe="ArrayDestructuring",ge="DestructuringAssignmentLeaf";class me{constructor(t){this.value=t,this.$kind="Custom"}evaluate(...t){return this.value}assign(...t){return t}bind(...t){}unbind(...t){}accept(t){}}class ve{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind="BindingBehavior",this.key=`_bb_${e}`}}class be{constructor(t,e,s){this.expression=t,this.name=e,this.args=s,this.$kind="ValueConverter"}}class we{constructor(t,e,s="="){this.target=t,this.value=e,this.op=s,this.$kind="Assign"}}class ye{constructor(t,e,s){this.condition=t,this.yes=e,this.no=s,this.$kind="Conditional"}}class ke{constructor(t){this.name=t,this.$kind=ae}}class $e{constructor(t=0){this.ancestor=t,this.$kind=oe}}class Ce{constructor(){this.$kind="AccessBoundary"}}class Te{constructor(t,e=0){this.name=t,this.ancestor=e,this.$kind=he}}const xe=t=>t.$kind===ae||(t.$kind===le||t.$kind===ce)&&t.accessGlobal;class Ae{constructor(t,e,s=!1){this.object=t,this.name=e,this.optional=s,this.$kind=le,this.accessGlobal=xe(t)}}class Re{constructor(t,e,s=!1){this.object=t,this.key=e,this.optional=s,this.$kind=ce,this.accessGlobal=xe(t)}}class Se{constructor(t,e){this.func=t,this.args=e,this.$kind="New"}}class Ee{constructor(t,e,s=0,i=!1){this.name=t,this.args=e,this.ancestor=s,this.optional=i,this.$kind="CallScope"}}class Ie{constructor(t,e,s,i=!1,n=!1){this.object=t,this.name=e,this.args=s,this.optionalMember=i,this.optionalCall=n,this.$kind="CallMember"}}class Pe{constructor(t,e,s=!1){this.func=t,this.args=e,this.optional=s,this.$kind="CallFunction"}}class Oe{constructor(t,e){this.name=t,this.args=e,this.$kind="CallGlobal"}}class Me{constructor(t,e,s){this.operation=t,this.left=e,this.right=s,this.$kind="Binary"}}class Be{constructor(t,e,s=0){this.operation=t,this.expression=e,this.pos=s,this.$kind="Unary"}}class je{constructor(t){this.value=t,this.$kind="PrimitiveLiteral"}}je.$undefined=new je(void 0),je.$null=new je(null),je.$true=new je(!0),je.$false=new je(!1),je.$empty=new je("");class Le{constructor(t){this.elements=t,this.$kind="ArrayLiteral"}}Le.$empty=new Le(It);class Ne{constructor(t,e){this.keys=t,this.values=e,this.$kind="ObjectLiteral"}}Ne.$empty=new Ne(It,It);class De{constructor(t,e=It){this.cooked=t,this.expressions=e,this.$kind="Template"}}De.$empty=new De([""]);class Ve{constructor(t,e,s,i=It){this.cooked=t,this.func=s,this.expressions=i,this.$kind="TaggedTemplate",t.raw=e}}class Fe{constructor(t){this.elements=t,this.$kind=ue}}class qe{constructor(t,e){this.keys=t,this.values=e,this.$kind=de}}class _e{constructor(t){this.name=t,this.$kind=fe}}class ze{constructor(t,e,s){this.declaration=t,this.iterable=e,this.semiIdx=s,this.$kind="ForOfStatement"}}class Ke{constructor(t,e=It){this.parts=t,this.expressions=e,this.$kind="Interpolation",this.isMulti=e.length>1,this.firstExpression=e[0]}}class Ue{constructor(t,e,s,i){this.$kind=t,this.list=e,this.source=s,this.initializer=i}}class We{constructor(t,e,s){this.target=t,this.source=e,this.initializer=s,this.$kind=ge}}class He{constructor(t,e){this.target=t,this.indexOrProperties=e,this.$kind=ge}}class Ge{constructor(t,e,s=!1){this.args=t,this.body=e,this.rest=s,this.$kind="ArrowFunction"}}const Xe=String,Ye=()=>Object.create(null),Qe=(t,...e)=>new Error(`AUR${Xe(t).padStart(4,"0")}:${e.map(Xe)}`),Je=$t.createInterface("IExpressionParser");class Ze{constructor(){this.t=Ye(),this.i=Ye(),this.h=Ye()}parse(t,e){let s;switch(e){case ps:return new me(t);case ls:return s=this.h[t],void 0===s&&(s=this.h[t]=this.$parse(t,e)),s;case cs:return s=this.i[t],void 0===s&&(s=this.i[t]=this.$parse(t,e)),s;default:if(0===t.length){if(e===ds||e===fs)return je.$empty;throw Zs()}return s=this.t[t],void 0===s&&(s=this.t[t]=this.$parse(t,e)),s}}$parse(t,e){return ms=t,vs=0,bs=t.length,ws=0,ys=0,ks=6291456,$s="",gs=Ss(0),Cs=!0,Ts=!1,xs=!0,As=-1,Ps(61,void 0===e?fs:e)}}function ts(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}Ze.register=V(Je);const es=je.$false,ss=je.$true,is=je.$null,ns=je.$undefined,rs=new $e(0),os=new $e(1),as=new Ce,hs="None",ls="Interpolation",cs="IsIterator",us="IsChainable",ds="IsFunction",fs="IsProperty",ps="IsCustom";let gs,ms="",vs=0,bs=0,ws=0,ys=0,ks=6291456,$s="",Cs=!0,Ts=!1,xs=!0,As=-1;const Rs=String.fromCharCode,Ss=t=>ms.charCodeAt(t),Es=()=>ms.slice(ys,vs),Is="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function Ps(t,e){if(e===ps)return new me(ms);if(0===vs){if(e===ls)return function(){const t=[],e=[],s=bs;let i="";for(;vs<s;){switch(gs){case 36:if(123===Ss(vs+1)){t.push(i),i="",vs+=2,gs=Ss(vs),Vs();const s=Ps(61,ls);e.push(s);continue}i+="$";break;case 92:i+=Rs(ts(Fs()));break;default:i+=Rs(gs)}Fs()}return e.length?(t.push(i),new Ke(t,e)):null}();if(Vs(),4194304&ks)throw Hs()}Cs=577>t,Ts=!1,xs=579>t;let s,i=!1,n=0;if(131072&ks){const t=wi[63&ks];Vs(),s=new Be(t,Ps(579,e)),Cs=!1}else{t:switch(ks){case 12296:n=ws,Cs=!1,xs=!1;do{switch(Vs(),++n,ks){case 65547:if(Vs(),!(12288&ks))throw Xs();break;case 12:case 13:throw Xs();case 2162702:if(Ts=!0,Vs(),!(12288&ks)){s=0===n?rs:1===n?os:new $e(n),i=!0;break t}break;default:if(2097152&ks){s=0===n?rs:1===n?os:new $e(n);break t}throw Ys()}}while(12296===ks);case 4096:{const t=$s;if(e===cs)s=new _e(t);else if(xs&&Is.includes(t))s=new ke(t);else{if(xs&&"import"===t)throw ni();s=new Te(t,n)}if(Cs=!Ts,Vs(),Us(53)){if(524298===ks)throw vi();const e=Ts,i=ws;++ws;const n=Ps(62,hs);Ts=e,ws=i,Cs=!1,s=new Ge([new _e(t)],n)}break}case 12:throw bi();case 13:throw Gs();case 12293:switch(Cs=!1,Vs(),ws){case 0:s=rs;break;case 1:s=os;break;default:s=new $e(ws)}break;case 12294:Cs=!1,Vs(),s=as;break;case 2688009:s=function(t){Vs();const e=vs,s=ys,i=ks,n=gs,r=$s,o=Ts,a=[];let h=1,l=!1;e:for(;;){if(13===ks){if(Vs(),4096!==ks)throw Xs();if(a.push(new _e($s)),Vs(),6291475===ks)throw mi();if(7340048!==ks)throw Gs();if(Vs(),53!==ks)throw Gs();Vs();const t=Ts,e=ws;++ws;const s=Ps(62,hs);return Ts=t,ws=e,Cs=!1,new Ge(a,s,!0)}switch(ks){case 4096:a.push(new _e($s)),Vs();break;case 7340048:Vs();break e;case 524298:case 2688020:Vs(),h=4;break;case 6291475:h=2,l=!0;break e;case 2688009:h=2;break e;default:Vs(),h=2}switch(ks){case 6291475:if(Vs(),l=!0,1===h)break;break e;case 7340048:Vs();break e;case 4194352:1===h&&(h=3);break e;case 53:if(l)throw fi();Vs(),h=2;break e;default:1===h&&(h=2);break e}}if(53===ks){if(1===h){if(Vs(),524298===ks)throw vi();const t=Ts,e=ws;++ws;const s=Ps(62,hs);return Ts=t,ws=e,Cs=!1,new Ge(a,s)}throw fi()}if(1===h&&0===a.length)throw li();if(l)switch(h){case 2:throw fi();case 3:throw pi();case 4:throw gi()}vs=e,ys=s,ks=i,gs=n,$s=r,Ts=o;const c=Ts,u=Ps(62,t);if(Ts=c,Ws(7340048),53===ks)switch(h){case 2:throw fi();case 3:throw pi();case 4:throw gi()}return u}(e);break;case 2688020:s=ms.search(/\s+of\s+/)>vs?function(){const t=[],e=new Ue(pe,t,void 0,void 0);let s="",i=!0,n=0;for(;i;)switch(Vs(),ks){case 7340053:i=!1,r();break;case 6291475:r();break;case 4096:s=Es();break;default:throw ci()}return Ws(7340053),e;function r(){""!==s?(t.push(new We(new Ae(rs,s),new Re(rs,new je(n++)),void 0)),s=""):n++}}():function(t){const e=Ts;Vs();const s=new Array;for(;7340053!==ks;)if(Us(6291475)){if(s.push(ns),7340053===ks)break}else{if(s.push(Ps(62,t===cs?hs:t)),!Us(6291475))break;if(7340053===ks)break}return Ts=e,Ws(7340053),t===cs?new Fe(s):(Cs=!1,new Le(s))}(e);break;case 524298:s=function(t){const e=Ts,s=new Array,i=new Array;for(Vs();7340047!==ks;){if(s.push($s),49152&ks)Vs(),Ws(6291478),i.push(Ps(62,t===cs?hs:t));else{if(!(12288&ks))throw oi();{const e=gs,s=ks,n=vs;Vs(),Us(6291478)?i.push(Ps(62,t===cs?hs:t)):(gs=e,ks=s,vs=n,i.push(Ps(580,t===cs?hs:t)))}}7340047!==ks&&Ws(6291475)}return Ts=e,Ws(7340047),t===cs?new qe(s,i):(Cs=!1,new Ne(s,i))}(e);break;case 2163762:s=new De([$s]),Cs=!1,Vs();break;case 2163763:s=Ns(e,s,!1);break;case 16384:case 32768:s=new je($s),Cs=!1,Vs();break;case 8194:case 8195:case 8193:case 8192:s=wi[63&ks],Cs=!1,Vs();break;case 8196:{Vs();const t=Ps(578,e);let i;2688009===ks?i=Os():(i=[],Vs()),s=new Se(t,i),Cs=!1;break}default:throw vs>=bs?Qs():Js()}if(e===cs)return function(t){if(!Ls.includes(t.$kind))throw ri(t.$kind);if(4204596!==ks)throw ri(t.$kind);Vs();const e=t,s=Ps(61,us);return new ze(e,s,As)}(s);switch(ks){case 2228282:case 2228283:s=new Be(wi[63&ks],s,1),Vs(),Cs=!1}if(579<t)return s;if(12===ks||13===ks)throw Xs();if(s.$kind===oe)switch(ks){case 2162702:if(Ts=!0,Cs=!1,Vs(),!(13312&ks))throw ui();if(12288&ks)s=new Te($s,s.ancestor),Vs();else if(2688009===ks)s=new Pe(s,Os(),!0);else{if(2688020!==ks)throw di();s=Ms(s,!0)}break;case 65547:if(Cs=!Ts,Vs(),!(12288&ks))throw Xs();s=new Te($s,s.ancestor),Vs();break;case 12:case 13:throw Xs();case 2688009:s=new Pe(s,Os(),i);break;case 2688020:s=Ms(s,i);break;case 2163762:s=Ds(s);break;case 2163763:s=Ns(e,s,!0)}for(;(65536&ks)>0;)switch(ks){case 2162702:s=Bs(s);break;case 65547:if(Vs(),!(12288&ks))throw Xs();s=js(s,!1);break;case 12:case 13:throw Xs();case 2688009:if(578===t)return s;s=s.$kind===he?new Ee(s.name,Os(),s.ancestor,!1):s.$kind===le?new Ie(s.object,s.name,Os(),s.optional,!1):s.$kind===ae?new Oe(s.name,Os()):new Pe(s,Os(),!1);break;case 2688020:s=Ms(s,!1);break;case 2163762:if(Ts)throw di();s=Ds(s);break;case 2163763:if(Ts)throw di();s=Ns(e,s,!0)}}if(12===ks||13===ks)throw Xs();if(577<t)return s;for(;(262144&ks)>0;){const i=ks;if((960&i)<=t)break;Vs(),s=new Me(wi[63&i],s,Ps(960&i,e)),Cs=!1}if(63<t)return s;if(Us(6291480)){const t=Ps(62,e);Ws(6291478),s=new ye(s,t,Ps(62,e)),Cs=!1}if(62<t)return s;switch(ks){case 4194352:case 4194358:case 4194359:case 4194360:case 4194361:{if(!Cs)throw ti();const t=wi[63&ks];Vs(),s=new we(s,Ps(62,e),t);break}}if(61<t)return s;for(;Us(6291482);){if(6291456===ks)throw ei();const t=$s;Vs();const i=new Array;for(;Us(6291478);)i.push(Ps(62,e));s=new be(s,t,i)}for(;Us(6291481);){if(6291456===ks)throw si();const t=$s;Vs();const i=new Array;for(;Us(6291478);)i.push(Ps(62,e));s=new ve(s,t,i)}if(6291456!==ks){if(e===ls&&7340047===ks)return s;if(e===us&&6291479===ks){if(vs===bs)throw Js();return As=vs-1,s}if("of"===Es())throw ii();throw Js()}return s}function Os(){const t=Ts;Vs();const e=[];for(;7340048!==ks&&(e.push(Ps(62,hs)),Us(6291475)););return Ws(7340048),Cs=!1,Ts=t,e}function Ms(t,e){const s=Ts;return Vs(),t=new Re(t,Ps(62,hs),e),Ws(7340053),Cs=!s,Ts=s,t}function Bs(t){if(Ts=!0,Cs=!1,Vs(),!(13312&ks))throw ui();if(12288&ks)return js(t,!0);if(2688009===ks)return t.$kind===he?new Ee(t.name,Os(),t.ancestor,!0):t.$kind===le?new Ie(t.object,t.name,Os(),t.optional,!0):new Pe(t,Os(),!0);if(2688020===ks)return Ms(t,!0);throw di()}function js(t,e){const s=$s;switch(ks){case 2162702:{Ts=!0,Cs=!1;const i=vs,n=ys,r=ks,o=gs,a=$s,h=Cs,l=Ts;if(Vs(),!(13312&ks))throw ui();return 2688009===ks?new Ie(t,s,Os(),e,!0):(vs=i,ys=n,ks=r,gs=o,$s=a,Cs=h,Ts=l,new Ae(t,s,e))}case 2688009:return Cs=!1,new Ie(t,s,Os(),e,!1);default:return Cs=!Ts,Vs(),new Ae(t,s,e)}}const Ls=[ue,de,fe,pe,"ObjectDestructuring"];function Ns(t,e,s){const i=Ts,n=[$s];Ws(2163763);const r=[Ps(62,t)];for(;2163762!==(ks=Ks());)n.push($s),Ws(2163763),r.push(Ps(62,t));return n.push($s),Cs=!1,Ts=i,s?(Vs(),new Ve(n,n,e,r)):(Vs(),new De(n,r))}function Ds(t){Cs=!1;const e=[$s];return Vs(),new Ve(e,e,t)}function Vs(){for(;vs<bs;)if(ys=vs,null!=(ks=ki[gs]()))return;ks=6291456}function Fs(){return gs=Ss(++vs)}function qs(){for(;$i[Fs()];);const t=yi[$s=Es()];return void 0===t?4096:t}function _s(t){let e=gs;if(!1===t){do{e=Fs()}while(e<=57&&e>=48);if(46!==e)return $s=parseInt(Es(),10),32768;if(e=Fs(),vs>=bs)return $s=parseInt(Es().slice(0,-1),10),32768}if(e<=57&&e>=48)do{e=Fs()}while(e<=57&&e>=48);else gs=Ss(--vs);return $s=parseFloat(Es()),32768}function zs(){let t=!0,e="";for(;96!==Fs();)if(36===gs){if(vs+1<bs&&123===Ss(vs+1)){vs++,t=!1;break}e+="$"}else if(92===gs)e+=Rs(ts(Fs()));else{if(vs>=bs)throw hi();e+=Rs(gs)}return Fs(),$s=e,t?2163762:2163763}const Ks=()=>{if(vs>=bs)throw hi();return vs--,zs()},Us=t=>ks===t&&(Vs(),!0),Ws=t=>{if(ks!==t)throw li();Vs()},Hs=()=>Qe(151,ms),Gs=()=>Qe(152,ms),Xs=()=>Qe(153,ms),Ys=()=>Qe(154,ms),Qs=()=>Qe(155,ms),Js=()=>Qe(156,Es(),vs,ms),Zs=()=>Qe(157),ti=()=>Qe(158,ms),ei=()=>Qe(159,ms),si=()=>Qe(160,ms),ii=()=>Qe(161,ms),ni=()=>Qe(162,ms),ri=t=>Qe(163,ms,t),oi=()=>Qe(164,ms),ai=()=>Qe(165,ms),hi=()=>Qe(166,ms),li=t=>Qe(167,ms),ci=()=>Qe(170,ms),ui=()=>Qe(171,ms),di=()=>Qe(172,ms),fi=()=>Qe(173,ms),pi=()=>Qe(174,ms),gi=()=>Qe(175,ms),mi=()=>Qe(176,ms),vi=()=>Qe(178,ms),bi=()=>Qe(179,ms),wi=[es,ss,is,ns,"new","this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","**","=","!",2163762,2163763,"of","=>","+=","-=","*=","/=","++","--"],yi=Object.assign(Ye(),{true:8193,null:8194,false:8192,undefined:8195,new:8196,this:12294,$this:12293,$parent:12296,in:6562214,instanceof:6562215,typeof:139306,void:139307,of:4204596}),{CharScanners:ki,IdParts:$i}=(()=>{const t=()=>{throw Qe(168,ms)};t.notMapped=!0;const e=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],s=[48,58],i=(t,e,s,i)=>{const n=s.length;for(let e=0;e<n;e+=2){const n=s[e];let r=s[e+1];r=r>0?r:n+1,t&&t.fill(i,n,r)}},n=(t=>(i(t,0,e,1),i(t,0,s,1),t))(new Uint8Array(65535)),r=t=>()=>(Fs(),t),o=new Array(65535);return o.fill(t,0,65535),i(o,0,[0,33,127,161],()=>(Fs(),null)),i(o,0,e,qs),i(o,0,s,()=>_s(!1)),o[34]=o[39]=()=>function(){const t=gs;Fs();let e=0;const s=new Array;let i=vs;for(;gs!==t;)if(92===gs)s.push(ms.slice(i,vs)),Fs(),e=ts(gs),Fs(),s.push(Rs(e)),i=vs;else{if(vs>=bs)throw ai();Fs()}const n=ms.slice(i,vs);Fs(),s.push(n);const r=s.join("");return $s=r,16384}(),o[96]=()=>zs(),o[33]=()=>61!==Fs()?131121:61!==Fs()?6553951:(Fs(),6553953),o[61]=()=>62===Fs()?(Fs(),53):61!==gs?4194352:61!==Fs()?6553950:(Fs(),6553952),o[38]=()=>38!==Fs()?6291481:(Fs(),6553885),o[124]=()=>124!==Fs()?6291482:(Fs(),6553820),o[63]=()=>{if(46===Fs()){const t=Ss(vs+1);return t<=48||t>=57?(Fs(),2162702):6291480}return 63!==gs?6291480:(Fs(),6553755)},o[46]=()=>Fs()<=57&&gs>=48?_s(!0):46===gs?46!==Fs()?12:(Fs(),13):65547,o[60]=()=>61!==Fs()?6554018:(Fs(),6554020),o[62]=()=>61!==Fs()?6554019:(Fs(),6554021),o[37]=r(6554157),o[40]=r(2688009),o[41]=r(7340048),o[42]=()=>61===Fs()?(Fs(),4194360):42===gs?(Fs(),6554223):6554156,o[43]=()=>43===Fs()?(Fs(),2228282):61!==gs?2490856:(Fs(),4194358),o[44]=r(6291475),o[45]=()=>45===Fs()?(Fs(),2228283):61!==gs?2490857:(Fs(),4194359),o[47]=()=>61!==Fs()?6554158:(Fs(),4194361),o[58]=r(6291478),o[59]=r(6291479),o[91]=r(2688020),o[93]=r(7340053),o[123]=r(524298),o[125]=r(7340047),{CharScanners:o,IdParts:n}})(),Ci=$t.createInterface,Ti=Object.freeze,{aliasTo:xi,singleton:Ai}=D,Ri="Interpolation",Si="IsFunction",Ei="IsProperty",Ii="custom-element",Pi=Ti({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),Oi=Ci("ITemplateCompiler"),Mi=Ci("IAttrMapper"),Bi=(t,...e)=>{const s=String(t).padStart(4,"0");return new Error(`AUR${s}:${e.map(String)}`)};class ji{constructor(t,e,s,i){if(this.chars=t,this.repeat=e,this.isSymbol=s,this.isInverted=i,i)switch(t.length){case 0:this.has=this.i;break;case 1:this.has=this.u;break;default:this.has=this.A}else switch(t.length){case 0:this.has=this.I;break;case 1:this.has=this.B;break;default:this.has=this.P}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}P(t){return this.chars.includes(t)}B(t){return this.chars===t}I(t){return!1}A(t){return!this.chars.includes(t)}u(t){return this.chars!==t}i(t){return!0}}class Li{constructor(){this.parts=It,this.C="",this.T={},this.R={}}get pattern(){const t=this.C;return""===t?null:t}set pattern(t){null==t?(this.C="",this.parts=It):(this.C=t,this.parts=this.R[t])}append(t,e){const s=this.T;void 0===s[t]?s[t]=e:s[t]+=e}next(t){const e=this.T;let s;void 0!==e[t]&&(s=this.R,void 0===s[t]?s[t]=[e[t]]:s[t].push(e[t]),e[t]=void 0)}}class Ni{get C(){return this._?this.L[0]:null}constructor(t,...e){this.charSpec=t,this.V=[],this.H=null,this._=!1,this.L=e}findChild(t){const e=this.V,s=e.length;let i=null,n=0;for(;n<s;++n)if(i=e[n],t.equals(i.charSpec))return i;return null}append(t,e){const s=this.L;s.includes(e)||s.push(e);let i=this.findChild(t);return null==i&&(i=new Ni(t,e),this.V.push(i),t.repeat&&i.V.push(i)),i}findMatches(t,e){const s=[],i=this.V,n=i.length;let r=0,o=null,a=0,h=0;for(;a<n;++a)if(o=i[a],o.charSpec.has(t))if(s.push(o),r=o.L.length,h=0,o.charSpec.isSymbol)for(;h<r;++h)e.next(o.L[h]);else for(;h<r;++h)e.append(o.L[h],t);return s}}class Di{constructor(t){this.text=t;const e=this.M=t.length,s=this.$=[];let i=0;for(;e>i;++i)s.push(new ji(t[i],!1,!1,!1))}eachChar(t){const e=this.M,s=this.$;let i=0;for(;e>i;++i)t(s[i])}}class Vi{constructor(t){this.text="PART",this.F=new ji(t,!0,!1,!0)}eachChar(t){t(this.F)}}class Fi{constructor(t){this.text=t,this.F=new ji(t,!1,!0,!1)}eachChar(t){t(this.F)}}class qi{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const _i=Ci("ISyntaxInterpreter",t=>t.singleton(zi));class zi{constructor(){this.O=new Ni(null),this.W=[this.O]}add(t){t=t.slice(0).sort((t,e)=>t.pattern>e.pattern?1:-1);const e=t.length;let s,i,n,r,o,a,h,l,c=0;for(;e>c;){for(s=this.O,i=t[c],n=i.pattern,r=new qi,o=this.N(i,r),a=o.length,h=t=>s=s.append(t,n),l=0;a>l;++l)o[l].eachChar(h);s.H=r,s._=!0,++c}}interpret(t){const e=new Li,s=t.length;let i,n=this.W,r=0;for(;r<s&&(n=this.j(n,t.charAt(r),e),0!==n.length);++r);return n=n.filter(Ki),n.length>0&&(n.sort(Ui),i=n[0],i.charSpec.isSymbol||e.next(i.C),e.pattern=i.C),e}j(t,e,s){const i=[];let n=null;const r=t.length;let o=0;for(;o<r;++o)n=t[o],i.push(...n.findMatches(e,s));return i}N(t,e){const s=[],i=t.pattern,n=i.length,r=t.symbols;let o=0,a=0,h="";for(;o<n;)h=i.charAt(o),0!==r.length&&r.includes(h)?o!==a?(s.push(new Di(i.slice(a,o))),++e.statics,a=o):(s.push(new Fi(i.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===h&&"PART"===i.slice(o,o+4)?(a=o+=4,s.push(new Vi(r)),++e.dynamics):++o;return a!==o&&(s.push(new Di(i.slice(a,o))),++e.statics),s}}function Ki(t){return t._}function Ui(t,e){const s=t.H,i=e.H;return s.statics!==i.statics?i.statics-s.statics:s.dynamics!==i.dynamics?i.dynamics-s.dynamics:s.symbols!==i.symbols?i.symbols-s.symbols:0}class Wi{constructor(t,e,s,i,n=null){this.rawName=t,this.rawValue=e,this.target=s,this.command=i,this.parts=n}}const Hi=Ci("IAttributePattern"),Gi=Ci("IAttributeParser",t=>t.singleton(Xi));class Xi{constructor(){this.U={},this.L={},this.q=!1,this.G=[],this.J=at(_i),this.c=at(Ct)}registerPattern(t,e){if(this.q)throw Bi(88);const s=this.L;for(const{pattern:i}of t){if(null!=s[i])throw Bi(89,i);s[i]={patternType:e}}this.G.push(...t)}K(){this.J.add(this.G);const t=this.c;for(const[,e]of Object.entries(this.L))e.pattern=t.get(e.patternType)}parse(t,e){this.q||(this.K(),this.q=!0);let s=this.U[t];null==s&&(s=this.U[t]=this.J.interpret(t));const i=s.pattern;return null==i?new Wi(t,e,t,null,null):this.L[i].pattern[i](t,e,s.parts)}}const Yi=Ti({name:z("attribute-pattern"),create:(t,e)=>({register(s){s.get(Gi).registerPattern(t,e),Ai(Hi,e).register(s)}})});class Qi{"PART.PART"(t,e,s){return new Wi(t,e,s[0],s[1])}"PART.PART.PART"(t,e,s){return new Wi(t,e,`${s[0]}.${s[1]}`,s[2])}}Qi[Symbol.metadata]={[X]:Yi.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],Qi)};class Ji{ref(t,e,s){return new Wi(t,e,"element","ref")}"PART.ref"(t,e,s){let i=s[0];return"view-model"===i&&(i="component"),new Wi(t,e,i,"ref")}}Ji[Symbol.metadata]={[X]:Yi.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],Ji)};class Zi{"PART.trigger:PART"(t,e,s){return new Wi(t,e,s[0],"trigger",s)}"PART.capture:PART"(t,e,s){return new Wi(t,e,s[0],"capture",s)}}Zi[Symbol.metadata]={[X]:Yi.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],Zi)};class tn{":PART"(t,e,s){return new Wi(t,e,s[0],"bind")}}tn[Symbol.metadata]={[X]:Yi.create([{pattern:":PART",symbols:":"}],tn)};class en{"@PART"(t,e,s){return new Wi(t,e,s[0],"trigger")}"@PART:PART"(t,e,s){return new Wi(t,e,s[0],"trigger",[s[0],"trigger",...s.slice(1)])}}en[Symbol.metadata]={[X]:Yi.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],en)};const sn=s.get,nn=s.define,rn="rg",on=Ti({hydrateElement:"ra",hydrateAttribute:"rb",hydrateTemplateController:"rc",hydrateLetElement:"rd",setProperty:"re",interpolation:"rf",propertyBinding:rn,letBinding:"ri",refBinding:"rj",iteratorBinding:"rk",multiAttr:"rl",textBinding:"ha",listenerBinding:"hb",attributeBinding:"hc",stylePropertyBinding:"hd",setAttribute:"he",setClassAttribute:"hf",setStyleAttribute:"hg",spreadTransferedBinding:"hs",spreadElementProp:"hp",spreadValueBinding:"svb"}),an=Ci("Instruction");class hn{constructor(t,e){this.from=t,this.to=e,this.type="rf"}}class ln{constructor(t,e,s){this.from=t,this.to=e,this.mode=s,this.type=rn}}class cn{constructor(t,e,s){this.forOf=t,this.to=e,this.props=s,this.type="rk"}}class un{constructor(t,e){this.from=t,this.to=e,this.type="rj"}}class dn{constructor(t,e){this.value=t,this.to=e,this.type="re"}}class fn{constructor(t,e,s){this.value=t,this.to=e,this.command=s,this.type="rl"}}class pn{constructor(t,e,s,i,n,r){this.res=t,this.props=e,this.projections=s,this.containerless=i,this.captures=n,this.data=r,this.type="ra"}}class gn{constructor(t,e,s){this.res=t,this.alias=e,this.props=s,this.type="rb"}}class mn{constructor(t,e,s,i){this.def=t,this.res=e,this.alias=s,this.props=i,this.type="rc"}}class vn{constructor(t,e){this.instructions=t,this.toBindingContext=e,this.type="rd"}}class bn{constructor(t,e){this.from=t,this.to=e,this.type="ri"}}class wn{constructor(t){this.from=t,this.type="ha"}}class yn{constructor(t,e,s,i){this.from=t,this.to=e,this.capture=s,this.modifier=i,this.type="hb"}}class kn{constructor(t,e){this.value=t,this.to=e,this.type="he"}}class $n{constructor(t){this.value=t,this.type="hf"}}class Cn{constructor(t){this.value=t,this.type="hg"}}class Tn{constructor(t,e,s){this.attr=t,this.from=e,this.to=s,this.type="hc"}}class xn{constructor(){this.type="hs"}}class An{constructor(t){this.instruction=t,this.type="hp"}}class Rn{constructor(t,e){this.target=t,this.from=e,this.type="svb"}}class Sn{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return g(t)?(s=t,i={name:s}):(s=t.name,i=t),new Sn(e,R(On(e,"name"),s),A(On(e,"aliases"),i.aliases,e.aliases),Pn(s))}register(t,e){const s=this.Type,i="string"==typeof e?Pn(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:Ai(s,s),xi(s,i),...n.map(t=>xi(s,Pn(t))))}}const En="binding-command",In=z(En),Pn=t=>`${In}:${t}`,On=(t,e)=>sn(K.annotation.keyFor(e),t),Mn=(()=>{const t="__au_static_resource__",e=(e,s,i)=>{let n=sn(t,e);return null==n&&e.$au?.type===s&&(n=i(e.$au,e),nn(n,e,t)),n};return Ti({name:In,keyFrom:Pn,define(t,e){const s=Sn.create(t,e),i=s.Type;return nn(s,i,In,_),i},getAnnotation:On,find(t,s){const i=t.find(En,s);return null==i?null:sn(In,i)??e(i,En,Sn.create)??null},get:(t,e)=>t.get(Vt(Pn(e)))})})();class Bn{get ignoreAttr(){return!1}build(t,e,s){let i=t.attr.target,n=t.attr.rawValue;return n=""===n?k(i):n,i=null==t.bindable?s.map(t.node,i)??k(i):t.bindable.name,new ln(e.parse(n,Ei),i,1)}}Bn.$au={type:En,name:"one-time"};class jn{get ignoreAttr(){return!1}build(t,e,s){let i=t.attr.target,n=t.attr.rawValue;return n=""===n?k(i):n,i=null==t.bindable?s.map(t.node,i)??k(i):t.bindable.name,new ln(e.parse(n,Ei),i,2)}}jn.$au={type:En,name:"to-view"};class Ln{get ignoreAttr(){return!1}build(t,e,s){const i=t.attr;let n=i.target,r=i.rawValue;return r=""===r?k(n):r,n=null==t.bindable?s.map(t.node,n)??k(n):t.bindable.name,new ln(e.parse(r,Ei),n,4)}}Ln.$au={type:En,name:"from-view"};class Nn{get ignoreAttr(){return!1}build(t,e,s){const i=t.attr;let n=i.target,r=i.rawValue;return r=""===r?k(n):r,n=null==t.bindable?s.map(t.node,n)??k(n):t.bindable.name,new ln(e.parse(r,Ei),n,6)}}Nn.$au={type:En,name:"two-way"};class Dn{get ignoreAttr(){return!1}build(t,e,s){const i=t.attr,n=t.bindable;let r,o,a=i.rawValue,h=i.target;return a=""===a?k(h):a,null==n?(o=s.isTwoWay(t.node,h)?6:2,h=s.map(t.node,h)??k(h)):(r=t.def.defaultBindingMode??0,o=0===n.mode||null==n.mode?null==r||0===r?2:r:n.mode,h=n.name),new ln(e.parse(a,Ei),h,g(o)?Pi[o]??0:o)}}Dn.$au={type:En,name:"bind"};class Vn{constructor(){this.X=at(Gi)}get ignoreAttr(){return!1}build(t,e){const s=null===t.bindable?k(t.attr.target):t.bindable.name,i=e.parse(t.attr.rawValue,"IsIterator");let n=It;if(i.semiIdx>-1){const e=t.attr.rawValue.slice(i.semiIdx+1),s=e.indexOf(":");if(s>-1){const t=e.slice(0,s).trim(),i=e.slice(s+1).trim(),r=this.X.parse(t,i);n=[new fn(i,r.target,r.command)]}}return new cn(i,s,n)}}Vn.$au={type:En,name:"for"};class Fn{get ignoreAttr(){return!0}build(t,e){return new yn(e.parse(t.attr.rawValue,Si),t.attr.target,!1,t.attr.parts?.[2]??null)}}Fn.$au={type:En,name:"trigger"};class qn{get ignoreAttr(){return!0}build(t,e){return new yn(e.parse(t.attr.rawValue,Si),t.attr.target,!0,t.attr.parts?.[2]??null)}}qn.$au={type:En,name:"capture"};class _n{get ignoreAttr(){return!0}build(t,e){const s=t.attr,i=s.target;let n=s.rawValue;return n=""===n?k(i):n,new Tn(i,e.parse(n,Ei),i)}}_n.$au={type:En,name:"attr"};class zn{get ignoreAttr(){return!0}build(t,e){return new Tn("style",e.parse(t.attr.rawValue,Ei),t.attr.target)}}zn.$au={type:En,name:"style"};class Kn{get ignoreAttr(){return!0}build(t,e){let s=t.attr.target;if(s.includes(",")){const t=s.split(",").filter(t=>t.length>0);if(0===t.length)throw Bi(723);s=t.join(" ")}return new Tn("class",e.parse(t.attr.rawValue,Ei),s)}}Kn.$au={type:En,name:"class"};class Un{get ignoreAttr(){return!0}build(t,e){return new un(e.parse(t.attr.rawValue,Ei),t.attr.target)}}Un.$au={type:En,name:"ref"};class Wn{get ignoreAttr(){return!1}build(t){return new Rn(t.attr.target,t.attr.rawValue)}}Wn.$au={type:En,name:"spread"},"function"==typeof SuppressedError&&SuppressedError;const Hn=Ci("ITemplateElementFactory",t=>t.singleton(Xn)),Gn={};class Xn{constructor(){this.p=at(Mt),this.Y=this.t()}t(){return this.p.document.createElement("template")}createTemplate(t){if(g(t)){let e=Gn[t];if(void 0===e){const s=this.Y;s.innerHTML=t;const i=s.content.firstElementChild;!function(t){if(null==t)return!0;if("TEMPLATE"!==t.nodeName)return!0;if(null!=t.nextElementSibling)return!0;const e=t.previousSibling;if(null!=e&&3===e.nodeType)return e.textContent.trim().length>0;const s=t.nextSibling;return null!=s&&3===s.nodeType&&s.textContent.trim().length>0}(i)?(s.content.removeChild(i),e=i):(this.Y=this.t(),e=s),Gn[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.t();return e.content.appendChild(t),e}return t.parentNode?.removeChild(t),t.cloneNode(!0)}}const Yn="au-start",Qn="au-end",Jn=(t,e,s)=>t.insertBefore(e,s),Zn=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},tr=(t,e)=>t.content.appendChild(e),er=(t,e)=>{const s=e.length;let i=0;for(;s>i;)t.content.appendChild(e[i]),++i},sr=t=>1===t.nodeType,ir=t=>3===t.nodeType,nr="au-slot",rr="default",or=(ar=0,()=>"anonymous-"+ ++ar);var ar;class hr{constructor(){this.debug=!1,this.resolveResources=!0}compile(t,e){if(null==t.template||!1===t.needsCompile)return t;const s=new ur(t,e,null,null,void 0),i=g(t.template)||!t.enhance?s.Z.createTemplate(t.template):t.template,n=i.nodeName===lr&&null!=i.content,r=n?i.content:i,o=Tr.findAll(e),a=o.length;let h=0;if(a>0)for(;a>h;)o[h].compiling?.(i),++h;if(i.hasAttribute(kr))throw Bi(701,t);return this.tt(r,s),this.et(r,s),{...t,name:t.name||or(),dependencies:(t.dependencies??It).concat(s.deps??It),instructions:s.rows,surrogates:n?this.nt(i,s):It,template:i,hasSlots:s.hasSlot,needsCompile:!1}}compileSpread(t,e,s,i,n){const r=new ur(t,s,null,null,void 0),o=[],a=n??r.it(i.nodeName.toLowerCase()),h=null!==a,l=r.ep,c=e.length;let u,d,f,p,g,m,v,b,w,y,$=0,C=null,T=null;for(;c>$;++$)if(u=e[$],w=u.target,y=u.rawValue,"...$attrs"!==w)if(T=r.rt(u),null!==T&&T.ignoreAttr)gr.node=i,gr.attr=u,gr.bindable=null,gr.def=null,o.push(T.build(gr,r.ep,r.m));else if(h&&(p=r.st(a),g=p.attrs[w],void 0!==g))null==T?(v=l.parse(y,Ri),o.push(new An(null==v?new dn(y,g.name):new hn(v,g.name)))):(gr.node=i,gr.attr=u,gr.bindable=g,gr.def=a,o.push(new An(T.build(gr,r.ep,r.m))));else if(C=r.lt(w),null===C)if(null==T)if(v=l.parse(y,Ri),null!=v)o.push(new hn(v,r.m.map(i,w)??k(w)));else switch(w){case"class":o.push(new $n(y));break;case"style":o.push(new Cn(y));break;default:o.push(new kn(y,w))}else gr.node=i,gr.attr=u,gr.bindable=null,gr.def=null,o.push(T.build(gr,r.ep,r.m));else{if(C.isTemplateController)throw Bi(9998,w);p=r.st(C),b=!1===C.noMultiBindings&&null===T&&dr(y),b?f=this.ot(i,y,C,r):(m=p.primary,null===T?(v=l.parse(y,Ri),f=[null===v?new dn(y,m.name):new hn(v,m.name)]):(gr.node=i,gr.attr=u,gr.bindable=m,gr.def=C,f=[T.build(gr,r.ep,r.m)])),(d??=[]).push(new gn(this.resolveResources?C:C.name,null!=C.aliases&&C.aliases.includes(w)?w:void 0,f))}else o.push(new xn);return fr(),null!=d?d.concat(o):o}nt(t,e){const s=[],i=t.attributes,n=e.ep;let r,o,a,h,l,c,u,d,f,p,g,m,v=i.length,b=0,w=null,y=null;for(;v>b;++b){if(r=i[b],o=r.name,a=r.value,h=e.X.parse(o,a),g=h.target,m=h.rawValue,mr[g])throw Bi(702,o);if(y=e.rt(h),null!==y&&y.ignoreAttr)gr.node=t,gr.attr=h,gr.bindable=null,gr.def=null,s.push(y.build(gr,e.ep,e.m));else if(w=e.lt(g),null===w)if(null===y)if(f=n.parse(m,Ri),null!=f)t.removeAttribute(o),--b,--v,s.push(new hn(f,e.m.map(t,g)??k(g)));else switch(o){case"class":s.push(new $n(m));break;case"style":s.push(new Cn(m));break;default:s.push(new kn(m,o))}else gr.node=t,gr.attr=h,gr.bindable=null,gr.def=null,s.push(y.build(gr,e.ep,e.m));else{if(w.isTemplateController)throw Bi(703,g);u=e.st(w),p=!1===w.noMultiBindings&&null===y&&dr(m),p?c=this.ot(t,m,w,e):(d=u.primary,null===y?(f=n.parse(m,Ri),c=null===f?""===m?[]:[new dn(m,d.name)]:[new hn(f,d.name)]):(gr.node=t,gr.attr=h,gr.bindable=d,gr.def=w,c=[y.build(gr,e.ep,e.m)])),t.removeAttribute(o),--b,--v,(l??=[]).push(new gn(this.resolveResources?w:w.name,null!=w.aliases&&w.aliases.includes(g)?g:void 0,c))}}return fr(),null!=l?l.concat(s):s}et(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.ut(t,e):this.ct(t,e);case 3:return this.ht(t,e);case 11:{let s=t.firstChild;for(;null!==s;)s=this.et(s,e);break}}return t.nextSibling}ut(t,e){const s=t.attributes,i=s.length,n=[],r=e.ep;let o,a,h,l,c,u,d,f,p=!1,g=0;for(;i>g;++g)if(o=s[g],h=o.name,l=o.value,"to-binding-context"!==h)if(a=e.X.parse(h,l),u=a.target,d=a.rawValue,c=e.rt(a),null===c)f=r.parse(d,Ri),n.push(new bn(null===f?new je(d):f,k(u)));else{if("bind"!==a.command)throw Bi(704,a);n.push(new bn(r.parse(d,Ei),k(u)))}else p=!0;return e.rows.push([new vn(n,p)]),this.dt(t,e).nextSibling}ct(t,e){const s=t.nextSibling,i=(t.getAttribute("as-element")??t.nodeName).toLowerCase(),n=e.it(i),r=null!==n,o=r&&null!=n.shadowOptions,a=n?.capture,h=null!=a&&"boolean"!=typeof a,l=a?[]:It,c=e.ep,u=this.debug?Ot:()=>{t.removeAttribute(p),--j,--B};let d,f,p,g,m,v,b,w,y,$,C,T,x,A,R,S,E,I,P,O,M=t.attributes,B=M.length,j=0,L=null,N=!1,D=null,V=!0,F=!1,q=!1,_=!1,z=0;if("slot"===i){if(null==e.root.def.shadowOptions)throw Bi(717,e.root.def.name);e.root.hasSlot=!0}for(r&&(P={},V=n.processContent?.call(n.Type,t,e.p,P),M=t.attributes,B=M.length);B>j;++j){switch(f=M[j],p=f.name,g=f.value,p){case"as-element":case"containerless":u(),F=F||"containerless"===p;continue}if(m=e.X.parse(p,g),D=e.rt(m),E=m.target,I=m.rawValue,a&&(!h||h&&a(E))){if(null!=D&&D.ignoreAttr){u(),l.push(m);continue}if(q=E!==nr&&"slot"!==E&&(-1===(z=E.indexOf("..."))||0===z&&"...$attrs"===E),q&&(R=e.st(n),null==R.attrs[E]&&!e.lt(E)?.isTemplateController)){u(),l.push(m);continue}}if("...$attrs"!==E)if(D?.ignoreAttr)gr.node=t,gr.attr=m,gr.bindable=null,gr.def=null,(v??=[]).push(D.build(gr,e.ep,e.m)),u();else{if(0===E.indexOf("...")){if(r&&"$element"!==(E=E.slice(3))){(b??=[]).push(new Rn("$bindables","$bindables"===E?I:E)),u();continue}throw Bi(720,E)}if(r){if(R=e.st(n),w=R.attrs[E],void 0!==w){null===D?(x=c.parse(I,Ri),(b??=[]).push(null==x?new dn(I,w.name):new hn(x,w.name))):(gr.node=t,gr.attr=m,gr.bindable=w,gr.def=n,(b??=[]).push(D.build(gr,e.ep,e.m))),u();continue}if("$bindables"===E){null!=D&&(gr.node=t,gr.attr=m,gr.bindable=null,gr.def=n,(b??=[]).push(D.build(gr,e.ep,e.m))),u();continue}}if("$bindables"===E)throw Bi(721,t.nodeName,E,I);L=e.lt(E),null===L?null!==D?(gr.node=t,gr.attr=m,gr.bindable=null,gr.def=null,(v??=[]).push(D.build(gr,e.ep,e.m)),u()):(x=c.parse(I,Ri),null!=x&&(u(),(v??=[]).push(new hn(x,e.m.map(t,E)??k(E))))):(R=e.st(L),N=!1===L.noMultiBindings&&null===D&&dr(I),N?$=this.ot(t,I,L,e):(S=R.primary,null===D?(x=c.parse(I,Ri),$=null===x?""===I?[]:[new dn(I,S.name)]:[new hn(x,S.name)]):(gr.node=t,gr.attr=m,gr.bindable=S,gr.def=L,$=[D.build(gr,e.ep,e.m)])),u(),L.isTemplateController?(C??=[]).push(new mn(pr,this.resolveResources?L:L.name,void 0,$)):(y??=[]).push(new gn(this.resolveResources?L:L.name,null!=L.aliases&&L.aliases.includes(E)?E:void 0,$)))}else(v??=[]).push(new xn),u()}if(fr(),this.ft(t,v)&&null!=v&&v.length>1&&this.gt(t,v),r&&(A=new pn(this.resolveResources?n:n.name,b??It,null,F,l,P)),null==v&&null==A&&null==y||(d=It.concat(A??It,y??It,v??It),_=!0),null!=C){let s;B=C.length-1,j=B,T=C[j],cr(t)?(s=e.t(),er(s,[e.wt(),e.bt(Yn),e.bt(Qn)])):(this.At(t,e),"TEMPLATE"===t.nodeName?s=t:(s=e.t(),tr(s,t)));const a=s,h=e.yt(null==d?[]:[d]);let l,c,u,f,p,g,m,v,b=!1,w=0,y=0,k=t.firstChild,$=!1;if(!1!==V)for(;null!==k;){if(c=sr(k)?k.getAttribute(nr):null,b=null!==c||r&&!o,l=k.nextSibling,b){if(!r)throw Bi(706,c,i);k.removeAttribute?.(nr),$=ir(k)&&""===k.textContent.trim(),$||((f??={})[c||rr]??=[]).push(k),t.removeChild(k)}k=l}if(null!=f){for(c in u={},f){for(s=e.t(),p=f[c],w=0,y=p.length;y>w;++w)g=p[w],"TEMPLATE"===g.nodeName?g.attributes.length>0?tr(s,g):tr(s,g.content):tr(s,g);v=e.yt(),this.et(s.content,v),u[c]={name:or(),type:Ii,template:s,instructions:v.rows,needsCompile:!1}}A.projections=u}if(_&&(r&&(F||n.containerless)?this.At(t,e):this.dt(t,e)),O=!r||!n.containerless&&!F&&!1!==V,O)if(t.nodeName===lr)this.et(t.content,h);else for(k=t.firstChild;null!==k;)k=this.et(k,h);for(T.def={name:or(),type:Ii,template:a,instructions:h.rows,needsCompile:!1};j-- >0;)T=C[j],s=e.t(),m=e.wt(),er(s,[m,e.bt(Yn),e.bt(Qn)]),T.def={name:or(),type:Ii,template:s,needsCompile:!1,instructions:[[C[j+1]]]};e.rows.push([T])}else{null!=d&&e.rows.push(d);let s,a,h,l,c,u,f,p=t.firstChild,g=!1,m=null,v=!1,b=0,w=0;if(!1!==V)for(;null!==p;){if(a=sr(p)?p.getAttribute(nr):null,g=null!==a||r&&!o,s=p.nextSibling,g){if(!r)throw Bi(706,a,i);p.removeAttribute?.(nr),v=ir(p)&&""===p.textContent.trim(),v||((h??={})[a||rr]??=[]).push(p),t.removeChild(p)}p=s}if(null!=h){for(a in m={},h){for(u=e.t(),l=h[a],b=0,w=l.length;w>b;++b)c=l[b],c.nodeName===lr?c.attributes.length>0?tr(u,c):tr(u,c.content):tr(u,c);f=e.yt(),this.et(u.content,f),m[a]={name:or(),type:Ii,template:u,instructions:f.rows,needsCompile:!1}}A.projections=m}if(_&&(r&&(F||n.containerless)?this.At(t,e):this.dt(t,e)),O=!r||!n.containerless&&!F&&!1!==V,O&&t.childNodes.length>0)for(p=t.firstChild;null!==p;)p=this.et(p,e)}return s}ht(t,e){const s=t.parentNode,i=e.ep.parse(t.textContent,Ri),n=t.nextSibling;let r,o,a,h,l;if(null!==i){for(({parts:r,expressions:o}=i),(l=r[0])&&Jn(s,e.It(l),t),a=0,h=o.length;h>a;++a)Zn(s,t,[e.wt(),e.It(" ")]),(l=r[a+1])&&Jn(s,e.It(l),t),e.rows.push([new wn(o[a])]);s.removeChild(t)}return n}ot(t,e,s,i){const n=i.st(s),r=e.length,o=[];let a,h,l,c,u,d,f=0,p=0;for(let g=0;g<r;++g)if(p=e.charCodeAt(g),92===p)++g;else if(58===p){for(a=e.slice(f,g);e.charCodeAt(++g)<=32;);for(f=g;g<r;++g)if(p=e.charCodeAt(g),92===p)++g;else if(59===p){h=e.slice(f,g);break}if(void 0===h&&(h=e.slice(f)),c=i.X.parse(a,h),u=i.rt(c),d=n.attrs[c.target],null==d)throw Bi(707,c.target,s.name);for(null===u?(l=i.ep.parse(h,Ri),o.push(null===l?new dn(h,d.name):new hn(l,d.name))):(gr.node=t,gr.attr=c,gr.bindable=d,gr.def=s,o.push(u.build(gr,i.ep,i.m)));g<r&&e.charCodeAt(++g)<=32;);f=g,a=void 0,h=void 0}return fr(),o}tt(t,e){const s=e.root.def.name,i=t,n=T(i.querySelectorAll("template[as-custom-element]")),r=n.length;if(0===r)return;if(r===i.childElementCount)throw Bi(708,s);const o=new Set,a=[];for(const t of n){if(t.parentNode!==i)throw Bi(709,s);const e=$r(s,t,o),n=t.content,r=T(n.querySelectorAll("bindable")),h=new Set,l=new Set,c=r.reduce((t,s)=>{if(s.parentNode!==n)throw Bi(710,e);const i=s.getAttribute("name");if(null===i)throw Bi(711,s,e);const r=s.getAttribute("attribute");if(null!==r&&l.has(r)||h.has(i))throw Bi(712,h,r);null!==r&&l.add(r),h.add(i);const o=T(s.attributes).filter(t=>!yr.includes(t.name));return o.length,s.remove(),t[i]={name:i,attribute:r??void 0,mode:s.getAttribute("mode")??"default"},t},{});class u{}u.$au={type:Ii,name:e,template:t,bindables:c},Reflect.defineProperty(u,"name",{value:$(e)}),a.push(u),i.removeChild(t)}const h=(e.root.def.dependencies??[]).concat(null==e.root.def.Type?It:[e.root.def.Type]);for(const t of a)t.dependencies=h.concat(a.filter(e=>e!==t)),e.St(t)}ft(t,e){const s=t.nodeName;return"INPUT"===s&&1===vr[t.type]||"SELECT"===s&&(t.hasAttribute("multiple")||e?.some(t=>t.type===rn&&"multiple"===t.to))}gt(t,e){switch(t.nodeName){case"INPUT":{const t=e;let s,i,n,r=0;for(let e=0;e<t.length&&r<3;e++)switch(n=t[e],n.to){case"model":case"value":case"matcher":s=e,r++;break;case"checked":i=e,r++}void 0!==i&&void 0!==s&&i<s&&([t[s],t[i]]=[t[i],t[s]]);break}case"SELECT":{const t=e;let s,i=0,n=0,r=0;for(let e=0;e<t.length&&r<2;++e){switch(s=t[e],s.to){case"multiple":n=e,r++;break;case"value":i=e,r++}2===r&&i<n&&([t[n],t[i]]=[t[i],t[n]])}}}}dt(t,e){return Jn(t.parentNode,e.bt("au*"),t),t}At(t,e){if(cr(t))return t;const s=t.parentNode,i=e.wt();return Zn(s,t,[i,e.bt(Yn),e.bt(Qn)]),s.removeChild(t),i}}hr.register=V(Oi);const lr="TEMPLATE",cr=t=>"au*"===t.nodeValue;class ur{constructor(t,e,s,i,n){this.hasSlot=!1,this.deps=null;const r=null!==s;if(this.c=e,this.root=null===i?this:i,this.def=t,this.parent=s,this.Bt=r?s.Bt:e.get(br),this.Pt=r?s.Pt:e.get(wr),this.Z=r?s.Z:e.get(Hn),this.X=r?s.X:e.get(Gi),this.ep=r?s.ep:e.get(Je),this.m=r?s.m:e.get(Mi),this.Ct=r?s.Ct:e.get(Wt),"number"!=typeof(this.p=r?s.p:e.get(Mt)).document?.nodeType)throw Bi(722);this.localEls=r?s.localEls:new Set,this.rows=n??[]}St(t){return(this.root.deps??=[]).push(t),this.root.c.register(t),this}It(t){return this.p.document.createTextNode(t)}bt(t){return this.p.document.createComment(t)}wt(){return this.bt("au*")}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}t(){return this.h("template")}it(t){return this.Bt.el(this.c,t)}lt(t){return this.Bt.attr(this.c,t)}st(t){return this.Bt.bindables(t)}yt(t){return new ur(this.def,this.c,this,this.root,t)}rt(t){const e=t.command;return null===e?null:this.Pt.get(this.c,e)}}const dr=t=>{const e=t.length;let s=0,i=0;for(;e>i;){if(s=t.charCodeAt(i),92===s)++i;else{if(58===s)return!0;if(36===s&&123===t.charCodeAt(i+1))return!1}++i}return!1},fr=()=>{gr.node=gr.attr=gr.bindable=gr.def=null},pr={name:"unnamed",type:Ii},gr={node:null,attr:null,bindable:null,def:null},mr={id:!0,name:!0,"au-slot":!0,"as-element":!0},vr={checkbox:1,radio:1},br=Ci("IResourceResolver"),wr=Ci("IBindingCommandResolver",t=>t.singleton(class{constructor(){this.U=new WeakMap}get(t,e){let s=this.U.get(t);return s||this.U.set(t,s={}),e in s?s[e]:s[e]=Mn.get(t,e)}})),yr=Ti(["name","attribute","mode"]),kr="as-custom-element",$r=(t,e,s)=>{const i=e.getAttribute(kr);if(null===i||""===i)throw Bi(715,t);if(s.has(i))throw Bi(716,i,t);return s.add(i),e.removeAttribute(kr),i},Cr=Ci("ITemplateCompilerHooks"),Tr=Ti({name:z("compiler-hooks"),define:t=>({register(e){Ai(Cr,t).register(e)}}),findAll:t=>t.get(qt(Cr))}),xr=Object.prototype.hasOwnProperty,Ar=Reflect.defineProperty;function Rr(t,e,s){return Ar(t,e,{configurable:!0,writable:!0,value:s}),s}function Sr(t,e,s){e in t||Rr(t,e,s)}const Er=Object.assign,Ir=Object.freeze,Pr=String,Or=$t.createInterface,Mr=s.get,Br=s.define,jr=(t,...e)=>new Error(`AUR${Pr(t).padStart(4,"0")}:${e.map(Pr)}`);class Lr{constructor(t,e,s,i){this.parent=t,this.bindingContext=e,this.overrideContext=s,this.isBoundary=i}static getContext(t,e,s){if(null==t)throw jr(203);let i=t.overrideContext,n=t;if(s>0){for(;s>0;)if(s--,n=n.parent,null==n)return;return i=n.overrideContext,e in i?i:n.bindingContext}for(;null!=n&&!n.isBoundary&&!(e in n.overrideContext)&&!(e in n.bindingContext);)n=n.parent;return null==n?t.bindingContext:(i=n.overrideContext,e in i?i:n.bindingContext)}static create(t,e,s){if(null==t)throw jr(204);return new Lr(null,t,e??new Dr,s??!1)}static fromParent(t,e,s=new Dr){if(null==t)throw jr(203);return new Lr(t,e,s,!1)}}class Nr{constructor(t,e){void 0!==t&&(this[t]=e)}}class Dr{}const{astAssign:Vr,astEvaluate:Fr,astBind:qr,astUnbind:_r}=(()=>{const t="AccessScope",e="AccessMember",s="AccessKeyed",i="Assign",n="ValueConverter",r="BindingBehavior",o="ForOfStatement",a="ArrayDestructuring",h="ObjectDestructuring",c="DestructuringAssignmentLeaf",u="Custom",d=Lr.getContext;function g(b,w,y,k){switch(b.$kind){case"AccessThis":{let t=w.overrideContext,e=w,s=b.ancestor;for(;s--&&t;)e=e.parent,t=e?.overrideContext??null;return s<1&&e?e.bindingContext:void 0}case"AccessBoundary":{let t=w;for(;null!=t&&!t.isBoundary;)t=t.parent;return t?t.bindingContext:void 0}case t:{const t=d(w,b.name,b.ancestor);null!==k&&k.observe(t,b.name);const e=t[b.name];if(null==e){if("$host"===b.name)throw jr(105);return e}return y?.boundFn&&p(e)?e.bind(t):e}case"AccessGlobal":return globalThis[b.name];case"CallGlobal":{const t=globalThis[b.name];if(p(t))return t(...b.args.map(t=>g(t,w,y,k)));if(!y?.strict&&null==t)return;throw jr(107)}case"ArrayLiteral":return b.elements.map(t=>g(t,w,y,k));case"ObjectLiteral":{const t={};for(let e=0;e<b.keys.length;++e)t[b.keys[e]]=g(b.values[e],w,y,k);return t}case"PrimitiveLiteral":return b.value;case"New":{const t=g(b.func,w,y,k);if(p(t))return new t(...b.args.map(t=>g(t,w,y,k)));throw jr(107)}case"Template":{let t=b.cooked[0];for(let e=0;e<b.expressions.length;++e)t+=Pr(g(b.expressions[e],w,y,k)),t+=b.cooked[e+1];return t}case"Unary":{const t=g(b.expression,w,y,k);switch(b.operation){case"void":return;case"typeof":return typeof t;case"!":return!t;case"-":return-t;case"+":return+t;case"--":if(null!=k)throw jr(113);return m(b.expression,w,y,k,t-1)+b.pos;case"++":if(null!=k)throw jr(113);return m(b.expression,w,y,k,t+1)-b.pos;default:throw jr(109,b.operation)}}case"CallScope":{const t=d(w,b.name,b.ancestor);if(null==t){if(y?.strict)throw jr(114,b.name,t);return}const e=t[b.name];if(p(e))return e.apply(t,b.args.map(t=>g(t,w,y,k)));if(null==e){if(y?.strict&&!b.optional)throw jr(111,b.name);return}throw jr(111,b.name)}case"CallMember":{const t=g(b.object,w,y,k);if(null==t&&y?.strict&&!b.optionalMember)throw jr(114,b.name,t);const e=t?.[b.name];if(null==e){if(!b.optionalCall&&y?.strict)throw jr(111,b.name);return}if(!p(e))throw jr(111,b.name);const s=e.apply(t,b.args.map(t=>g(t,w,y,k)));return l(t)&&v.includes(b.name)&&k?.observeCollection(t),s}case"CallFunction":{const t=g(b.func,w,y,k);if(p(t))return t(...b.args.map(t=>g(t,w,y,k)));if(null==t){if(!b.optional&&y?.strict)throw jr(107);return}throw jr(107)}case"ArrowFunction":{const t=(...t)=>{const e=b.args,s=b.rest,i=e.length-1,n=e.reduce((e,n,r)=>(e[n.name]=s&&r===i?t.slice(r):t[r],e),{}),r=Lr.fromParent(w,n);return g(b.body,r,y,k)};return t}case e:{const t=g(b.object,w,y,k);if(null==t){if(!b.optional&&y?.strict)throw jr(114,b.name,t);return}null===k||b.accessGlobal||k.observe(t,b.name);const e=t[b.name];return y?.boundFn&&p(e)?e.bind(t):e}case s:{const t=g(b.object,w,y,k),e=g(b.key,w,y,k);if(null==t){if(!b.optional&&y?.strict)throw jr(115,e,t);return}return null===k||b.accessGlobal||k.observe(t,e),t[e]}case"TaggedTemplate":{const t=b.expressions.map(t=>g(t,w,y,k)),e=g(b.func,w,y,k);if(!p(e))throw jr(110);return e(b.cooked,...t)}case"Binary":{const t=b.left,e=b.right;switch(b.operation){case"&&":return g(t,w,y,k)&&g(e,w,y,k);case"||":return g(t,w,y,k)||g(e,w,y,k);case"??":return g(t,w,y,k)??g(e,w,y,k);case"==":return g(t,w,y,k)==g(e,w,y,k);case"===":return g(t,w,y,k)===g(e,w,y,k);case"!=":return g(t,w,y,k)!=g(e,w,y,k);case"!==":return g(t,w,y,k)!==g(e,w,y,k);case"instanceof":{const s=g(e,w,y,k);return!!p(s)&&g(t,w,y,k)instanceof s}case"in":{const s=g(e,w,y,k);return!!f(s)&&g(t,w,y,k)in s}case"+":return g(t,w,y,k)+g(e,w,y,k);case"-":return g(t,w,y,k)-g(e,w,y,k);case"*":return g(t,w,y,k)*g(e,w,y,k);case"/":return g(t,w,y,k)/g(e,w,y,k);case"%":return g(t,w,y,k)%g(e,w,y,k);case"**":return g(t,w,y,k)**g(e,w,y,k);case"<":return g(t,w,y,k)<g(e,w,y,k);case">":return g(t,w,y,k)>g(e,w,y,k);case"<=":return g(t,w,y,k)<=g(e,w,y,k);case">=":return g(t,w,y,k)>=g(e,w,y,k);default:throw jr(108,b.operation)}}case"Conditional":return g(b.condition,w,y,k)?g(b.yes,w,y,k):g(b.no,w,y,k);case i:{let t=g(b.value,w,y,k);if("="!==b.op){if(null!=k)throw jr(113);const e=g(b.target,w,y,k);switch(b.op){case"/=":t=e/t;break;case"*=":t*=e;break;case"+=":t=e+t;break;case"-=":t=e-t;break;default:throw jr(108,b.op)}}return m(b.target,w,y,k,t)}case n:return y?.useConverter?.(b.name,"toView",g(b.expression,w,y,k),b.args.map(t=>g(t,w,y,k)));case r:return g(b.expression,w,y,k);case"BindingIdentifier":return b.name;case o:return g(b.iterable,w,y,k);case"Interpolation":if(b.isMulti){let t=b.parts[0],e=0;for(;e<b.expressions.length;++e)t+=Pr(g(b.expressions[e],w,y,k)),t+=b.parts[e+1];return t}return`${b.parts[0]}${g(b.firstExpression,w,y,k)}${b.parts[1]}`;case c:return g(b.target,w,y,k);case a:return b.list.map(t=>g(t,w,y,k));case"ArrayBindingPattern":case"ObjectBindingPattern":case h:default:return;case u:return b.evaluate(w,y,k)}}function m(o,p,v,b,y){switch(o.$kind){case t:if("$host"===o.name)throw jr(106);return d(p,o.name,o.ancestor)[o.name]=y;case e:{const t=g(o.object,p,v,b);if(null==t){if(v?.strict)throw jr(116,o.name);m(o.object,p,v,b,{[o.name]:y})}else f(t)&&("length"===o.name&&l(t)&&!isNaN(y)?t.splice(y):t[o.name]=y);return y}case s:{const t=g(o.object,p,v,b),e=g(o.key,p,v,b);if(null==t){if(v?.strict)throw jr(116,e);return m(o.object,p,v,b,{[e]:y}),y}if(l(t)){if("length"===e&&!isNaN(y))return t.splice(y),y;if(w(e))return t.splice(e,1,y),y}return t[e]=y}case i:return m(o.value,p,v,b,y),m(o.target,p,v,b,y);case n:return y=v?.useConverter?.(o.name,"fromView",y,o.args.map(t=>g(t,p,v,b))),m(o.expression,p,v,b,y);case r:return m(o.expression,p,v,b,y);case a:case h:{const t=o.list,e=t.length;let s,i;for(s=0;s<e;s++)switch(i=t[s],i.$kind){case c:m(i,p,v,b,y);break;case a:case h:{if("object"!=typeof y||null===y)throw jr(112);let t=g(i.source,Lr.create(y),v,null);void 0===t&&i.initializer&&(t=g(i.initializer,p,v,null)),m(i,p,v,b,t);break}}break}case c:if(o instanceof We){if(null==y)return;if("object"!=typeof y)throw jr(112);let t=g(o.source,Lr.create(y),v,b);void 0===t&&o.initializer&&(t=g(o.initializer,p,v,b)),m(o.target,p,v,b,t)}else{if(null==y)return;if("object"!=typeof y)throw jr(112);const t=o.indexOrProperties;let e;if(w(t)){if(!Array.isArray(y))throw jr(112);e=y.slice(t)}else e=Object.entries(y).reduce((e,[s,i])=>(t.includes(s)||(e[s]=i),e),{});m(o.target,p,v,b,e)}break;case u:return o.assign(p,v,y);default:return}}const v="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:g,astAssign:m,astBind:function t(e,s,i){switch(e.$kind){case r:i.bindBehavior?.(e.name,s,e.args.map(t=>g(t,s,i,null))),t(e.expression,s,i);break;case n:i.bindConverter?.(e.name),t(e.expression,s,i);break;case o:t(e.iterable,s,i);break;case u:e.bind?.(s,i)}},astUnbind:function t(e,s,i){switch(e.$kind){case r:i.unbindBehavior?.(e.name,s),t(e.expression,s,i);break;case n:i.unbindConverter?.(e.name),t(e.expression,s,i);break;case o:t(e.iterable,s,i);break;case u:e.unbind?.(s,i)}}}})(),zr=t=>{const e=t.prototype;["bindBehavior","unbindBehavior","bindConverter","unbindConverter","useConverter"].forEach(t=>{Rr(e,t,()=>{throw jr(99,t)})})},Kr="pending",Ur="completed",Wr="canceled",Hr=Promise.resolve();let Gr=!1,Xr=!1;const Yr=[],Qr=[];let Jr=0,Zr=null,to=[],eo=null,so=null;const io=()=>{Gr||(Gr=!0,Hr.then(()=>{Gr=!1,Xr=!0,ro()}))},no=t=>{if(Zr&&0===Yr.length&&0===Jr)if(Zr=null,to.length>0){const t=to;to=[],1===t.length?so(t[0]):so(new AggregateError(t,"One or more tasks failed."))}else eo(t)},ro=()=>{const t=!Xr;Xr=!1,Zr??=new Promise((t,e)=>{eo=t,so=e});let e=-Yr.length;const s=0===Yr.length;for(;Yr.length>0;){if(++e>1e4){const t=new Error("Potential deadlock detected. More than 10000 extra tasks were queued from within tasks.");throw Yr.length=0,so?.(t),Zr=null,t}const s=Yr.shift();if("function"==typeof s)try{s()}catch(t){to.push(t)}else s.run()}const i=to.slice();if(no(!s),t&&i.length>0)throw 1===i.length?i[0]:new AggregateError(i,"One or more tasks failed.")},oo=t=>{io(),Yr.push(t)},ao=(t,e)=>{const s=new lo(t,e?.delay);return null!=s.delay&&s.delay>0?(++Jr,s.t=setTimeout(()=>{--Jr,s.t=void 0,s.status!==Wr?(Yr.push(s),io()):no(!0)},s.delay)):(Yr.push(s),io()),s};class ho extends Error{constructor(t){super(`Task ${t.id} was canceled.`),this.task=t}}class lo{get result(){return this.i}get status(){return this.u}constructor(t,e){this.callback=t,this.delay=e,this.id=++lo.h,this.u=Kr,this.i=new Promise((t,e)=>{this.C=t,this.A=e})}run(){if(this.u!==Kr)throw new Error(`Cannot run task in ${this.u} state`);let t;this.u="running";try{t=this.callback()}catch(t){return this.u=Wr,this.A(t),void to.push(t)}t instanceof Promise?(++Jr,t.then(t=>{this.u=Ur,this.C(t)}).catch(t=>{this.u=Wr,this.A(t),to.push(t)}).finally(()=>{--Jr,no(!0)})):(this.u=Ur,this.C(t))}cancel(){if(void 0!==this.t){clearTimeout(this.t),--Jr,this.t=void 0,this.u=Wr;const t=new ho(this);return this.A(t),this.i.catch(Ot),no(!0),!0}if(this.u===Kr){const t=Yr.indexOf(this);if(t>-1){Yr.splice(t,1),this.u=Wr;const e=new ho(this);return this.A(e),this.i.catch(Ot),no(!0),!0}}return!1}}lo.h=0;class co{constructor(t,e){this.cb=t,this.P=e,this.id=++co.R,this.I=!1,this._=[]}run(){try{this.cb()}catch(t){return void to.push(t)}}O(){this.I||(this.t=setTimeout(()=>{this.M(),this.I||this.O()},this.P))}M(){Yr.push(this),io();const t=this._.splice(0);for(const e of t)e()}next(){return this.I?Promise.resolve():new Promise(t=>this._.push(t))}cancel(){this.I=!0,void 0!==this.t&&(clearTimeout(this.t),this.t=void 0);const t=Qr.indexOf(this);t>-1&&Qr.splice(t,1);const e=this._.splice(0);for(const t of e)t()}}co.R=0;const uo=$t.createInterface("ICoercionConfiguration"),fo=Ir({None:0,Observer:1,Node:2,Layout:4});function po(t=0){const e=Array(t);let s=0;for(;s<t;)e[s]=s++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}new Map;const go=(()=>{function t(){return Rr(this,"subs",new r)}function e(t){return this.subs.add(t)}function s(t){return this.subs.remove(t)}const i=new WeakSet;function n(n,r){if(!i.has(n)){i.add(n);const r=n.prototype;Ar(r,"subs",{get:t}),Sr(r,"subscribe",e),Sr(r,"unsubscribe",s)}return n}class r{constructor(){this.count=0,this.T=[],this.L=[],this.N=!1}add(t){return!this.T.includes(t)&&(this.T[this.T.length]=t,"handleDirty"in t&&(this.L[this.L.length]=t,this.N=!0),++this.count,!0)}remove(t){let e=this.T.indexOf(t);return-1!==e&&(this.T.splice(e,1),e=this.L.indexOf(t),-1!==e&&(this.L.splice(e,1),this.N=this.L.length>0),--this.count,!0)}notify(t,e){for(const s of this.T.slice(0))s.handleChange(t,e)}notifyCollection(t,e){const s=this.T.slice(0),i=s.length;let n=0;for(;n<i;++n)s[n].handleCollectionChange(t,e)}notifyDirty(){if(this.N)for(const t of this.L.slice(0))t.handleDirty()}}return function(t,e){return null==t?n:n(t)}})();class mo{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t){t!==this.v&&(Number.isNaN(t)||(this.o.splice(t),this.v=this.o.length))}handleDirty(){this.v!==this.o.length&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.v,i=this.o.length;(this.v=i)!==s&&(this.subs.notifyDirty(),this.subs.notify(this.v,s))}}bo(mo);class vo{constructor(t){this.owner=t,this.type=1,this.v=(this.o=t.collection).size}getValue(){return this.o.size}setValue(){throw jr(220)}handleDirty(){this.v!==this.o.size&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.v,i=this.o.size;(this.v=i)!==s&&this.subs.notify(this.v,s)}}function bo(t){const e=t.prototype;return Sr(e,"subscribe",wo),Sr(e,"unsubscribe",yo),go(t,null)}function wo(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function yo(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}bo(vo);const ko=(()=>{const t=Symbol.for("__au_arr_obs__"),e=Array[t]??Rr(Array,t,new WeakMap);function s(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function i(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function n(t,e,s,i,n){let r,o,a,h,l,c,u;for(c=s+1;c<i;c++){for(r=t[c],o=e[c],u=c-1;u>=s&&(a=t[u],h=e[u],l=n(a,r),l>0);u--)t[u+1]=a,e[u+1]=h;t[u+1]=r,e[u+1]=o}}function r(t,e,s,i,o){let a,h,l,c,u,d,f,p,g,m,v,b,w,y,k,$,C,T,x,A=0,R=0;for(;;){if(i-s<=10)return void n(t,e,s,i,o);A=s+(i-s>>1),a=t[s],c=e[s],h=t[i-1],u=e[i-1],l=t[A],d=e[A],f=o(a,h),f>0&&(m=a,v=c,a=h,c=u,h=m,u=v),p=o(a,l),p>=0?(m=a,v=c,a=l,c=d,l=h,d=u,h=m,u=v):(g=o(h,l),g>0&&(m=h,v=u,h=l,u=d,l=m,d=v)),t[s]=a,e[s]=c,t[i-1]=l,e[i-1]=d,b=h,w=u,y=s+1,k=i-1,t[A]=t[y],e[A]=e[y],t[y]=b,e[y]=w;t:for(R=y+1;R<k;R++)if($=t[R],C=e[R],T=o($,b),T<0)t[R]=t[y],e[R]=e[y],t[y]=$,e[y]=C,y++;else if(T>0){do{if(k--,k==R)break t;x=t[k],T=o(x,b)}while(T>0);t[R]=t[k],e[R]=e[k],t[k]=$,e[k]=C,T<0&&($=t[R],C=e[R],t[R]=t[y],e[R]=e[y],t[y]=$,e[y]=C,y++)}i-k<y-s?(r(t,e,k,i,o),i=y):(r(t,e,s,y,o),s=k)}}const o=Array.prototype,a=["push","unshift","pop","shift","splice","reverse","sort"];let h,l=!1;const c="__au_arr_on__";function u(){if(void 0===h&&function(){const t=o.push,n=o.unshift,l=o.pop,c=o.shift,u=o.splice,d=o.reverse,f=o.sort;h={push:function(...s){const i=e.get(this);if(void 0===i)return t.apply(this,s);const n=this.length,r=s.length;if(0===r)return n;this.length=i.indexMap.length=n+r;let o=n;for(;o<this.length;)this[o]=s[o-n],i.indexMap[o]=-2,o++;return i.notify(),this.length},unshift:function(...t){const s=e.get(this);if(void 0===s)return n.apply(this,t);const i=t.length,r=new Array(i);let o=0;for(;o<i;)r[o++]=-2;n.apply(s.indexMap,r);const a=n.apply(this,t);return s.notify(),a},pop:function(){const t=e.get(this);if(void 0===t)return l.call(this);const s=t.indexMap,i=l.call(this),n=s.length-1;return s[n]>-1&&(s.deletedIndices.push(s[n]),s.deletedItems.push(i)),l.call(s),t.notify(),i},shift:function(){const t=e.get(this);if(void 0===t)return c.call(this);const s=t.indexMap,i=c.call(this);return s[0]>-1&&(s.deletedIndices.push(s[0]),s.deletedItems.push(i)),c.call(s),t.notify(),i},splice:function(...t){const s=t[0],i=t[1],n=e.get(this);if(void 0===n)return u.apply(this,t);const r=this.length,o=0|s,a=o<0?Math.max(r+o,0):Math.min(o,r),h=n.indexMap,l=t.length,c=0===l?0:1===l?r-a:i;let d=a;if(c>0){const t=d+c;for(;d<t;)h[d]>-1&&(h.deletedIndices.push(h[d]),h.deletedItems.push(this[d])),d++}if(d=0,l>2){const t=l-2,e=new Array(t);for(;d<t;)e[d++]=-2;u.call(h,s,i,...e)}else u.apply(h,t);const f=u.apply(this,t);return(c>0||d>0)&&n.notify(),f},reverse:function(){const t=e.get(this);if(void 0===t)return d.call(this),this;const s=this.length,i=s/2|0;let n=0;for(;n!==i;){const e=s-n-1,i=this[n],r=t.indexMap[n],o=this[e],a=t.indexMap[e];this[n]=o,t.indexMap[n]=a,this[e]=i,t.indexMap[e]=r,n++}return t.notify(),this},sort:function(t){const n=e.get(this);if(void 0===n)return f.call(this,t),this;let o=this.length;if(o<2)return this;r(this,n.indexMap,0,o,i);let a=0;for(;a<o&&void 0!==this[a];)a++;void 0!==t&&p(t)||(t=s),r(this,n.indexMap,0,a,t);let h=!1;for(a=0,o=n.indexMap.length;o>a;++a)if(n.indexMap[a]!==a){h=!0;break}return h&&n.notify(),this}};for(const t of a)Ar(h[t],"observing",{value:!0})}(),!Mr(c,Array)){Br(!0,Array,c);for(const t of a)!0!==o[t].observing&&Rr(o,t,h[t])}}class d{constructor(t){this.type=1,l||(l=!0,u()),this.indexObservers={},this.collection=t,this.indexMap=po(t.length),this.lenObs=void 0,e.set(t,this)}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.length;this.indexMap=po(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new mo(this)}getIndexObserver(t){return this.indexObservers[t]??=new f(this,t)}}go(d,null);class f{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t){if(t===this.getValue())return;const e=this.owner,s=this.index,i=e.indexMap;i[s]>-1&&i.deletedIndices.push(i[s]),i[s]=-2,e.collection[s]=t,e.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(t,e){const s=this.index;if(e[s]===s)return;const i=this.value,n=this.value=this.getValue();i!==n&&this.subs.notify(n,i)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}return go(f,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new d(t)),u()),s}})(),$o=(()=>{const t=Symbol.for("__au_set_obs__"),e=Set[t]??Rr(Set,t,new WeakMap),{add:s,clear:i,delete:n}=Set.prototype,r=["add","clear","delete"],o={add:function(t){const i=e.get(this);if(void 0===i)return s.call(this,t),this;const n=this.size;return s.call(this,t),this.size===n||(i.indexMap[n]=-2,i.notify()),this},clear:function(){const t=e.get(this);if(void 0===t)return i.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;i.call(this),e.length=0,t.notify()}},delete:function(t){const s=e.get(this);if(void 0===s)return n.call(this,t);if(0===this.size)return!1;let i=0;const r=s.indexMap;for(const e of this.keys()){if(e===t){r[i]>-1&&(r.deletedIndices.push(r[i]),r.deletedItems.push(e)),r.splice(i,1);const o=n.call(this,t);return!0===o&&s.notify(),o}i++}return!1}};class a{constructor(t){this.type=1,this.collection=t,this.indexMap=po(t.size),this.lenObs=void 0}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=po(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new vo(this)}}return go(a,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new a(t)),function(t){for(const e of r)Rr(t,e,o[e])}(t)),s}})(),Co=(()=>{const t=Symbol.for("__au_map_obs__"),e=Map[t]??Rr(Map,t,new WeakMap),{set:s,clear:i,delete:n}=Map.prototype,r=["set","clear","delete"],o={set:function(t,i){const n=e.get(this);if(void 0===n)return s.call(this,t,i),this;const r=this.get(t),o=this.size;if(s.call(this,t,i),this.size===o){let e=0;for(const s of this.entries()){if(s[0]===t)return s[1]!==r&&(n.indexMap.deletedIndices.push(n.indexMap[e]),n.indexMap.deletedItems.push(s),n.indexMap[e]=-2,n.notify()),this;e++}return this}return n.indexMap[o]=-2,n.notify(),this},clear:function(){const t=e.get(this);if(void 0===t)return i.call(this);if(this.size>0){const e=t.indexMap;let s=0;for(const t of this.keys())e[s]>-1&&(e.deletedIndices.push(e[s]),e.deletedItems.push(t)),s++;i.call(this),e.length=0,t.notify()}},delete:function(t){const s=e.get(this);if(void 0===s)return n.call(this,t);if(0===this.size)return!1;let i=0;const r=s.indexMap;for(const e of this.keys()){if(e===t){r[i]>-1&&(r.deletedIndices.push(r[i]),r.deletedItems.push(e)),r.splice(i,1);const o=n.call(this,t);return!0===o&&s.notify(),o}++i}return!1}};class a{constructor(t){this.type=1,this.collection=t,this.indexMap=po(t.size),this.lenObs=void 0}notify(){const t=this.subs;t.notifyDirty();const e=this.indexMap;const s=this.collection,i=s.size;this.indexMap=po(i),t.notifyCollection(s,e)}getLengthObserver(){return this.lenObs??=new vo(this)}}return go(a,null),function(t){let s=e.get(t);return void 0===s&&(e.set(t,s=new a(t)),function(t){for(const e of r)Rr(t,e,o[e])}(t)),s}})(),To=(()=>{class t{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}add(t){this.o.has(t)||(t.subscribe(this.b),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(s,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(t,e){e.unsubscribe(this.b)}function s(t,e){this.version!==t&&(e.unsubscribe(this.b),this.o.delete(e))}function i(){return Rr(this,"obs",new t(this))}function n(t,e){this.obs.add(this.oL.getObserver(t,e))}function r(t){let e;if(l(t))e=ko(t);else if(c(t))e=$o(t);else{if(!u(t))throw jr(210,t);e=Co(t)}this.obs.add(e)}function o(t){this.obs.add(t)}function a(){throw jr(99,"handleChange")}function h(){throw jr(99,"handleCollectionChange")}return function(t,e){const s=t.prototype;return Sr(s,"observe",n),Sr(s,"observeCollection",r),Sr(s,"subscribeTo",o),Ar(s,"obs",{get:i}),Sr(s,"handleChange",a),Sr(s,"handleCollectionChange",h),t}})();function xo(t,e){return null==t?To:To(t,e)}let Ao=null;const Ro=[];let So=!1;function Eo(){return Ao}function Io(t){if(null==t)throw jr(206);if(null==Ao)return Ao=t,Ro[0]=Ao,void(So=!0);if(Ao===t)throw jr(207);Ro.push(t),Ao=t,So=!0}function Po(t){if(null==t)throw jr(208);if(Ao!==t)throw jr(209);Ro.pop(),Ao=Ro.length>0?Ro[Ro.length-1]:null,So=null!=Ao}const Oo=Ir({get current(){return Ao},get connecting(){return So},enter:Io,exit:Po,pause:function(){So=!1},resume:function(){So=!0}}),Mo=Reflect.get,Bo=Object.prototype.toString,jo=new WeakMap;function Lo(t){switch(Bo.call(t)){case"[object Object]":return!0!==t.constructor.__au_nw__;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const No="__raw__";function Do(t){return Lo(t)?Vo(t):t}function Vo(t){return jo.get(t)??function(t){const e=l(t)?Ko:u(t)||c(t)?fa:zo,s=new Proxy(t,e);return jo.set(t,s),jo.set(s,s),s}(t)}function Fo(t){return t[No]??t}function qo(t){return Lo(t)&&t[No]||t}function _o(t,e){if("constructor"===e||"__proto__"===e||"$observers"===e||e===Symbol.toPrimitive||e===Symbol.toStringTag||!0===t.constructor[`__au_nw_${Pr(e)}__`])return!0;const s=Reflect.getOwnPropertyDescriptor(t,e);return!1===s?.configurable&&!1===s.writable}const zo={get(t,e,s){if(e===No)return t;const i=Eo();return!So||_o(t,e)||null==i?Mo(t,e,s):(i.observe(t,e),Do(Mo(t,e,s)))},deleteProperty:(t,e)=>delete t[e]},Ko={get(t,e,s){if(e===No)return t;if(!So||_o(t,e)||null==Ao)return Mo(t,e,s);switch(e){case"length":return Ao.observe(t,"length"),t.length;case"map":return Uo;case"includes":return Go;case"indexOf":return Xo;case"lastIndexOf":return Yo;case"every":return Wo;case"filter":return Ho;case"find":return Jo;case"findIndex":return Qo;case"flat":return Zo;case"flatMap":return ta;case"join":return ea;case"push":return ia;case"pop":return sa;case"reduce":return ua;case"reduceRight":return da;case"reverse":return aa;case"shift":return na;case"unshift":return ra;case"slice":return ca;case"splice":return oa;case"some":return ha;case"sort":return la;case"keys":return ka;case"values":case Symbol.iterator:return $a;case"entries":return Ca}return Ao.observe(t,e),Do(Mo(t,e,s))},ownKeys:t=>(Eo()?.observe(t,"length"),Reflect.ownKeys(t))};function Uo(t,e){const s=Fo(this),i=s.map((s,i)=>qo(t.call(e,Do(s),i,this)));return Ta(Ao,s),Do(i)}function Wo(t,e){const s=Fo(this),i=s.every((s,i)=>t.call(e,Do(s),i,this));return Ta(Ao,s),i}function Ho(t,e){const s=Fo(this),i=s.filter((s,i)=>qo(t.call(e,Do(s),i,this)));return Ta(Ao,s),Do(i)}function Go(t){const e=Fo(this),s=e.includes(qo(t));return Ta(Ao,e),s}function Xo(t){const e=Fo(this),s=e.indexOf(qo(t));return Ta(Ao,e),s}function Yo(t){const e=Fo(this),s=e.lastIndexOf(qo(t));return Ta(Ao,e),s}function Qo(t,e){const s=Fo(this),i=s.findIndex((s,i)=>qo(t.call(e,Do(s),i,this)));return Ta(Ao,s),i}function Jo(t,e){const s=Fo(this),i=s.find((e,s)=>t(Do(e),s,this),e);return Ta(Ao,s),Do(i)}function Zo(){const t=Fo(this);return Ta(Ao,t),Do(t.flat())}function ta(t,e){const s=Fo(this);return Ta(Ao,s),Vo(s.flatMap((s,i)=>Do(t.call(e,Do(s),i,this))))}function ea(t){const e=Fo(this);return Ta(Ao,e),e.join(t)}function sa(){return Do(Fo(this).pop())}function ia(...t){return Fo(this).push(...t)}function na(){return Do(Fo(this).shift())}function ra(...t){return Fo(this).unshift(...t)}function oa(...t){return Do(Fo(this).splice(...t))}function aa(...t){return Do(Fo(this).reverse())}function ha(t,e){const s=Fo(this),i=s.some((s,i)=>qo(t.call(e,Do(s),i,this)));return Ta(Ao,s),i}function la(t){const e=Fo(this),s=e.sort(t);return Ta(Ao,e),Do(s)}function ca(t,e){const s=Fo(this);return Ta(Ao,s),Vo(s.slice(t,e))}function ua(t,e){const s=Fo(this),i=s.reduce((e,s,i)=>t(e,Do(s),i,this),e);return Ta(Ao,s),Do(i)}function da(t,e){const s=Fo(this),i=s.reduceRight((e,s,i)=>t(e,Do(s),i,this),e);return Ta(Ao,s),Do(i)}const fa={get(t,e,s){if(e===No)return t;const i=Eo();if(!So||_o(t,e)||null==i)return Mo(t,e,s);switch(e){case"size":return i.observe(t,"size"),t.size;case"clear":return wa;case"delete":return ya;case"forEach":return pa;case"add":if(c(t))return ba;break;case"get":if(u(t))return ma;break;case"set":if(u(t))return va;break;case"has":return ga;case"keys":return ka;case"values":return $a;case"entries":return Ca;case Symbol.iterator:return u(t)?Ca:$a}return Do(Mo(t,e,s))}};function pa(t,e){const s=Fo(this);return Ta(Ao,s),s.forEach((s,i)=>{t.call(e,Do(s),Do(i),this)})}function ga(t){const e=Fo(this);return Ta(Ao,e),e.has(qo(t))}function ma(t){const e=Fo(this);return Ta(Ao,e),Do(e.get(qo(t)))}function va(t,e){return Do(Fo(this).set(qo(t),qo(e)))}function ba(t){return Do(Fo(this).add(qo(t)))}function wa(){return Do(Fo(this).clear())}function ya(t){return Do(Fo(this).delete(qo(t)))}function ka(){const t=Fo(this);Ta(Ao,t);const e=t.keys();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Do(s),done:i}},[Symbol.iterator](){return this}}}function $a(){const t=Fo(this);Ta(Ao,t);const e=t.values();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:Do(s),done:i}},[Symbol.iterator](){return this}}}function Ca(){const t=Fo(this);Ta(Ao,t);const e=t.entries();return{next(){const t=e.next(),s=t.value,i=t.done;return i?{value:void 0,done:i}:{value:[Do(s[0]),Do(s[1])],done:i}},[Symbol.iterator](){return this}}}const Ta=(t,e)=>t?.observeCollection(e),xa=Ir({getProxy:Vo,getRaw:Fo,wrap:Do,unwrap:qo,rawKey:No});class Aa{constructor(t,e,s,i,n="async"){this.type=1,this.ov=void 0,this.v=void 0,this.V=!1,this.B=!1,this.D=!1,this.cb=void 0,this.j=void 0,this.F=void 0,this.o=t,this.H=Do(t),this.$get=e,this.$set=s,this.oL=i,this.$=n}init(t){this.v=t,this.D=!1}getValue(){return 0===this.subs.count?this.$get.call(this.o,this.o,this):(this.D&&(this.compute(),this.D=!1,this.V=!1),this.v)}setValue(t){if(!p(this.$set))throw jr(221);void 0!==this.j&&(t=this.j.call(null,t,this.F)),v(t,this.v)||(this.$set.call(this.o,t),this.run())}useCoercer(t,e){return this.j=t,this.F=e,!0}useCallback(t){return this.cb=t,!0}handleDirty(){this.D||(this.D=!0,this.subs.notifyDirty())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.compute(),this.D=!1,this.V=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll(),this.ov=void 0,this.V=!0)}run(){"sync"!==this.$?this.B||(this.B=!0,oo(()=>{this.B=!1,this.U()})):this.U()}U(){const t=this.v,e=this.ov,s=this.compute();this.D=!1,this.V&&v(s,t)||(this.cb?.(s,e),this.subs.notify(s,e),this.ov=this.v=s,this.V=!0)}compute(){this.obs.version++;try{return Io(this),this.v=qo(this.$get.call(this.H,this.H,this))}finally{this.obs.clear(),Po(this)}}}xo(Aa,null),go(Aa,null),"function"==typeof SuppressedError&&SuppressedError;const Ra=(()=>{const t=new WeakMap,e=t=>(t=>"symbol"==typeof t)(t)?t:String(t);return{get:(s,i)=>t.get(s)?.get(e(i)),W:(s,i)=>t.get(s)?.get(e(i))?.flush,set:(s,i,n)=>{t.has(s)||t.set(s,new Map),t.get(s).set(e(i),n)}}})(),Sa=Or("IDirtyChecker",void 0),Ea={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class Ia{constructor(t,e,s){this.obj=e,this.key=s,this.type=0,this.ov=void 0,this.G=t}getValue(){return this.obj[this.key]}setValue(t){throw jr(219,this.key)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.G.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.G.removeProperty(this)}}class Pa{get doNotCache(){return!0}constructor(t,e){this.type=0,this.o=t,this.k=e}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class Oa{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,s){e[s]=t}}class Ma{constructor(t,e){this.type=1,this.v=void 0,this.iO=!1,this.cb=void 0,this.j=void 0,this.F=void 0,this.o=t,this.k=e}getValue(){return this.v}setValue(t){void 0!==this.j&&(t=this.j.call(void 0,t,this.F));const e=this.v;if(this.iO){if(v(t,this.v))return;this.v=t,this.subs.notifyDirty(),this.subs.notify(t,e),v(t,this.v)&&this.cb?.(t,e)}else this.v=this.o[this.k]=t,this.cb?.(t,e)}useCallback(t){return this.cb=t,this.start(),!0}useCoercer(t,e){return this.j=t,this.F=e,this.start(),!0}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],Ar(this.o,this.k,{enumerable:!0,configurable:!0,get:Er(()=>this.getValue(),{getObserver:()=>this}),set:t=>{this.setValue(t)}})),this}stop(){return this.iO&&(Ar(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}go(Ma,null);const Ba=new Oa,ja=Or("IObserverLocator",t=>t.singleton(Va)),La=Or("INodeObserverLocator",t=>t.cachedCallback(t=>new Na));class Na{handles(){return!1}getObserver(){return Ba}getAccessor(){return Ba}}const Da=Or("IComputedObserverLocator",t=>t.singleton(class{getObserver(t,e,s,i){const n=new Aa(t,s.get,s.set,i,Ra.W(t,e));return Ar(t,e,{enumerable:s.enumerable,configurable:!0,get:Er(()=>n.getValue(),{getObserver:()=>n}),set:t=>{n.setValue(t)}}),n}}));class Va{constructor(){this.J=[],this.G=at(Sa),this.X=at(La),this.Y=at(Da)}addAdapter(t){this.J.push(t)}getObserver(t,e){if(null==t)throw jr(199,e);if(!d(t))return new Pa(t,p(e)?"":e);if(p(e))return new Aa(t,e,void 0,this);const s=za(t);let i=s[e];return void 0===i&&(i=this.createObserver(t,e),i.doNotCache||(s[e]=i)),i}getAccessor(t,e){const s=t.$observers?.[e];return void 0!==s?s:this.X.handles(t,e,this)?this.X.getAccessor(t,e,this):Ba}getArrayObserver(t){return ko(t)}getMapObserver(t){return Co(t)}getSetObserver(t){return $o(t)}createObserver(t,e){if(this.X.handles(t,e,this))return this.X.getObserver(t,e,this);switch(e){case"length":if(l(t))return ko(t).getLengthObserver();break;case"size":if(u(t))return Co(t).getLengthObserver();if(c(t))return $o(t).getLengthObserver();break;default:if(l(t)&&w(e))return ko(t).getIndexObserver(Number(e))}let s=_a(t,e);if(void 0===s){let i=qa(t);for(;null!==i&&(s=_a(i,e),void 0===s);)i=qa(i)}if(void 0!==s&&!xr.call(s,"value")){let i=this.Z(t,e,s);return null==i&&(i=(s.get?.getObserver)?.(t)),null==i?s.configurable?this.Y.getObserver(t,e,s,this):this.G.createProperty(t,e):i}return new Ma(t,e)}Z(t,e,s){if(this.J.length>0)for(const i of this.J){const n=i.getObserver(t,e,s,this);if(null!=n)return n}return null}}const Fa=t=>{let e;return l(t)?e=ko(t):u(t)?e=Co(t):c(t)&&(e=$o(t)),e},qa=Object.getPrototypeOf,_a=Object.getOwnPropertyDescriptor,za=t=>{let e=t.$observers;return void 0===e&&Ar(t,"$observers",{value:e=m()}),e};xo(class{constructor(t,e){this.oL=t,this.fn=e,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1,this.et=void 0,this.run=()=>{if(this.stopped)throw jr(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{this.et?.call(void 0),Io(this),this.et=this.fn(this)}finally{this.obs.clear(),this.running=!1,Po(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,jr(226);this.run()}else this.runCount=0}},this.stop=()=>{this.et?.call(void 0),this.et=void 0,this.stopped=!0,this.obs.clearAll()}}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}},null);class Ka{constructor(t,e,s,i){this.oL=e,this.v=void 0,this.boundFn=!1,this.s=t,this.ast=s,this.cb=i}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.obs.version++;const t=this.v,e=Fr(this.ast,this.s,this,this);this.obs.clear(),v(e,t)||(this.v=e,this.cb.call(void 0,e,t))}stop(){this.obs.clearAll(),this.v=void 0}}xo(Ka,null),zr(Ka);const Ua="pending",Wa="running",Ha="completed",Ga="canceled",Xa=new Map,Ya=t=>()=>{throw uh(`AUR1005:${t}`)};class Qa{constructor(t,e={}){this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(s=>{this[s]=s in e?e[s]:t[s]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(s=>{this[s]=s in e?e[s]:t[s]?.bind(t)??Ya(s)}),this.performanceNow="performanceNow"in e?e.performanceNow:t.performance?.now?.bind(t.performance)??Ya("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new Ja(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let s=Xa.get(t);return void 0===s&&Xa.set(t,s=new Qa(t,e)),s}static set(t,e){Xa.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class Ja{get isEmpty(){return 0===this.t&&0===this.i.length&&0===this.h.length&&0===this.u.length}get T(){return 0===this.t&&this.i.every(hh)&&this.h.every(hh)&&this.u.every(hh)}constructor(t,e,s){this.platform=t,this.$request=e,this.$cancel=s,this.$=void 0,this.t=0,this.i=[],this.h=[],this.u=[],this.R=!1,this.A=void 0,this.M=0,this.P=0,this.U=()=>{this.R||(this.R=!0,this.M=this.q(),this.$request())},this.q=t.performanceNow,this.I=new sh(t.console)}flush(t=this.q()){if(this.R=!1,this.P=t,void 0===this.$){let e,s;if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0)for(let s=0;s<this.u.length;++s)e=this.u[s],e.queueTime<=t&&(this.i.push(e),this.u.splice(s--,1));for(;this.i.length>0;)if((s=this.i.shift()).run(),s.status===Wa){if(!0===s.suspend)return this.$=s,void this.U();++this.t}if(this.h.length>0&&(this.i.push(...this.h),this.h.length=0),this.u.length>0)for(let s=0;s<this.u.length;++s)e=this.u[s],e.queueTime<=t&&(this.i.push(e),this.u.splice(s--,1));if((this.i.length>0||this.u.length>0||this.t>0)&&this.U(),void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}}else this.U()}cancel(){this.R&&(this.$cancel(),this.R=!1)}async yield(){this.isEmpty||(void 0===this.A&&(this.A=ah()),await this.A)}queueTask(t,e){const{delay:s,preempt:i,persistent:n,suspend:r}={...ih,...e};if(i){if(s>0)throw lh();if(n)throw ch()}0===this.i.length&&this.U();const o=this.q(),a=new eh(this.I,this,o,o+s,i,n,r,t);return i?this.i[this.i.length]=a:0===s?this.h[this.h.length]=a:this.u[this.u.length]=a,a}remove(t){let e=this.i.indexOf(t);if(e>-1)this.i.splice(e,1);else if(e=this.h.indexOf(t),e>-1)this.h.splice(e,1);else{if(e=this.u.indexOf(t),!(e>-1))throw uh(`Task #${t.id} could not be found`);this.u.splice(e,1)}}_(t){t.reset(this.q()),t.createdTime===t.queueTime?this.h[this.h.length]=t:this.u[this.u.length]=t}C(t){if(!0===t.suspend){if(this.$!==t)throw uh(`Async task completion mismatch: suspenderTask=${this.$?.id}, task=${t.id}`);this.$=void 0}else--this.t;if(void 0!==this.A&&this.T){const t=this.A;this.A=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class Za extends Error{constructor(t){super("Task was canceled."),this.task=t}}let th=0;class eh{get result(){const t=this.N;if(void 0===t)switch(this.j){case Ua:{const t=this.N=ah();return this.F=t.resolve,this.O=t.reject,t}case Wa:throw uh("Trying to await task from within task will cause a deadlock.");case Ha:return this.N=Promise.resolve();case Ga:return this.N=Promise.reject(new Za(this))}return t}get status(){return this.j}constructor(t,e,s,i,n,r,o,a){this.taskQueue=e,this.createdTime=s,this.queueTime=i,this.preempt=n,this.persistent=r,this.suspend=o,this.callback=a,this.id=++th,this.F=void 0,this.O=void 0,this.N=void 0,this.j=Ua,this.I=t}run(t=this.taskQueue.platform.performanceNow()){if(this.j!==Ua)throw uh(`Cannot run task in ${this.j} state`);const{persistent:e,taskQueue:s,callback:i,F:n,O:r,createdTime:o}=this;let a;this.j=Wa;try{a=i(t-o),a instanceof Promise?a.then(t=>{this.persistent?s._(this):(this.j=e?Ga:Ha,this.dispose()),s.C(this),void 0!==n&&n(t)}).catch(t=>{if(this.persistent||this.dispose(),s.C(this),void 0===r)throw t;r(t)}):(this.persistent?s._(this):(this.j=e?Ga:Ha,this.dispose()),void 0!==n&&n(a))}catch(t){if(this.persistent||this.dispose(),void 0===r)throw t;r(t)}}cancel(){if(this.j===Ua){const t=this.taskQueue,e=this.O;return t.remove(this),t.isEmpty&&t.cancel(),this.j=Ga,this.dispose(),void 0!==e&&e(new Za(this)),!0}return!(this.j!==Wa||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.j=Ua,this.F=void 0,this.O=void 0,this.N=void 0}dispose(){this.callback=void 0,this.F=void 0,this.O=void 0,this.N=void 0}}class sh{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,s){if(e instanceof Ja){const i=`processing=${e.i.length} pending=${e.h.length} delayed=${e.u.length} flushReq=${e.R} susTask=${!!e.$}`;this.console.log(`${t}[Q.${s}] ${i}`)}else{const i=e.id,n=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.persistent,h=e.suspend,l=`id=${i} created=${n} queue=${r} preempt=${o} persistent=${a} status=${e.j} suspend=${h}`;this.console.log(`${t}[T.${s}] ${l}`)}}}const ih={delay:0,preempt:!1,persistent:!1,suspend:!1};let nh,rh;const oh=(t,e)=>{nh=t,rh=e},ah=()=>{const t=new Promise(oh);return t.resolve=nh,t.reject=rh,t},hh=t=>t.persistent,lh=()=>uh("AUR1006"),ch=()=>uh("AUR1007"),uh=t=>new Error(t);class dh extends Qa{static getOrCreate(t,e={}){let s=dh.t.get(t);return void 0===s&&dh.t.set(t,s=new dh(t,e)),s}static set(t,e){dh.t.set(t,e)}get domWriteQueue(){return this.domQueue}get domReadQueue(){return this.domQueue}constructor(t,e={}){super(t,e),"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(s=>this[s]=s in e?e[s]:t[s]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(s=>this[s]=s in e?e[s]:t[s]?.bind(t)??(t=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)})(s)),this.domQueue=(()=>{let t=!1,e=-1;const s=()=>{e=-1,!0===t&&(t=!1,i.flush())},i=new Ja(this,()=>{t=!0,-1===e&&(e=this.requestAnimationFrame(s))},()=>{t=!1,e>-1&&(this.cancelAnimationFrame(e),e=-1)});return i})()}}dh.t=new WeakMap,"function"==typeof SuppressedError&&SuppressedError;const{default:fh,oneTime:ph,toView:gh,fromView:mh,twoWay:vh}=Pi,bh=s.get,wh=s.has,yh=s.define,{annotation:kh}=K,$h=kh.keyFor,Ch=Object,Th=String,xh=Ch.prototype,Ah=xh.hasOwnProperty,Rh=Ch.freeze,Sh=Ch.assign,Eh=Ch.getOwnPropertyNames,Ih=Ch.keys,Ph=m(),Oh=(t,e,s)=>{if(!0===Ph[e])return!0;if(!g(e))return!1;const i=e.slice(0,5);return Ph[e]="aria-"===i||"data-"===i||s.isStandardSvgAttribute(t,e)},Mh=t=>{throw t},Bh=Reflect.defineProperty,jh=(t,e,s)=>(Bh(t,e,{enumerable:!1,configurable:!0,writable:!0,value:s}),s),Lh=(t,e,s)=>t.addSignalListener(e,s),Nh=(t,e,s)=>t.removeSignalListener(e,s),Dh="IsProperty",Vh="pending",Fh="running",qh=fo.Observer,_h=fo.Node,zh=fo.Layout,Kh=(t,...e)=>{const s=Th(t).padStart(4,"0");return new Error(`AUR${s}:${e.map(Th)}`)};function Uh(t,e){let s;function i(t,e){let i;switch(e.kind){case"getter":case"field":{const t=e.name;if("string"!=typeof t)throw Kh(227);i=t;break}case"class":if(null==s)throw Kh(228);if("string"==typeof s)i=s;else{const t=s.name;if(!t)throw Kh(229);if("string"!=typeof t)throw Kh(227);i=t}}const n=null==s||"string"==typeof s?{name:i}:s;(e.metadata[Wh]??=m())[i]=Gh.create(i,n)}return arguments.length>1?(s={},void i(0,e)):g(t)?(s=t,i):(s=void 0===t?{}:t,i)}const Wh=$h("bindables"),Hh=Rh({name:Wh,keyFrom:t=>`${Wh}:${t}`,from(...t){const e={},s=Array.isArray;function i(t,s){e[t]=s instanceof Gh?s:Gh.create(t,!0===s?{}:s)}return t.forEach(function(t){s(t)?t.forEach(t=>g(t)?function(t){e[t]=Gh.create(t)}(t):i(t.name,t)):t instanceof Gh?e[t.name]=t:void 0!==t&&Ih(t).forEach(e=>i(e,t[e]))}),e},getAll(t){const e=[],s=S(t);let i,n=s.length;for(;--n>=0;){i=s[n];const t=bh(Wh,i);null!=t&&e.push(...Object.values(t))}return e},i(t,e){let s=bh(Wh,e);null==s&&yh(s=m(),e,Wh),s[t.name]=t}});class Gh{constructor(t,e,s,i,n,r){this.attribute=t,this.callback=e,this.mode=s,this.primary=i,this.name=n,this.set=r}static create(t,e={}){const s=e.mode??gh;return new Gh(e.attribute??C(t),e.callback??`${t}Changed`,g(s)?Pi[s]??fh:s,e.primary??!1,e.name??t,e.set??function(t={}){const e=t.type??null;if(null==e)return Ot;let s;switch(e){case Number:case Boolean:case String:case BigInt:s=e;break;default:{const t=e.coerce;s="function"==typeof t?t.bind(e):Xh.for(e)??Ot;break}}return s===Ot?s:function(t,e){return function(s,i){return i?.enableCoercion?(e??!i?.coerceNullish)&&null==s?s:t(s,i):s}}(s,t.nullable)}(e))}}const Xh={key:$h("coercer"),define(t,e){yh(t[e].bind(t),t,Xh.key)},for:t=>bh(Xh.key,t)},Yh=$t.createInterface,Qh=D.singleton,Jh=D.aliasTo,Zh=D.instance,tl=(t,e,s)=>t.registerResolver(e,s),el=(t,e,s,i="__au_static_resource__")=>{let n=bh(i,t);return null==n&&t.$au?.type===e&&(n=s(t.$au,t),yh(n,t,i)),n};class sl{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return g(t)?(s=t,i={name:s}):(s=t.name,i=t),new sl(e,R(rl(e,"name"),s),A(rl(e,"aliases"),i.aliases,e.aliases),al.keyFrom(s))}register(t,e){const s=this.Type,i="string"==typeof e?ol(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:Qh(s,s),Jh(s,i),...n.map(t=>Jh(s,ol(t))))}}const il="binding-behavior",nl=z(il),rl=(t,e)=>bh($h(e),t),ol=t=>`${nl}:${t}`,al=Rh({name:nl,keyFrom:ol,isType:t=>p(t)&&(wh(nl,t)||t.$au?.type===il),define(t,e){const s=sl.create(t,e),i=s.Type;return yh(s,i,nl,_),i},getDefinition(t){const e=bh(nl,t)??el(t,il,sl.create);if(void 0===e)throw Kh(151,t);return e},find(t,e){const s=t.find(il,e);return null==s?null:bh(nl,s)??el(s,il,sl.create)??null},get:(t,e)=>t.get(Vt(ol(e)))}),hl=new Map,ll=t=>({type:il,name:t});class cl{bind(t,e){hl.set(e,e.mode),e.mode=this.mode}unbind(t,e){e.mode=hl.get(e),hl.delete(e)}}class ul extends cl{get mode(){return ph}}ul.$au=ll("oneTime");class dl extends cl{get mode(){return gh}}dl.$au=ll("toView");class fl extends cl{get mode(){return mh}}fl.$au=ll("fromView");class pl extends cl{get mode(){return vh}}pl.$au=ll("twoWay");const gl=new WeakMap;class ml{constructor(){this.p=at(Mt)}bind(t,e,s,i){const n={type:"debounce",delay:s??200,now:this.p.performanceNow,queue:this.p.taskQueue,signals:g(i)?[i]:i??It},r=e.limit?.(n);null==r||gl.set(e,r)}unbind(t,e){gl.get(e)?.dispose(),gl.delete(e)}}ml.$au={type:il,name:"debounce"};const vl=Yh("ISignaler",t=>t.singleton(bl));class bl{constructor(){this.signals=m()}dispatchSignal(t){const e=this.signals[t];if(void 0===e)return;let s;for(s of e.keys())s.handleChange(void 0,void 0)}addSignalListener(t,e){(this.signals[t]??=new Set).add(e)}removeSignalListener(t,e){this.signals[t]?.delete(e)}}class wl{constructor(){this.h=new Map,this.u=at(vl)}bind(t,e,...s){if(!("handleChange"in e))throw Kh(817);if(0===s.length)throw Kh(818);let i;for(i of(this.h.set(e,s),s))Lh(this.u,i,e)}unbind(t,e){const s=this.h.get(e);let i;for(i of(this.h.delete(e),s))Nh(this.u,i,e)}}wl.$au={type:il,name:"signal"};const yl=new WeakMap;class kl{constructor(){({performanceNow:this.C,taskQueue:this.B}=at(Mt))}bind(t,e,s,i){const n={type:"throttle",delay:s??200,now:this.C,queue:this.B,signals:g(i)?[i]:i??It},r=e.limit?.(n);null==r||yl.set(e,r)}unbind(t,e){yl.get(e)?.dispose(),yl.delete(e)}}kl.$au={type:il,name:"throttle"};const $l=Yh("IAppTask");class Cl{constructor(t,e,s){this.c=void 0,this.slot=t,this.k=e,this.cb=s}register(t){return this.c=t.register(Zh($l,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}function Tl(t){return function(e,s){return p(s)?new Cl(t,e,s):new Cl(t,null,e)}}Rh({creating:Tl("creating"),hydrating:Tl("hydrating"),hydrated:Tl("hydrated"),activating:Tl("activating"),activated:Tl("activated"),deactivating:Tl("deactivating"),deactivated:Tl("deactivated")});const xl=Mt;class Al{}const Rl=(()=>{const t=new WeakMap;let e=!1;return new class{get hideProp(){return e}set hideProp(t){e=t}get(e,s){return t.get(e)?.[s]??null}set(s,i,n){const r=t.get(s)??(t.set(s,new Al),t.get(s));if(i in r)throw new Error(`Node already associated with a controller, remove the ref "${i}" first before associating with another controller`);return e||(s.$au??=r),r[i]=n}}})(),Sl=Yh("INode"),El=(()=>{const t=new WeakMap;return Rh({add(e,s){let i=t.get(e);null==i&&t.set(e,i=[]),i.push(s)},getDefinitions:e=>t.get(e)??It})})();function Il(t){return function(e,s){return s.addInitializer(function(){Nl(t,this)}),e}}class Pl{get type(){return"custom-attribute"}constructor(t,e,s,i,n,r,o,a,h,l,c){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=h,this.dependencies=l,this.containerStrategy=c}static create(t,e){let s,i;g(t)?(s=t,i={name:s}):(s=t.name,i=t);const n=R(jl(e,"defaultBindingMode"),i.defaultBindingMode,e.defaultBindingMode,gh);for(const t of Object.values(Hh.from(i.bindables)))Hh.i(t,e);return new Pl(e,R(jl(e,"name"),s),A(jl(e,"aliases"),i.aliases,e.aliases),Bl(s),g(n)?Pi[n]??fh:n,R(jl(e,"isTemplateController"),i.isTemplateController,e.isTemplateController,!1),Hh.from(...Hh.getAll(e),jl(e,"bindables"),e.bindables,i.bindables),R(jl(e,"noMultiBindings"),i.noMultiBindings,e.noMultiBindings,!1),A(El.getDefinitions(e),e.watches),A(jl(e,"dependencies"),i.dependencies,e.dependencies),R(jl(e,"containerStrategy"),i.containerStrategy,e.containerStrategy,"reuse"))}register(t,e){const s=this.Type,i="string"==typeof e?Bl(e):this.key,n=this.aliases;t.has(i,!1)?Pl.warnDuplicate&&t.get(Wt).warn(Kh(154,this.name)):t.register(t.has(s,!1)?null:Qh(s,s),Jh(s,i),...n.map(t=>Jh(s,Bl(t))))}toString(){return`au:ca:${this.name}`}}Pl.warnDuplicate=!0;const Ol="custom-attribute",Ml=z(Ol),Bl=t=>`${Ml}:${t}`,jl=(t,e)=>bh($h(e),t),Ll=(t,e)=>Rl.get(t,Bl(e))??void 0,Nl=(t,e)=>{const s=Pl.create(t,e),i=s.Type;return yh(s,i,Ml,_),i},Dl=t=>{const e=bh(Ml,t)??el(t,Ol,Pl.create);if(void 0===e)throw Kh(759,t);return e},Vl=Rh({name:Ml,keyFrom:Bl,isType:t=>p(t)&&(wh(Ml,t)||t.$au?.type===Ol),for:Ll,closest:(t,e)=>{let s="",i="";if(g(e))s=Bl(e),i=e;else{const t=Dl(e);s=t.key,i=t.name}let n=t;for(;null!==n;){const t=Rl.get(n,s);if(t?.is(i))return t;n=$d(n)}return null},define:Nl,getDefinition:Dl,annotate(t,e,s){yh(s,t,$h(e))},getAnnotation:jl,find(t,e){const s=t.find(Ol,e);return null===s?null:bh(Ml,s)??el(s,Ol,Pl.create)??null}}),Fl=Yh("ILifecycleHooks");class ql{constructor(t,e){this.definition=t,this.instance=e}}class _l{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const s=new Set;let i=e.prototype;for(;i!==xh;){for(const t of Eh(i))"constructor"===t||t.startsWith("_")||s.add(t);i=Object.getPrototypeOf(i)}return new _l(e,s)}}const zl=(()=>{const t=new WeakMap,e=new WeakMap;return Rh({define(t,s){const i=_l.create(t,s),n=i.Type;return e.set(n,i),{register(t){Qh(Fl,n).register(t)}}},resolve(s){let i=t.get(s);if(void 0===i){t.set(s,i=new Kl);const n=s.root,r=n===s?s.getAll(Fl):s.has(Fl,!1)?n.getAll(Fl).concat(s.getAll(Fl)):n.getAll(Fl);let o,a,h,l,c;for(o of r)for(l of(a=e.get(o.constructor),h=new ql(a,o),a.propertyNames))c=i[l],void 0===c?i[l]=[h]:c.push(h)}return i}})})();class Kl{}class Ul{constructor(t,e,s,i){this.Type=t,this.name=e,this.aliases=s,this.key=i}static create(t,e){let s,i;return g(t)?(s=t,i={name:s}):(s=t.name,i=t),new Ul(e,R(Gl(e,"name"),s),A(Gl(e,"aliases"),i.aliases,e.aliases),Yl.keyFrom(s))}register(t,e){const s=this.Type,i="string"==typeof e?Xl(e):this.key,n=this.aliases;t.has(i,!1)||t.register(t.has(s,!1)?null:Qh(s,s),Jh(s,i),...n.map(t=>Jh(s,Xl(t))))}}const Wl="value-converter",Hl=z(Wl),Gl=(t,e)=>bh($h(e),t),Xl=t=>`${Hl}:${t}`,Yl=Rh({name:Hl,keyFrom:Xl,isType:t=>p(t)&&(wh(Hl,t)||t.$au?.type===Wl),define(t,e){const s=Ul.create(t,e),i=s.Type;return yh(s,i,Hl,_),i},getDefinition(t){const e=bh(Hl,t)??el(t,Wl,Ul.create);if(void 0===e)throw Kh(152,t);return e},annotate(t,e,s){yh(s,t,$h(e))},getAnnotation:Gl,find(t,e){const s=t.find(Wl,e);return null==s?null:bh(Hl,s)??el(s,Wl,Ul.create)??null},get:(t,e)=>t.get(Vt(Xl(e)))});class Ql{constructor(t,e){this.v=void 0,this.b=t,this.A=e}flush(){this.b.isBound&&this.b.updateSource(this.v)}handleChange(t,e){const s=this.b;t!==Fr(s.ast,s.s,s,null)&&(this.v=t,this.A.add(this))}}const Jl=(()=>{function t(t){this.s=t}return e=>{jh(e.prototype,"useScope",t)}})(),Zl=(()=>{class t{}const e=new WeakMap,s=new WeakMap,i=new WeakMap;function n(t){return this.l.get(t)}function r(e,i){let n=s.get(e);return null==n&&s.set(e,n=new t),n[i]??=al.get(e.l,i)}function o(t,e,s){const n=r(this,t);if(null==n)throw Kh(101,t);let o=i.get(this);if(null==o&&i.set(this,o={}),o[t])throw Kh(102,t);n.bind?.(e,this,...s)}function a(t,e){const s=r(this,t),n=i.get(this);s?.unbind?.(e,this),null!=n&&(n[t]=!1)}function h(s,i){let n=e.get(s);return null==n&&e.set(s,n=new t),n[i]??=Yl.get(s.l,i)}function l(t){const e=h(this,t);if(null==e)throw Kh(103,t);const s=e.signals;if(null!=s){const t=this.l.get(vl),e=s.length;let i=0;for(;i<e;++i)t.addSignalListener(s[i],this)}}function c(t){const e=h(this,t);if(void 0===e?.signals)return;const s=this.l.get(vl);let i=0;for(;i<e.signals.length;++i)s.removeSignalListener(e.signals[i],this)}function u(t,e,s,i){const n=h(this,t);if(null==n)throw Kh(103,t);const r=!0===n.withContext;let o=null;switch(r&&(o={source:this.l.get(sd).controller.viewModel,binding:this}),e){case"toView":return"toView"in n?r?n.toView(s,o,...i):n.toView(s,...i):s;case"fromView":return"fromView"in n?r?n.fromView?.(s,o,...i):n.fromView?.(s,...i):s}}return t=>{const e=t.prototype;jh(e,"get",n),jh(e,"bindBehavior",o),jh(e,"unbindBehavior",a),jh(e,"bindConverter",l),jh(e,"unbindConverter",c),jh(e,"useConverter",u)}})(),tc=Yh("IFlushQueue",t=>t.singleton(ec));class ec{constructor(){this.R=!1,this.T=new Set}get count(){return this.T.size}add(t){if(this.T.add(t),!this.R){this.R=!0;try{this.T.forEach(sc)}finally{this.R=!1}}}clear(){this.T.clear(),this.R=!1}}const sc=function(t,e,s){s.delete(t),t.flush()},ic=(()=>{const t=new WeakSet;return(e,s)=>{jh(e.prototype,"limit",function(e){if(t.has(this))throw Kh(9996);t.add(this);const i=s(this,e),n=e.signals,r=n.length>0?this.get(vl):null,o=this[i],a=(...t)=>o.call(this,...t),h="debounce"===e.type?((t,e,s)=>{let i,n,r,o=!1;const a=()=>e(r),h=e=>{r=e,s.isBound?(n=i,i=ao(a,{delay:t.delay}),n?.cancel()):a()},l=h.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return h.flush=()=>{o=i?.status===Vh,l(),o&&a()},h})(e,a,this):((t,e,s)=>{let i,n,r,o=0,a=0,h=!1;const l=()=>t.now(),c=()=>e(r),u=e=>{r=e,s.isBound?(a=l()-o,n=i,a>t.delay?(o=l(),c()):i=ao(()=>{o=l(),c()},{delay:t.delay-a}),n?.cancel()):c()},d=u.dispose=()=>{n?.cancel(),i?.cancel(),n=i=void 0};return u.flush=()=>{h=i?.status===Vh,d(),h&&c()},u})(e,a,this),l=r?{handleChange:h.flush}:null;return this[i]=h,r&&n.forEach(t=>Lh(r,t,l)),{dispose:()=>{r&&n.forEach(t=>Nh(r,t,l)),t.delete(this),h.dispose(),delete this[i]}}})}})(),nc=((t=new WeakSet)=>e=>function(){t.has(this)||(t.add(this),e.call(this))})();class rc{constructor(t,e,s,i,n,r,o,a,h){this.targetAttribute=r,this.targetProperty=o,this.mode=a,this.strict=h,this.isBound=!1,this.s=void 0,this.L=!1,this.v=void 0,this.boundFn=!1,this.M=!1,this.l=e,this.ast=i,this.P=t,this.target=n,this.oL=s,(this.M=o.indexOf(" ")>-1)&&!rc.q.has(o)&&rc.q.set(o,o.split(" "))}updateTarget(t){const e=this.target,s=this.targetAttribute,i=this.targetProperty;switch(s){case"class":if(this.M){const s=!!t;for(const t of rc.q.get(i))e.classList.toggle(t,s)}else e.classList.toggle(i,!!t);break;case"style":{let s="",n=Th(t);g(n)&&n.includes("!important")&&(s="important",n=n.replace("!important","")),e.style.setProperty(i,n,s);break}default:null==t?e.removeAttribute(s):e.setAttribute(s,Th(t))}}handleChange(){this.isBound&&(this.L||(this.L=!0,oo(()=>{if(this.L=!1,!this.isBound)return;this.obs.version++;const t=Fr(this.ast,this.s,this,(this.mode&gh)>0?this:null);this.obs.clear(),t!==this.v&&(this.v=t,this.updateTarget(t))})))}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,qr(this.ast,t,this),this.mode&(gh|ph)&&this.updateTarget(this.v=Fr(this.ast,t,this,(this.mode&gh)>0?this:null)),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,_r(this.ast,this.s,this),this.s=void 0,this.v=void 0,this.obs.clearAll())}}rc.mix=nc(()=>{Jl(rc),ic(rc,()=>"updateTarget"),xo(rc,null),Zl(rc)}),rc.q=new Map;class oc{constructor(t,e,s,i,n,r,o,a){this.ast=i,this.target=n,this.targetProperty=r,this.mode=o,this.strict=a,this.isBound=!1,this.s=void 0,this.L=!1,this.P=t,this.oL=s,this.I=s.getAccessor(n,r);const h=i.expressions,l=this.partBindings=Array(h.length),c=h.length;let u=0;for(;c>u;++u)l[u]=new ac(h[u],n,r,e,s,a,this)}_(){if(this.isBound)if(this.P.state!==Xu&&(this.I.type&zh)>0){if(this.L)return;this.L=!0,oo(()=>{this.L=!1,this.isBound&&this.updateTarget()})}else this.updateTarget()}updateTarget(){const t=this.partBindings,e=this.ast,s=this.target,i=this.targetProperty,n=e.parts,r=t.length;let o="",a=0;if(1===r)o=n[0]+t[0].V()+n[1];else for(o=n[0];r>a;++a)o+=t[a].V()+n[a+1];this.I.setValue(o,s,i)}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t;const e=this.partBindings,s=e.length;let i=0;for(;s>i;++i)e[i].bind(t);this.updateTarget(),this.isBound=!0}unbind(){if(!this.isBound)return;this.isBound=!1,this.s=void 0;const t=this.partBindings,e=t.length;let s=0;for(;e>s;++s)t[s].unbind()}useAccessor(t){this.I=t}}class ac{constructor(t,e,s,i,n,r,o){this.ast=t,this.target=e,this.targetProperty=s,this.strict=r,this.owner=o,this.mode=gh,this.isBound=!1,this.v="",this.boundFn=!1,this.D=!1,this.l=i,this.oL=n}updateTarget(){this.owner._()}handleChange(){this.isBound&&(this.D=!0,this.updateTarget())}handleCollectionChange(){this.isBound&&(this.D=!0,this.updateTarget())}V(){if(!this.D)return this.v;this.obs.version++;const t=Fr(this.ast,this.s,this,(this.mode&gh)>0?this:null);return this.obs.clear(),this.v=t,l(t)&&this.observeCollection(t),this.D=!1,this.v}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,qr(this.ast,t,this),this.v=Fr(this.ast,this.s,this,(this.mode&gh)>0?this:null),l(this.v)&&this.observeCollection(this.v),this.D=!1,this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this.v=void 0,this.D=!1,_r(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}ac.mix=nc(()=>{Jl(ac),ic(ac,()=>"updateTarget"),xo(ac,null),Zl(ac)});class hc{constructor(t,e,s,i,n,r,o){this.p=i,this.ast=n,this.target=r,this.strict=o,this.isBound=!1,this.mode=gh,this.L=!1,this.v="",this.F=!1,this.boundFn=!1,this.l=e,this.P=t,this.oL=s}updateTarget(t){const e=this.target,s=this.v;this.v=t,this.F&&(s.parentNode?.removeChild(s),this.F=!1),t instanceof this.p.Node&&(e.parentNode?.insertBefore(t,e),t="",this.F=!0),e.textContent=Th(t??"")}handleChange(){this.isBound&&(this.L||(this.L=!0,oo(()=>{if(this.L=!1,!this.isBound)return;this.obs.version++;const t=Fr(this.ast,this.s,this,(this.mode&gh)>0?this:null);this.obs.clear(),t!==this.v&&this.updateTarget(t)})))}handleCollectionChange(){this.isBound&&(this.L||(this.L=!0,oo(()=>{if(this.L=!1,!this.isBound)return;this.obs.version++;const t=this.v=Fr(this.ast,this.s,this,(this.mode&gh)>0?this:null);this.obs.clear(),l(t)&&this.observeCollection(t),this.updateTarget(t)})))}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,qr(this.ast,t,this);const e=this.v=Fr(this.ast,this.s,this,(this.mode&gh)>0?this:null);l(e)&&this.observeCollection(e),this.updateTarget(e),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,_r(this.ast,this.s,this),this.F&&this.v.parentNode?.removeChild(this.v),this.s=void 0,this.obs.clearAll())}}hc.mix=nc(()=>{Jl(hc),ic(hc,()=>"updateTarget"),xo(hc,null),Zl(hc)});class lc{constructor(t,e,s,i,n,r){this.ast=s,this.targetProperty=i,this.isBound=!1,this.s=void 0,this.target=null,this.boundFn=!1,this.l=t,this.oL=e,this.strict=r,this.H=n}updateTarget(){this.target[this.targetProperty]=this.v}handleChange(){this.isBound&&(this.obs.version++,this.v=Fr(this.ast,this.s,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,this.target=this.H?t.bindingContext:t.overrideContext,qr(this.ast,t,this),this.v=Fr(this.ast,this.s,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,_r(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}}lc.mix=nc(()=>{Jl(lc),ic(lc,()=>"updateTarget"),xo(lc,null),Zl(lc)});class cc{constructor(t,e,s,i,n,r,o,a){this.ast=i,this.target=n,this.targetProperty=r,this.mode=o,this.strict=a,this.isBound=!1,this.s=void 0,this.I=void 0,this.L=!1,this.O=null,this.boundFn=!1,this.l=e,this.P=t,this.oL=s}updateTarget(t){this.I.setValue(t,this.target,this.targetProperty)}updateSource(t){Vr(this.ast,this.s,this,null,t)}handleChange(){if(this.isBound)if(this.P.state!==Xu&&(this.I.type&zh)>0){if(this.L)return;this.L=!0,oo(()=>{this.L=!1,this.isBound&&this.$()})}else this.$()}$(){this.obs.version++;const t=Fr(this.ast,this.s,this,(this.mode&gh)>0?this:null);this.obs.clear(),this.updateTarget(t)}handleCollectionChange(){this.handleChange()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,qr(this.ast,t,this);const e=this.oL,s=this.mode;let i=this.I;i||(i=s&mh?e.getObserver(this.target,this.targetProperty):e.getAccessor(this.target,this.targetProperty),this.I=i);const n=(s&gh)>0;s&(gh|ph)&&this.updateTarget(Fr(this.ast,this.s,this,n?this:null)),s&mh&&(i.subscribe(this.O??=new Ql(this,this.l.get(tc))),n||this.updateSource(i.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,this.O&&(this.I.unsubscribe(this.O),this.O=null),_r(this.ast,this.s,this),this.s=void 0,this.obs.clearAll())}useTargetObserver(t){this.I?.unsubscribe(this),(this.I=t).subscribe(this)}useTargetSubscriber(t){if(null!=this.O)throw Kh(9995);this.O=t}}cc.mix=nc(()=>{Jl(cc),ic(cc,t=>t.mode&mh?"updateSource":"updateTarget"),xo(cc,null),Zl(cc)});class uc{constructor(t,e,s,i,n){this.oL=e,this.ast=s,this.target=i,this.strict=n,this.isBound=!1,this.s=void 0,this.l=t}updateSource(){this.isBound?(this.obs.version++,Vr(this.ast,this.s,this,this,this.target),this.obs.clear()):Vr(this.ast,this.s,this,null,null)}handleChange(){this.isBound&&this.updateSource()}handleCollectionChange(){this.isBound&&this.updateSource()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,qr(this.ast,t,this),this.isBound=!0,this.updateSource()}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),Fr(this.ast,this.s,this,null)===this.target&&this.updateSource(),_r(this.ast,this.s,this),this.s=void 0)}}uc.mix=nc(()=>{xo(uc,null),ic(uc,()=>"updateSource"),Jl(uc),Zl(uc)});class dc{constructor(t,e=!1,s){this.prevent=t,this.capture=e,this.onError=s}}class fc{constructor(t,e,s,i,n,r,o){this.ast=e,this.target=s,this.targetEvent=i,this.strict=o,this.isBound=!1,this.self=!1,this.boundFn=!0,this.N=null,this.l=t,this.W=n,this.N=r}callSource(t){const e=this.s.overrideContext;e.$event=t;let s=Fr(this.ast,this.s,this,null);delete e.$event,p(s)&&(s=s(t)),!0!==s&&this.W.prevent&&t.preventDefault()}handleEvent(t){if((!this.self||this.target===t.composedPath()[0])&&!1!==this.N?.(t))try{this.callSource(t)}catch(e){this.W.onError(t,e)}}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.s=t,qr(this.ast,t,this),this.target.addEventListener(this.targetEvent,this,this.W),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,_r(this.ast,this.s,this),this.s=void 0,this.target.removeEventListener(this.targetEvent,this,this.W))}}fc.mix=nc(function(){Jl(fc),ic(fc,()=>"callSource"),Zl(fc)});const pc=Yh("IEventModifier"),gc=Yh("IKeyMapping",t=>t.instance({meta:Rh(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((t,e,s)=>{let i=String.fromCharCode(s+65);return t[s+65]=i,i=String.fromCharCode(s+97),t[s+97]=t[i]=i,t},{})}}));class mc{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this.j=at(gc),this.U=["left","middle","right"]}static register(t){t.register(Qh(pc,mc))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e){switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue;case"left":case"middle":case"right":if(t.button!==this.U.indexOf(s))return!1;continue}if(this.j.meta.includes(s)&&!0!==t[`${s}Key`])return!1}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}class vc{constructor(){this.j=at(gc),this.type=["keydown","keyup"]}static register(t){t.register(Qh(pc,vc))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e){switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue}if(this.j.meta.includes(s)){if(!0!==t[`${s}Key`])return!1}else if(this.j.keys[s]!==t.key)return!1}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}class bc{constructor(){this.type=["$ALL"]}static register(t){t.register(Qh(pc,bc))}getHandler(t){const e=t.split(/[:+.]/);return t=>{let s,i=!1,n=!1;for(s of e)switch(s){case"prevent":i=!0;continue;case"stop":n=!0;continue}return i&&t.preventDefault(),n&&t.stopPropagation(),!0}}}const wc=Yh("IEventModifierHandler",t=>t.instance({getHandler:()=>null}));class yc{constructor(){this.G=at(jt(pc)).reduce((t,e)=>((l(e.type)?e.type:[e.type]).forEach(s=>t[s]=e),t),{})}static register(t){t.register(Qh(wc,yc))}getHandler(t,e){return g(e)?(this.G[t]??this.G.$ALL)?.getHandler(e)??null:null}}const kc={register(t){t.register(yc,mc,vc,bc)}},$c=Yh("IViewFactory");class Cc{constructor(t,e){this.isCaching=!1,this.X=null,this.K=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=Cc.maxCacheSize:g(t)&&(t=parseInt(t,10)),-1!==this.K&&e||(this.K=t)),this.K>0?this.X=[]:this.X=null,this.isCaching=this.K>0}canReturnToCache(t){return null!=this.X&&this.X.length<this.K}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.X.push(t),!0)}create(t){const e=this.X;let s;return null!=e&&e.length>0?(s=e.pop(),s):(s=Pu.$view(this,t),s)}}Cc.maxCacheSize=65535;const Tc=(()=>{const t=(t,e)=>t.document.createComment(e);return e=>{const s=t(e,"au-end");return s.$start=t(e,"au-start"),s}})(),xc=(t,e,s)=>{if(null===t)return;const i=s.length;let n=0;for(;i>n;)t.insertBefore(s[n],e),++n},Ac=(t,e)=>new t.ownerDocument.defaultView.MutationObserver(e),Rc=t=>1===t.nodeType,Sc="default",Ec=Yh("IAuSlotsInfo");class Ic{constructor(t){this.projectedSlots=t}}const Pc=Yh("IAuSlotWatcher");class Oc{static create(t,e,s,i,n,r,o,a){const h=[],l=i.renderers,c=e=>{let s=e,i=t;for(;null!=i&&s>0;)i=i.parent,--s;if(null==i)throw Kh(9999);return i},u=t=>{const i=c(t),d=new Oc(i),f=n.compileSpread(i.controller.definition,i.instruction?.captures??It,i.controller.container,e,s);let p;for(p of f)switch(p.type){case on.spreadTransferedBinding:u(t+1);break;case on.spreadElementProp:l[p.instruction.type].render(d,Vd(e),p.instruction,r,o,a);break;default:l[p.type].render(d,e,p,r,o,a)}h.push(d)};return u(0),h}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(t){this.isBound=!1,this.et=[],this.locator=(this.$controller=(this.it=t).controller).container}get(t){return this.locator.get(t)}bind(t){if(this.isBound)return;this.isBound=!0;const e=this.scope=this.it.controller.scope.parent??void 0;if(null==e)throw Kh(9999);this.et.forEach(t=>t.bind(e))}unbind(){this.et.forEach(t=>t.unbind()),this.isBound=!1}addBinding(t){this.et.push(t)}addChild(t){if(t.vmKind!==Wu)throw Kh(9998);this.$controller.addChild(t)}}class Mc{constructor(t,e,s,i,n,r,o){this.target=e,this.targetKeys=s,this.ast=i,this.strict=o,this.isBound=!1,this.s=void 0,this.boundFn=!1,this.st={},this.nt=new WeakMap,this.P=t,this.oL=n,this.l=r}updateTarget(){this.obs.version++;const t=Fr(this.ast,this.s,this,this);this.obs.clear(),this.rt(t,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(t){if(this.isBound){if(this.s===t)return;this.unbind()}this.isBound=!0,this.s=t,qr(this.ast,t,this);const e=Fr(this.ast,t,this,this);this.rt(e,!1)}unbind(){if(!this.isBound)return;let t;for(t in this.isBound=!1,_r(this.ast,this.s,this),this.s=void 0,this.st)this.st[t].unbind()}rt(t,e){let s,i;if(!d(t)){for(s in this.st)this.st[s]?.unbind();return}let n=this.nt.get(t);for(s of(null==n&&this.nt.set(t,n=Lr.fromParent(this.s,t)),this.targetKeys))i=this.st[s],s in t?(null==i&&(i=this.st[s]=new cc(this.P,this.l,this.oL,Mc.ot[s]??=new Te(s,0),this.target,s,Pi.toView,this.strict)),i.bind(n)):e&&i?.unbind()}}Mc.mix=nc(()=>{Jl(Mc),ic(Mc,()=>"updateTarget"),xo(Mc,null),Zl(Mc)}),Mc.ot={};const Bc=(t,e,s,i)=>{t.addEventListener(e,s,i)},jc=(t,e,s,i)=>{t.removeEventListener(e,s,i)},Lc=t=>{let e;const s=t.prototype;jh(s,"subscribe",function(t){if(this.subs.add(t)&&1===this.subs.count){for(e of this.cf.events)Bc(this.lt,e,this);this.ht=!0,this.ct?.()}}),jh(s,"unsubscribe",function(t){if(this.subs.remove(t)&&0===this.subs.count){for(e of this.cf.events)jc(this.lt,e,this);this.ht=!1,this.ut?.()}}),jh(s,"useConfig",function(t){if(this.cf=t,this.ht){for(e of this.cf.events)jc(this.lt,e,this);for(e of this.cf.events)Bc(this.lt,e,this)}})},Nc=t=>{jh(t.prototype,"subscribe",Ot),jh(t.prototype,"unsubscribe",Ot)};class Dc{get doNotCache(){return!0}constructor(t,e={}){this.obj=t,this.mapping=e,this.type=_h|zh,this.v="",this.ft={},this.dt=0}getValue(){return this.v}setValue(t){t!==this.v&&(this.v=t,this.gt())}gt(){const t=this.ft,e=++this.dt,s=this.obj.classList,i=Vc(this.v),n=i.length;let r,o=0;if(n>0)for(;o<n;o++)r=i[o],r=this.mapping[r]||r,0!==r.length&&(t[r]=this.dt,s.add(r));if(1!==e)for(r in t)r=this.mapping[r]||r,t[r]!==e&&s.remove(r)}}function Vc(t){if(g(t))return Fc(t);if("object"!=typeof t)return It;if(l(t)){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...Vc(t[i]));return s}return It}const e=[];let s;for(s in t)Boolean(t[s])&&(s.includes(" ")?e.push(...Fc(s)):e.push(s));return e}function Fc(t){const e=t.match(/\S+/g);return null===e?It:e}Nc(Dc);const qc=t=>({$isResolver:!0,resolve:(e,s)=>s.get(sd).controller.container.get(Dt(t))}),_c=Yh("IRenderer");function zc(t,e){return(e?.metadata??(t[Symbol.metadata]??=Object.create(null)))[X]={register(e){Qh(_c,t).register(e)}},t}function Kc(t,e,s){return g(e)?t.parse(e,s):e}function Uc(t){return null!=t.viewModel?t.viewModel:t}const Wc=zc(class{constructor(){this.target=on.setProperty}render(t,e,s){const i=Uc(e);void 0!==i.$observers?.[s.to]?i.$observers[s.to].setValue(s.value):i[s.to]=s.value}},null),Hc=zc(class{constructor(){this.r=at(ku),this.target=on.hydrateElement}render(t,e,s,i,n,r){let o,a,h;const l=s.res,c=s.projections,u=t.container;if("string"==typeof l){if(o=zd.find(u,l),null==o)throw Kh(752,s,t)}else o=l;const d=s.containerless||o.containerless?Cd(e):null,f=function(t,e,s,i,n,r){const o=e.container.createChild();return Ad(o,s,t),tl(o,ed,new St(uu,e)),tl(o,an,new St(du,i)),tl(o,wd,null==n?bu:new vu(n)),tl(o,$c,wu),tl(o,Ec,null==r?yu:new St(pu,r)),o}(i,t,e,s,d,null==c?void 0:new Ic(Ih(c)));a=f.invoke(o.Type),h=Pu.$el(f,a,e,s,o,d);const p=this.r.renderers,g=s.props,m=g.length;let v,b=0;for(;m>b;)v=g[b],p[v.type].render(t,h,v,i,n,r),++b;t.addChild(h)}},null),Gc=zc(class{constructor(){this.r=at(ku),this.target=on.hydrateAttribute}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=Vl.find(a,s.res),null==o)throw Kh(753,s,t)}else o=s.res;const h=mu(i,o,t,e,s,void 0,void 0),l=Pu.$attr(h.ctn,h.vm,e,o);Rl.set(e,o.key,l);const c=this.r.renderers,u=s.props,d=u.length;let f,p=0;for(;d>p;)f=u[p],c[f.type].render(t,l,f,i,n,r),++p;t.addChild(l)}},null),Xc=zc(class{constructor(){this.r=at(ku),this.target=on.hydrateTemplateController}render(t,e,s,i,n,r){let o,a=t.container;if("string"==typeof s.res){if(o=Vl.find(a,s.res),null==o)throw Kh(754,s,t)}else o=s.res;const h=this.r.getViewFactory(s.def,"new"===o.containerStrategy?a.createChild({inheritParentResources:!0}):a),l=Cd(e),c=mu(i,o,t,e,s,h,l),u=Pu.$attr(c.ctn,c.vm,e,o);Rl.set(l,o.key,u),c.vm.link?.(t,u,e,s);const d=this.r.renderers,f=s.props,p=f.length;let g,m=0;for(;p>m;)g=f[m],d[g.type].render(t,u,g,i,n,r),++m;t.addChild(u)}},null),Yc=zc(class{constructor(){this.target=on.hydrateLetElement,lc.mix()}render(t,e,s,i,n,r){e.remove();const o=s.instructions,a=s.toBindingContext,h=t.container,l=o.length;let c,u,d=0;for(;l>d;)c=o[d],u=Kc(n,c.from,Dh),t.addBinding(new lc(h,r,u,c.to,a,t.strict??!1)),++d}},null),Qc=zc(class{constructor(){this.target=on.refBinding,uc.mix()}render(t,e,s,i,n,r){t.addBinding(new uc(t.container,r,Kc(n,s.from,Dh),function(t,e){if("element"===e)return t;switch(e){case"controller":return Vd(t);case"view":throw Kh(750);case"component":return Vd(t).viewModel;default:{const s=Ll(t,e);if(void 0!==s)return s.viewModel;const i=Vd(t,{name:e});if(void 0===i)throw Kh(751,e);return i.viewModel}}}(e,s.to),t.strict??!1))}},null),Jc=zc(class{constructor(){this.target=on.interpolation,ac.mix()}render(t,e,s,i,n,r){const o=t.container,a=new oc(t,o,r,Kc(n,s.from,"Interpolation"),Uc(e),s.to,gh,t.strict??!1);if("class"===s.to&&a.target.nodeType>0){const t=o.get(qc(yd));a.useAccessor(new Dc(a.target,t))}t.addBinding(a)}},null),Zc=zc(class{constructor(){this.target=on.propertyBinding,cc.mix()}render(t,e,s,i,n,r){const o=t.container,a=new cc(t,o,r,Kc(n,s.from,Dh),Uc(e),s.to,s.mode,t.strict??!1);if("class"===s.to&&a.target.nodeType>0){const t=o.get(qc(yd));a.useTargetObserver(new Dc(a.target,t))}t.addBinding(a)}},null),tu=zc(class{constructor(){this.target=on.iteratorBinding,cc.mix()}render(t,e,s,i,n,r){t.addBinding(new cc(t,t.container,r,Kc(n,s.forOf,"IsIterator"),Uc(e),s.to,gh,t.strict??!1))}},null),eu=zc(class{constructor(){this.target=on.textBinding,hc.mix()}render(t,e,s,i,n,r){t.addBinding(new hc(t,t.container,r,i,Kc(n,s.from,Dh),e,t.strict??!1))}},null),su=Yh("IListenerBindingOptions",t=>t.singleton(class{constructor(){this.p=at(xl),this.prevent=!1,this.onError=(t,e)=>{const s=new this.p.CustomEvent("au-event-error",{cancelable:!0,detail:{event:t,error:e}});if(this.p.window.dispatchEvent(s),!s.defaultPrevented)throw e}}})),iu=zc(class{constructor(){this.target=on.listenerBinding,this.vt=at(wc),this.xt=at(su),fc.mix()}render(t,e,s,i,n){t.addBinding(new fc(t.container,Kc(n,s.from,"IsFunction"),e,s.to,new dc(this.xt.prevent,s.capture,this.xt.onError),this.vt.getHandler(s.to,s.modifier),t.strict??!1))}},null),nu=zc(class{constructor(){this.target=on.setAttribute}render(t,e,s){e.setAttribute(s.to,s.value)}},null),ru=zc(class{constructor(){this.target=on.setClassAttribute}render(t,e,s){!function(t,e){const s=e.length;let i=0;for(let n=0;n<s;++n)32===e.charCodeAt(n)?(n!==i&&t.add(e.slice(i,n)),i=n+1):n+1===s&&t.add(e.slice(i))}(e.classList,s.value)}},null),ou=zc(class{constructor(){this.target=on.setStyleAttribute}render(t,e,s){e.style.cssText+=s.value}},null),au=zc(class{constructor(){this.target=on.stylePropertyBinding,cc.mix()}render(t,e,s,i,n,r){t.addBinding(new cc(t,t.container,r,Kc(n,s.from,Dh),e.style,s.to,gh,t.strict??!1))}},null),hu=zc(class{constructor(){this.target=on.attributeBinding,rc.mix()}render(t,e,s,i,n,r){const o=t.container,a=o.has(yd,!1)?o.get(yd):null;t.addBinding(new rc(t,o,r,Kc(n,s.from,Dh),e,s.attr,null==a?s.to:s.to.split(/\s/g).map(t=>a[t]??t).join(" "),gh,t.strict??!1))}},null),lu=zc(class{constructor(){this.yt=at(Oi),this.r=at(ku),this.target=on.spreadTransferedBinding}render(t,e,s,i,n,r){Oc.create(t.container.get(sd),e,void 0,this.r,this.yt,i,n,r).forEach(e=>t.addBinding(e))}},null),cu=zc(class{constructor(){this.target=on.spreadValueBinding,Mc.mix()}render(t,e,s,i,n,r){const o=s.target;if("$bindables"!==o)throw Kh(820,o);t.addBinding(new Mc(t,e.viewModel,Ih(e.definition.bindables),n.parse(s.from,Dh),r,t.container,t.strict??!1))}},null),uu="IController",du="IInstruction",fu="IRenderLocation",pu="ISlotsInfo";class gu{get $isResolver(){return!0}constructor(t){this.f=t}resolve(){const t=this.f;if(null===t)throw Kh(755);if(!g(t.name)||0===t.name.length)throw Kh(756);return t}}function mu(t,e,s,i,n,r,o,a){const h=s instanceof Pu?s:s.$controller,l=h.container.createChild();return Ad(l,i,t),tl(l,ed,new St(uu,h)),tl(l,an,new St(du,n)),tl(l,wd,null==o?bu:new St(fu,o)),tl(l,$c,null==r?wu:new gu(r)),tl(l,Ec,yu),{vm:l.invoke(e.Type),ctn:l}}class vu{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(t){this.l=t}resolve(){return this.l}}const bu=new vu(null),wu=new gu(null),yu=new St(pu,new Ic(It)),ku=Yh("IRendering",t=>t.singleton($u));class $u{get renderers(){return this.wt??=this.bt.getAll(_c,!1).reduce((t,e)=>(t[e.target]??=e,t),m())}constructor(){this.kt=new WeakMap,this.Ct=new WeakMap;const t=this.bt=at(Ct).root,e=this.p=t.get(xl);this.ep=t.get(Je),this.oL=t.get(ja),this.Bt=e.document.createElement("au-m"),this.St=new xd(e,e.document.createDocumentFragment())}compile(t,e){const s=e.get(Oi),i=this.kt;let n=i.get(t);return null==n&&i.set(t,n=Sd.create(t.needsCompile?s.compile(t,e):t)),n}getViewFactory(t,e){return new Cc(e,Sd.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new xd(this.p,this.At(t.template));let e,s=!1;const i=this.Ct,n=this.p,r=n.document;if(i.has(t))e=i.get(t);else{const o=t.template;let a;null==o?e=null:o instanceof n.Node?"TEMPLATE"===o.nodeName?(e=o.content,s=!0):(e=r.createDocumentFragment()).appendChild(o.cloneNode(!0)):(a=r.createElement("template"),g(o)&&(a.innerHTML=o),e=a.content,s=!0),this.At(e),i.set(t,e)}return null==e?this.St:new xd(this.p,s?r.importNode(e,!0):r.adoptNode(e.cloneNode(!0)))}render(t,e,s,i){const n=s.instructions,r=this.renderers,o=e.length;let a,h,l,c=0,u=0,d=n.length;if(o!==d)throw Kh(757,o,d);if(null!=i&&(a=s.surrogates,(d=a.length)>0))for(u=0;d>u;)h=a[u],r[h.type].render(t,i,h,this.p,this.ep,this.oL),++u;if(o>0)for(;o>c;){for(a=n[c],l=e[c],u=0,d=a.length;d>u;)h=a[u],r[h.type].render(t,l,h,this.p,this.ep,this.oL),++u;++c}}At(t){if(null==t)return null;const e=this.p.document.createTreeWalker(t,128);let s;for(;null!=(s=e.nextNode());)"au*"===s.nodeValue&&s.parentNode.replaceChild(e.currentNode=this.Bt.cloneNode(),s);return t}}const Cu=Yh("IShadowDOMStyles"),Tu=Yh("IShadowDOMGlobalStyles",t=>t.instance({applyTo:Ot})),{enter:xu,exit:Au}=Oo,{wrap:Ru,unwrap:Su}=xa;class Eu{get value(){return this.v}constructor(t,e,s,i,n="async"){this.obj=t,this.$get=s,this.isBound=!1,this.L=!1,this.Rt=0,this.v=void 0,this.cb=i,this.oL=e,this.Tt=n}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){this.isBound&&("sync"!==this.Tt?this.L||(this.L=!0,oo(()=>{this.L=!1,this.Et()})):this.Et())}Et(){if(!this.isBound)return;const t=this.obj,e=this.v;if(++this.Rt>100)throw new Error("AURXXXX: Possible infinitely recursive side-effect detected in a watcher.");const s=this.compute();v(s,e)||this.cb.call(t,s,e,t),this.L||(this.Rt=0)}compute(){this.obs.version++;try{return xu(this),this.v=Su(this.$get.call(void 0,Ru(this.obj),this))}finally{this.obs.clear(),Au(this)}}}xo(Eu,null);class Iu{get value(){return this.v}constructor(t,e,s,i,n,r="async"){this.scope=t,this.l=e,this.oL=s,this.isBound=!1,this.L=!1,this.boundFn=!1,this.obj=t.bindingContext,this.Lt=i,this.cb=n,this.Tt=r}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.isBound&&("sync"!==this.Tt?this.L||(this.L=!0,oo(()=>{this.L=!1,this.Et()})):this.Et())}Et(){if(!this.isBound)return;const t=this.Lt,e=this.obj,s=this.v;this.obs.version++;const i=Fr(t,this.scope,this,this);this.obs.clear(),v(i,s)||(this.v=i,this.cb.call(e,i,s,e))}bind(){this.isBound||(this.obs.version++,this.v=Fr(this.Lt,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.v=void 0)}}xo(Iu,null),Zl(Iu);class Pu{get lifecycleHooks(){return this.Mt}get isActive(){return(this.state&(Xu|Yu))>0&&0===(this.state&Qu)}get name(){if(null===this.parent)switch(this.vmKind){case Wu:return`[${this.definition.name}]`;case Uu:return this.definition.name;case Hu:return this.viewFactory.name}switch(this.vmKind){case Wu:return`${this.parent.name}>[${this.definition.name}]`;case Uu:return`${this.parent.name}>${this.definition.name}`;case Hu:return this.viewFactory.name===this.parent.definition?.name?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this.Dt}set viewModel(t){this.Dt=t,this.Pt=null==t||this.vmKind===Hu?zu.none:new zu(t)}get strict(){return this.definition?.strict}constructor(t,e,s,i,n,r,o){this.container=t,this.vmKind=e,this.definition=s,this.viewFactory=i,this.host=r,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this.qt=!1,this.mountTarget=Mu,this.shadowRoot=null,this.nodes=null,this.location=null,this.Mt=null,this.state=Gu,this.It=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._t=0,this.Vt=0,this.Ft=0,this.Dt=n,this.Pt=e===Hu?zu.none:new zu(n),this.location=o,this.r=t.root.get(ku)}static getCached(t){return Ou.get(t)}static getCachedOrThrow(t){const e=Pu.getCached(t);if(void 0===e)throw Kh(500,t);return e}static $el(t,e,s,i,n=void 0,r=null){if(Ou.has(e))return Ou.get(e);n=n??qd(e.constructor),tl(t,n.Type,new St(n.key,e,n.Type));const o=new Pu(t,Uu,n,null,e,s,r),a=t.get(Lt(sd));return n.dependencies.length>0&&t.register(...n.dependencies),tl(t,sd,new St("IHydrationContext",new id(o,i,a))),Ou.set(e,o),null!=i&&!1===i.hydrate||o.hE(i),o}static $attr(t,e,s,i){if(Ou.has(e))return Ou.get(e);i=i??Dl(e.constructor),tl(t,i.Type,new St(i.key,e,i.Type));const n=new Pu(t,Wu,i,null,e,s,null);return i.dependencies.length>0&&t.register(...i.dependencies),Ou.set(e,n),n.Ht(),n}static $view(t,e=void 0){const s=new Pu(t.container,Hu,null,t,null,null,null);return s.parent=e??null,s.Ot(),s}hE(t){const e=this.container,s=this.Dt,i=this.definition;this.scope=Lr.create(s,null,!0),i.watches.length>0&&_u(this,e,i,s),Vu(this,i,s),this.Mt=zl.resolve(e),e.register(i.Type),null!==i.injectable&&tl(e,i.injectable,new St("definition.injectable",s)),null!=t&&!1===t.hydrate||(this.hS(),this.hC())}hS(){null!=this.Mt.hydrating&&this.Mt.hydrating.forEach(od,this),this.Pt.$t&&this.Dt.hydrating(this);const t=this.definition,e=this.Nt=this.r.compile(t,this.container),s=e.shadowOptions,i=e.hasSlots,n=e.containerless,r=this.host;let o=this.location;if(n&&null==o&&(o=this.location=Cd(r)),vd(r,Ld,this),vd(r,t.key,this),null!==s||i){if(null!=o)throw Kh(501);vd(this.shadowRoot=r.attachShadow(s??Ku),Ld,this),vd(this.shadowRoot,t.key,this),this.mountTarget=ju}else null!=o?(r!==o&&(vd(o,Ld,this),vd(o,t.key,this)),this.mountTarget=Lu):this.mountTarget=Bu;this.Dt.$controller=this,this.nodes=this.r.createNodes(e),void 0!==this.Mt.hydrated&&this.Mt.hydrated.forEach(ad,this),this.Pt.Wt&&this.Dt.hydrated(this)}hC(){this.r.render(this,this.nodes.findTargets(),this.Nt,this.host),void 0!==this.Mt.created&&this.Mt.created.forEach(rd,this),this.Pt.jt&&this.Dt.created(this)}Ht(){const t=this.definition,e=this.Dt;t.watches.length>0&&_u(this,this.container,t,e),Vu(this,t,e),e.$controller=this,this.Mt=zl.resolve(this.container),void 0!==this.Mt.created&&this.Mt.created.forEach(rd,this),this.Pt.jt&&this.Dt.created(this)}Ot(){this.Nt=this.r.compile(this.viewFactory.def,this.container),this.r.render(this,(this.nodes=this.r.createNodes(this.Nt)).findTargets(),this.Nt,void 0)}activate(t,e,s){switch(this.state){case Gu:case Ju:if(null!==e&&!e.isActive)return;this.state=Xu;break;case Yu:return;case td:throw Kh(502,this.name);default:throw Kh(503,this.name,function(t){const e=[];return(t&Xu)===Xu&&e.push("activating"),(t&Yu)===Yu&&e.push("activated"),(t&Qu)===Qu&&e.push("deactivating"),(t&Ju)===Ju&&e.push("deactivated"),(t&Zu)===Zu&&e.push("released"),(t&td)===td&&e.push("disposed"),0===e.length?"none":e.join("|")}(this.state))}switch(this.parent=e,this.vmKind){case Uu:this.scope.parent=s??null;break;case Wu:this.scope=s??null;break;case Hu:if(null==s)throw Kh(504,this.name);this.hasLockedScope||(this.scope=s)}let i;return this.$initiator=t,this.zt(),this.vmKind!==Hu&&null!=this.Mt.binding&&(i=O(...this.Mt.binding.map(hd,this))),this.Pt.Ut&&(i=O(i,this.Dt.binding(this.$initiator,this.parent))),h(i)?(this.Gt(),i.then(()=>{this.qt=!0,this.state!==Xu?this.Xt():this.bind()}).catch(t=>{this.Kt(t)}),this.$promise):(this.qt=!0,this.bind(),this.$promise)}bind(){let t,e=0,s=0;if(null!==this.bindings)for(e=0,s=this.bindings.length;s>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==Hu&&null!=this.Mt.bound&&(t=O(...this.Mt.bound.map(ld,this))),this.Pt.Qt&&(t=O(t,this.Dt.bound(this.$initiator,this.parent))),h(t))return this.Gt(),void t.then(()=>{this.isBound=!0,this.state!==Xu?this.Xt():this.Yt()}).catch(t=>{this.Kt(t)});this.isBound=!0,this.Yt()}Zt(...t){switch(this.mountTarget){case Bu:this.host.append(...t);break;case ju:this.shadowRoot.append(...t);break;case Lu:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}Yt(){switch(this.mountTarget){case Bu:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case ju:{const t=this.container;(t.has(Cu,!1)?t.get(Cu):t.get(Tu)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case Lu:this.nodes.insertBefore(this.location)}let t,e=0;if(this.vmKind!==Hu&&null!=this.Mt.attaching&&(t=O(...this.Mt.attaching.map(cd,this))),this.Pt.Jt&&(t=O(t,this.Dt.attaching(this.$initiator,this.parent))),h(t)&&(this.Gt(),this.zt(),t.then(()=>{this.Xt()}).catch(t=>{this.Kt(t)})),null!==this.children)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this.Xt()}deactivate(t,e){let s;switch(this.state&~Zu){case Yu:this.state=Qu;break;case Xu:this.state=Qu,s=this.$promise?.catch(Ot);break;case Gu:case Ju:case td:case Ju|td:return;default:throw Kh(505,this.name,this.state)}this.$initiator=t,t===this&&this.te();let i,n=0;if(null!==this.children)for(n=0;n<this.children.length;++n)this.children[n].deactivate(t,this);return P(s,()=>{if(this.isBound&&(this.vmKind!==Hu&&null!=this.Mt.detaching&&(i=O(...this.Mt.detaching.map(dd,this))),this.Pt.ee&&(i=O(i,this.Dt.detaching(this.$initiator,this.parent)))),h(i)&&(this.Gt(),t.te(),i.then(()=>{t.ie()}).catch(e=>{t.Kt(e)})),null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.ie(),this.$promise})}removeNodes(){switch(this.vmKind){case Uu:case Hu:this.nodes.remove(),this.nodes.unlink()}}unbind(){let t=0;if(null!==this.bindings)for(;t<this.bindings.length;++t)this.bindings[t].unbind();switch(this.parent=null,this.vmKind){case Wu:this.scope=null;break;case Hu:this.hasLockedScope||(this.scope=null),(this.state&Zu)!==Zu||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case Uu:this.scope.parent=null}this.state=Ju,this.$initiator=null,this.se()}Gt(){void 0===this.$promise&&(this.$promise=new Promise((t,e)=>{this.$resolve=t,this.$reject=e}),this.$initiator!==this&&this.parent.Gt())}se(){void 0!==this.$promise&&(pd=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,pd(),pd=void 0)}Kt(t){void 0!==this.$promise&&(gd=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,gd(t),gd=void 0),this.$initiator!==this&&this.parent.Kt(t)}zt(){++this._t,this.$initiator!==this&&this.parent.zt()}Xt(){if(this.state!==Xu)return--this._t,this.se(),void(this.$initiator!==this&&this.parent.Xt());if(0===--this._t){if(this.vmKind!==Hu&&null!=this.Mt.attached&&(md=O(...this.Mt.attached.map(ud,this))),this.Pt.ne&&(md=O(md,this.Dt.attached(this.$initiator))),h(md))return this.Gt(),md.then(()=>{this.state=Yu,this.se(),this.$initiator!==this&&this.parent.Xt()}).catch(t=>{this.Kt(t)}),void(md=void 0);md=void 0,this.state=Yu,this.se()}this.$initiator!==this&&this.parent.Xt()}te(){++this.Vt}ie(){if(0===--this.Vt){this.re(),this.removeNodes();let t,e=this.$initiator.head;for(;null!==e;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e.qt&&(e.vmKind!==Hu&&null!=e.Mt.unbinding&&(t=O(...e.Mt.unbinding.map(fd,e))),e.Pt.oe&&(e.debug&&e.logger.trace("unbinding()"),t=O(t,e.viewModel.unbinding(e.$initiator,e.parent)))),h(t)&&(this.Gt(),this.re(),t.then(()=>{this.le()}).catch(t=>{this.Kt(t)})),t=void 0,e=e.next;this.le()}}re(){++this.Ft}le(){if(0===--this.Ft){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.qt=!1,t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.qt=!1,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case Wu:case Uu:return this.definition.name===t;case Hu:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return this.vmKind===Uu&&(vd(t,Ld,this),vd(t,this.definition.key,this)),this.host=t,this.mountTarget=Bu,this}setShadowRoot(t){return this.vmKind===Uu&&(vd(t,Ld,this),vd(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=ju,this}setLocation(t){return this.vmKind===Uu&&(vd(t,Ld,this),vd(t,this.definition.key,this)),this.location=t,this.mountTarget=Lu,this}release(){this.state|=Zu}dispose(){(this.state&td)!==td&&(this.state|=td,this.Pt.he&&this.Dt.dispose(),null!==this.children&&(this.children.forEach(nd),this.children=null),this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.Dt&&(Ou.delete(this.Dt),this.Dt=null),this.Dt=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.Pt.ae&&!0===this.Dt.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}}const Ou=new WeakMap,Mu=0,Bu=1,ju=2,Lu=3,Nu=Rh({none:Mu,host:Bu,shadowRoot:ju,location:Lu}),Du=Ft(uo);function Vu(t,e,s){const i=e.bindables,n=Eh(i),r=n.length;if(0===r)return;const o=t.container.get(ja),a="propertiesChanged"in s,h=t.vmKind===Hu?void 0:t.container.get(Du),l=a?(()=>{let e={},i=!1,n=0;const r=()=>{i||(i=!0,oo(()=>{i=!1;const o=e;e={},n=0,t.isBound&&(s.propertiesChanged?.(o),n>0&&r())}))};return(t,s,i)=>{e[t]={newValue:s,oldValue:i},n++,r()}})():Ot;for(let e=0;e<r;++e){const r=n[e],c=i[r],u=c.callback,d=o.getObserver(s,r);if(c.set!==Ot&&!0!==d.useCoercer?.(c.set,h))throw Kh(507,r);if(null!=s[u]||null!=s.propertyChanged||a){const e=(e,i)=>{t.isBound&&(s[u]?.(e,i),s.propertyChanged?.(r,e,i),l(r,e,i))};if(!0!==d.useCallback?.(e))throw Kh(508,r)}}}const Fu=new Map,qu=t=>{let e=Fu.get(t);return null==e&&(e=new Te(t,0),Fu.set(t,e)),e};function _u(t,e,s,i){const n=e.get(ja),r=e.get(Je),o=s.watches,a=t.vmKind===Uu?t.scope:Lr.create(i,null,!0),h=o.length;let l,c,u,d,f=0;for(;h>f;++f){if(({expression:l,callback:c,flush:d}=o[f]),c=p(c)?c:Reflect.get(i,c),!p(c))throw Kh(506,c);p(l)?t.addBinding(new Eu(i,n,l,c,d)):(u=g(l)?r.parse(l,Dh):qu(l),t.addBinding(new Iu(a,e,n,u,c,d)))}}class zu{constructor(t){this.ce="define"in t,this.$t="hydrating"in t,this.Wt="hydrated"in t,this.jt="created"in t,this.Ut="binding"in t,this.Qt="bound"in t,this.Jt="attaching"in t,this.ne="attached"in t,this.ee="detaching"in t,this.oe="unbinding"in t,this.he="dispose"in t,this.ae="accept"in t}}zu.none=new zu({});const Ku={mode:"open"},Uu="customElement",Wu="customAttribute",Hu="synthetic",Gu=0,Xu=1,Yu=2,Qu=4,Ju=8,Zu=16,td=32,ed=Yh("IController"),sd=Yh("IHydrationContext");class id{constructor(t,e,s){this.instruction=e,this.parent=s,this.controller=t}}function nd(t){t.dispose()}function rd(t){t.instance.created(this.Dt,this)}function od(t){t.instance.hydrating(this.Dt,this)}function ad(t){t.instance.hydrated(this.Dt,this)}function hd(t){return t.instance.binding(this.Dt,this.$initiator,this.parent)}function ld(t){return t.instance.bound(this.Dt,this.$initiator,this.parent)}function cd(t){return t.instance.attaching(this.Dt,this.$initiator,this.parent)}function ud(t){return t.instance.attached(this.Dt,this.$initiator)}function dd(t){return t.instance.detaching(this.Dt,this.$initiator,this.parent)}function fd(t){return t.instance.unbinding(this.Dt,this.$initiator,this.parent)}let pd,gd,md;const vd=Rl.set,bd=Yh("IEventTarget",t=>t.cachedCallback(t=>t.has(Kd,!0)?t.get(Kd).host:t.get(xl).document)),wd=Yh("IRenderLocation"),yd=Yh("ICssClassMapping"),kd=new WeakMap;function $d(t){if(kd.has(t))return kd.get(t);let e=0,s=t.nextSibling;for(;null!==s;){if(8===s.nodeType)switch(s.textContent){case"au-start":++e;break;case"au-end":if(0===e--)return s}s=s.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=Vd(t,{optional:!0});if(null==e)return null;if(e.mountTarget===Nu.shadowRoot)return $d(e.host)}return t.parentNode}function Cd(t){if(Td(t))return t;const e=t.ownerDocument.createComment("au-end"),s=e.$start=t.ownerDocument.createComment("au-start"),i=t.parentNode;return null!==i&&(i.replaceChild(e,t),i.insertBefore(s,e)),e}function Td(t){return"au-end"===t.textContent}class xd{get firstChild(){return this.ue}get lastChild(){return this.fe}constructor(t,e){this.platform=t,this.next=void 0,this.de=!1,this.me=!1,this.ref=null;const s=(this.f=e).querySelectorAll("au-m");let i,n,r=0,o=s.length,a=this.t=Array(o);for(;o>r;)n=s[r],i=n.nextSibling,n.remove(),8===i.nodeType&&(n=i,(i=i.nextSibling).$start=n),a[r]=i,++r;const h=e.childNodes,l=this.childNodes=Array(o=h.length);for(r=0;o>r;)l[r]=h[r],++r;this.ue=e.firstChild,this.fe=e.lastChild}findTargets(){return this.t}insertBefore(t){if(this.me&&this.ref)this.addToLinked();else{const e=t.parentNode;if(this.de){let s,i=this.ue;const n=this.fe;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.de=!0,t.parentNode.insertBefore(this.f,t)}}appendTo(t,e=!1){if(this.de){let e,s=this.ue;const i=this.fe;for(;null!=s&&(e=s.nextSibling,t.appendChild(s),s!==i);)s=e}else this.de=!0,e||t.appendChild(this.f)}remove(){if(this.de){this.de=!1;const t=this.f,e=this.fe;let s,i=this.ue;for(;null!==i&&(s=i.nextSibling,t.appendChild(i),i!==e);)i=s}}addToLinked(){const t=this.ref,e=t.parentNode;if(this.de){let s,i=this.ue;const n=this.fe;for(;null!=i&&(s=i.nextSibling,e.insertBefore(i,t),i!==n);)i=s}else this.de=!0,e.insertBefore(this.f,t)}unlink(){this.me=!1,this.next=void 0,this.ref=void 0}link(t){this.me=!0,Td(t)?this.ref=t:(this.next=t,this.ge())}ge(){void 0!==this.next?this.ref=this.next.firstChild:this.ref=void 0}}const Ad=(t,e,s=t.get(xl))=>(tl(t,s.HTMLElement,tl(t,s.Element,tl(t,Sl,new St("ElementResolver",e)))),t),Rd=new WeakMap;class Sd{get type(){return"custom-element"}constructor(t,e,s,i,n,r,o,a,h,l,c,u,d,f,p,g,m,v,b){this.Type=t,this.name=e,this.aliases=s,this.key=i,this.capture=n,this.template=r,this.instructions=o,this.dependencies=a,this.injectable=h,this.needsCompile=l,this.surrogates=c,this.bindables=u,this.containerless=d,this.shadowOptions=f,this.hasSlots=p,this.enhance=g,this.watches=m,this.strict=v,this.processContent=b}static create(t,e=null){if(null===e){const s=t;if(g(s))throw Kh(761,t);const i=G("name",s,Dd);e=p(s.Type)?s.Type:_d($(i));for(const t of Object.values(Hh.from(s.bindables)))Hh.i(t,e);return new Sd(e,i,A(s.aliases),G("key",s,()=>Nd(i)),W("capture",s,e,Od),W("template",s,e,Id),A(s.instructions),A(Fd(e,"dependencies"),s.dependencies),G("injectable",s,Id),G("needsCompile",s,Md),A(s.surrogates),Hh.from(Fd(e,"bindables"),s.bindables),W("containerless",s,e,Od),G("shadowOptions",s,Id),G("hasSlots",s,Od),G("enhance",s,Od),G("watches",s,Bd),G("strict",s,Pd),H("processContent",e,Id))}if(g(t))return new Sd(e,t,A(Fd(e,"aliases"),e.aliases),Nd(t),H("capture",e,Od),H("template",e,Id),A(Fd(e,"instructions"),e.instructions),A(Fd(e,"dependencies"),e.dependencies),H("injectable",e,Id),H("needsCompile",e,Md),A(Fd(e,"surrogates"),e.surrogates),Hh.from(...Hh.getAll(e),Fd(e,"bindables"),e.bindables),H("containerless",e,Od),H("shadowOptions",e,Id),H("hasSlots",e,Od),H("enhance",e,Od),A(El.getDefinitions(e),e.watches),H("strict",e,Pd),H("processContent",e,Id));const s=G("name",t,Dd);for(const s of Object.values(Hh.from(t.bindables)))Hh.i(s,e);return new Sd(e,s,A(Fd(e,"aliases"),t.aliases,e.aliases),Nd(s),W("capture",t,e,Od),W("template",t,e,Id),A(Fd(e,"instructions"),t.instructions,e.instructions),A(Fd(e,"dependencies"),t.dependencies,e.dependencies),W("injectable",t,e,Id),W("needsCompile",t,e,Md),A(Fd(e,"surrogates"),t.surrogates,e.surrogates),Hh.from(...Hh.getAll(e),Fd(e,"bindables"),e.bindables,t.bindables),W("containerless",t,e,Od),W("shadowOptions",t,e,Id),W("hasSlots",t,e,Od),W("enhance",t,e,Od),A(t.watches,El.getDefinitions(e),e.watches),W("strict",t,e,Pd),W("processContent",t,e,Id))}static getOrCreate(t){if(t instanceof Sd)return t;if(Rd.has(t))return Rd.get(t);const e=Sd.create(t);return Rd.set(t,e),yh(e,e.Type,Ld),e}register(t,e){const s=this.Type,i="string"==typeof e?Nd(e):this.key,n=this.aliases;t.has(i,!1)?console.warn(Kh(153,this.name)):t.register(t.has(s,!1)?null:Qh(s,s),Jh(s,i),...n.map(t=>Jh(s,Nd(t))))}toString(){return`au:ce:${this.name}`}}const Ed={name:void 0,searchParents:!1,optional:!1},Id=()=>null,Pd=()=>{},Od=()=>!1,Md=()=>!0,Bd=()=>It,jd="custom-element",Ld=z(jd),Nd=t=>`${Ld}:${t}`,Dd=(t=>()=>"unnamed-"+ ++t)(0),Vd=(t,e=Ed)=>{if(void 0===e.name&&!0!==e.searchParents){const s=Rl.get(t,Ld);if(null===s){if(!0===e.optional)return null;throw Kh(762,t)}return s}if(void 0!==e.name){if(!0!==e.searchParents){const s=Rl.get(t,Ld);if(null===s)throw Kh(763,t);return s.is(e.name)?s:void 0}let s=t,i=!1;for(;null!==s;){const t=Rl.get(s,Ld);if(null!==t&&(i=!0,t.is(e.name)))return t;s=$d(s)}if(i)return;throw Kh(764,t)}let s=t;for(;null!==s;){const t=Rl.get(s,Ld);if(null!==t)return t;s=$d(s)}throw Kh(765,t)},Fd=(t,e)=>bh($h(e),t),qd=t=>{const e=bh(Ld,t)??el(t,jd,Sd.create);if(null==e)throw Kh(760,t);return e},_d=function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(s,i=e){const n=class{};return t.value=s,Bh(n,"name",t),i!==e&&Sh(n.prototype,i),n}}(),zd=Rh({name:Ld,keyFrom:Nd,isType:t=>p(t)&&(wh(Ld,t)||t.$au?.type===jd),for:Vd,define:(t,e)=>{const s=Sd.create(t,e),i=s.Type;return yh(s,i,Ld,_),i},getDefinition:qd,annotate:(t,e,s)=>{yh(s,t,$h(e))},getAnnotation:Fd,generateName:Dd,createInjectable:()=>{const t={$isInterface:!1,register:()=>({$isResolver:!0,resolve:(e,s)=>s.has(t,!0)?s.get(t):null})};return t},generateType:_d,find(t,e){const s=t.find(jd,e);return null==s?null:bh(Ld,s)??el(s,jd,Sd.create)??null}}),Kd=Yh("IAppRoot");class Ud{get controller(){return this.P}constructor(t,e,s,i=!1){this.config=t,this.container=e,this.pe=void 0,this.ve=i;const n=this.host=t.host;s.prepare(this),tl(e,bd,new St("IEventTarget",n)),Ad(e,n,this.platform=this.xe(e,n)),this.pe=P(this.ye("creating"),()=>{0!=!t.allowActionlessForm&&n.addEventListener("submit",t=>{const e=t.target,s=!e.getAttribute("action");"FORM"===e.tagName&&s&&t.preventDefault()},!1);const s=i?e:e.createChild(),r=t.component;let o;p(r)?(o=s.invoke(r),Zh(r,o)):o=t.component;const a={hydrate:!1,projections:null},h=i?Sd.create({name:Dd(),template:this.host,enhance:!0,strict:t.strictBinding}):void 0,l=this.P=Pu.$el(s,o,n,a,h);return l.hE(a),P(this.ye("hydrating"),()=>(l.hS(),P(this.ye("hydrated"),()=>{l.hC(),this.pe=void 0})))})}activate(){return P(this.pe,()=>P(this.ye("activating"),()=>P(this.P.activate(this.P,null,void 0),()=>this.ye("activated"))))}deactivate(){return P(this.ye("deactivating"),()=>P(this.P.deactivate(this.P,null),()=>this.ye("deactivated")))}ye(t){const e=this.container,s=this.ve&&!e.has($l,!1)?[]:e.getAll($l);return O(...s.reduce((e,s)=>(s.slot===t&&e.push(s.run()),e),[]))}xe(t,e){let s;if(t.has(xl,!1))s=t.get(xl);else{if(null===e.ownerDocument.defaultView)throw Kh(769);s=new dh(e.ownerDocument.defaultView),t.register(Zh(xl,s))}return s}dispose(){this.P?.dispose()}}const Wd=Yh("IAurelia");class Hd{get isRunning(){return this.ir}get isStarting(){return this.we}get isStopping(){return this.be}get root(){if(null==this.ke){if(null==this.next)throw Kh(767);return this.next}return this.ke}constructor(t=$t.createContainer()){if(this.container=t,this.ir=!1,this.we=!1,this.be=!1,this.ke=void 0,this.next=void 0,this.Ce=void 0,this.Be=void 0,t.has(Wd,!0)||t.has(Hd,!0))throw Kh(768);tl(t,Wd,new St("IAurelia",this)),tl(t,Hd,new St("Aurelia",this)),tl(t,Kd,this.Se=new St("IAppRoot"))}register(...t){return this.container.register(...t),this}app(t){return this.next=new Ud(t,this.container,this.Se),this}enhance(t){const e=t.container??this.container.createChild(),s=tl(e,Kd,new St("IAppRoot")),i=new Ud({host:t.host,component:t.component},e,s,!0);return P(i.activate(),()=>i)}async waitForIdle(){const t=this.root.platform;await t.domQueue.yield(),await t.taskQueue.yield()}start(t=this.next){if(null==t)throw Kh(770);return h(this.Ce)?this.Ce:this.Ce=P(this.stop(),()=>(Rl.hideProp||Reflect.set(t.host,"$aurelia",this),this.Se.prepare(this.ke=t),this.we=!0,P(t.activate(),()=>{this.ir=!0,this.we=!1,this.Ce=void 0,this.Ae(t,"au-started",t.host)})))}stop(t=!1){if(h(this.Be))return this.Be;if(!0===this.ir){const e=this.ke;return this.ir=!1,this.be=!0,this.Be=P(e.deactivate(),()=>P(Zr||(Yr.length>0||Jr>0?Zr??=new Promise((t,e)=>{eo=t,so=e}):Hr.then(()=>(Yr.length>0||Jr>0)&&(Zr??=new Promise((t,e)=>{eo=t,so=e})))),()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.ke=void 0,this.Se.dispose(),this.be=!1,this.Be=void 0,this.Ae(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.be)throw Kh(771);this.container.dispose()}Ae(t,e,s){const i=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(i)}}const Gd=Yh("ISVGAnalyzer",t=>t.singleton(Xd));class Xd{isStandardSvgAttribute(t,e){return!1}}class Yd{constructor(){this.fns=[],this.Le=m(),this.Me=m(),this.svg=at(Gd),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(t){let e,s,i,n;for(i in t)for(n in e=t[i],s=this.Le[i]??=m(),e){if(void 0!==s[n])throw Qd(n,i);s[n]=e[n]}}useGlobalMapping(t){const e=this.Me;for(const s in t){if(void 0!==e[s])throw Qd(s,"*");e[s]=t[s]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some(s=>s(t,e))}map(t,e){return this.Le[t.nodeName]?.[e]??this.Me[e]??(Oh(t,e,this.svg)?e:null)}}function Qd(t,e){return Kh(719,t,e)}Yd.register=V(Mi);const Jd={register(t){t.register(hr,Yd,tf)}};class Zd{constructor(t,e,s){this.attrs=t,this.bindables=e,this.primary=s}}class tf{constructor(){this.De=new WeakMap,this.Pe=new WeakMap}el(t,e){let s=this.De.get(t);return null==s&&this.De.set(t,s=new ef),e in s.qe?s.qe[e]:s.qe[e]=zd.find(t,e)}attr(t,e){let s=this.De.get(t);return null==s&&this.De.set(t,s=new ef),e in s.Ie?s.Ie[e]:s.Ie[e]=Vl.find(t,e)}bindables(t){let e=this.Pe.get(t);if(null==e){const s=t.bindables,i=m();let n,r,o,a,h=!1;for(r in s){if(n=s[r],a=n.attribute,!0===n.primary){if(h)throw Kh(714,t);h=!0,o=n}else h||null!=o||(o=n);i[a]=Gh.create(r,n)}null==n&&"custom-attribute"===t.type&&(o=i.value=Gh.create("value",{mode:t.defaultBindingMode??fh})),this.Pe.set(t,e=new Zd(i,s,o??null))}return e}}tf.register=V(br);class ef{constructor(){this.qe=m(),this.Ie=m()}}const sf=m();class nf{static forNs(t){return sf[t]??=new nf(t)}constructor(t){this.ns=t,this.type=_h|zh}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,s){null==t?e.removeAttributeNS(this.ns,s):e.setAttributeNS(this.ns,s,t)}}Nc(nf);class rf{constructor(){this.type=_h|zh}getValue(t,e){return t.getAttribute(e)}setValue(t,e,s){null==t?e.removeAttribute(s):e.setAttribute(s,t)}}Nc(rf);const of=new rf;class af{static _e(t){const e=[];if(0===t.length)return e;const s=t.length;let i,n=0;for(;s>n;)i=t[n],i.selected&&(e[e.length]=Ah.call(i,"model")?i.model:i.value),++n;return e}static Ve(t,e){return t===e}constructor(t,e,s,i){this.type=_h|qh|zh,this.v=void 0,this.ov=void 0,this.Fe=!1,this.He=void 0,this.Oe=void 0,this.iO=!1,this.ht=!1,this.lt=t,this.oL=i,this.cf=s}getValue(){return this.iO?this.v:this.lt.multiple?af._e(this.lt.options):this.lt.value}setValue(t){this.ov=this.v,this.v=t,this.Fe=t!==this.ov,this.$e(t instanceof Array?t:null),this.gt()}gt(){this.Fe&&(this.Fe=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const t=this.v,e=this.lt,s=l(t),i=e.matcher??af.Ve,n=e.options;let r=n.length;for(;r-- >0;){const e=n[r],o=Ah.call(e,"model")?e.model:e.value;e.selected=s?-1!==t.findIndex(t=>!!i(o,t)):!!i(o,t)}}syncValue(){const t=this.lt,e=t.options,s=e.length,i=this.v;let n=0;if(t.multiple){if(!(i instanceof Array))return!0;let r;const o=t.matcher||af.Ve,a=[];for(;n<s;)r=e[n],r.selected&&a.push(Ah.call(r,"model")?r.model:r.value),++n;let h;for(n=0;n<i.length;)h=i[n],-1===a.findIndex(t=>!!o(h,t))?i.splice(n,1):++n;for(n=0;n<a.length;)h=a[n],-1===i.findIndex(t=>!!o(h,t))&&i.push(h),++n;return!1}let r,o=null;for(;n<s;){if(r=e[n],r.selected){o=Ah.call(r,"model")?r.model:r.value;break}++n}return this.ov=this.v,this.v=o,!0}ct(){(this.Oe=Ac(this.lt,this.Ne.bind(this))).observe(this.lt,{childList:!0,subtree:!0,characterData:!0}),this.$e(this.v instanceof Array?this.v:null),this.iO=!0}ut(){this.Oe.disconnect(),this.He?.unsubscribe(this),this.Oe=this.He=void 0,this.iO=!1}$e(t){if(this.He?.unsubscribe(this),this.He=void 0,null!=t){if(!this.lt.multiple)throw Kh(654);(this.He=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.Tt()}Ne(t){this.syncOptions(),this.syncValue()&&this.Tt()}Tt(){const t=this.ov;this.ov=this.v,this.subs.notify(this.v,t)}}Lc(af),go(af,null);class hf{constructor(t){this.obj=t,this.type=_h|zh,this.v="",this.ov="",this.styles={},this.version=0,this.Fe=!1}getValue(){return this.obj.style.cssText}setValue(t){this.v=t,this.Fe=t!==this.ov,this.gt()}We(t){const e=[],s=/url\([^)]+$/;let i,n,r,o,a=0,h="";for(;a<t.length;)i=t.indexOf(";",a),-1===i&&(i=t.length),h+=t.substring(a,i),a=i+1,s.test(h)?h+=";":(n=h.indexOf(":"),r=h.substring(0,n).trim(),o=h.substring(n+1).trim(),e.push([r,o]),h="");return e}je(t){let e,s;const i=[];for(s in t)if(e=t[s],null!=e)if(g(e)){if(s.startsWith("--")){i.push([s,e]);continue}i.push([C(s),e])}else i.push(...this.ze(e));return i}Ue(t){const e=t.length;if(e>0){const s=[];let i=0;for(;e>i;++i)s.push(...this.ze(t[i]));return s}return It}ze(t){return g(t)?this.We(t):t instanceof Array?this.Ue(t):t instanceof Object?this.je(t):It}gt(){if(this.Fe){this.Fe=!1;const t=this.v,e=this.styles,s=this.ze(t);let i,n,r,o,a=this.version;this.ov=t;let h=0;const l=s.length;for(;h<l;++h)n=s[h],r=n[0],o=n[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(i in a-=1,e)Ah.call(e,i)&&e[i]===a&&this.obj.style.removeProperty(i)}}setProperty(t,e){let s="";null!=e&&p(e.indexOf)&&e.includes("!important")&&(s="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,s)}bind(){this.v=this.ov=this.obj.style.cssText}}Nc(hf);class lf{constructor(t,e,s){this.type=_h|qh|zh,this.v="",this.ov="",this.Fe=!1,this.ht=!1,this.lt=t,this.k=e,this.cf=s}getValue(){return this.v}setValue(t){v(t,this.v)||(this.ov=this.v,this.v=t,this.Fe=!0,this.cf.readonly||this.gt())}gt(){this.Fe&&(this.Fe=!1,this.lt[this.k]=this.v??this.cf.default,this.Tt())}handleEvent(){this.ov=this.v,this.v=this.lt[this.k],this.ov!==this.v&&(this.Fe=!1,this.Tt())}ct(){this.v=this.ov=this.lt[this.k]}Tt(){const t=this.ov;this.ov=this.v,this.subs.notify(this.v,t)}}Lc(lf),go(lf,null);const cf=(()=>{const t="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",s="http://www.w3.org/2000/xmlns/";return Sh(m(),{"xlink:actuate":["actuate",t],"xlink:arcrole":["arcrole",t],"xlink:href":["href",t],"xlink:role":["role",t],"xlink:show":["show",t],"xlink:title":["title",t],"xlink:type":["type",t],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",s],"xmlns:xlink":["xlink",s]})})(),uf=new Oa;uf.type=_h|zh;class df{constructor(){this.allowDirtyCheck=!0,this.Ge=m(),this.Xe=m(),this.Ke=m(),this.Qe=m(),this.Ye=at(Tt),this.p=at(xl),this.Ze=at(Sa),this.svg=at(Gd);const t=["change","input"],e={events:t,default:""};this.useConfig({INPUT:{value:e,valueAsNumber:{events:t,default:0},checked:{type:gf,events:t},files:{events:t,readonly:!0}},SELECT:{value:{type:af,events:["change"],default:""}},TEXTAREA:{value:e}});const s={events:["change","input","blur","keyup","paste"],default:""},i={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:i,scrollLeft:i,textContent:s,innerHTML:s}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(t,e){return t instanceof this.p.Node}useConfig(t,e,s){const i=this.Ge;let n;if(g(t))n=i[t]??=m(),null==n[e]?n[e]=s:ff(t,e);else for(const s in t){n=i[s]??=m();const r=t[s];for(e in r)null==n[e]?n[e]=r[e]:ff(s,e)}}useConfigGlobal(t,e){const s=this.Xe;if("object"==typeof t)for(const e in t)null==s[e]?s[e]=t[e]:ff("*",e);else null==s[t]?s[t]=e:ff("*",t)}getAccessor(t,e,s){if(e in this.Qe||e in(this.Ke[t.tagName]??Pt))return this.getObserver(t,e,s);switch(e){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return of;default:{const s=cf[e];return void 0!==s?nf.forNs(s[1]):Oh(t,e,this.svg)?of:uf}}}overrideAccessor(t,e){let s;if(g(t))s=this.Ke[t]??=m(),s[e]=!0;else for(const e in t)for(const i of t[e])s=this.Ke[e]??=m(),s[i]=!0}overrideAccessorGlobal(...t){for(const e of t)this.Qe[e]=!0}getNodeObserverConfig(t,e){return this.Ge[t.tagName]?.[e]??this.Xe[e]}getNodeObserver(t,e,s){const i=this.Ge[t.tagName]?.[e]??this.Xe[e];let n;return null!=i?(n=new(i.type??lf)(t,e,i,s,this.Ye),n.doNotCache||(za(t)[e]=n),n):null}getObserver(t,e,s){switch(e){case"class":return new Dc(t);case"css":case"style":return new hf(t)}const i=this.getNodeObserver(t,e,s);if(null!=i)return i;const n=cf[e];if(void 0!==n)return nf.forNs(n[1]);if(Oh(t,e,this.svg))return of;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.Ze.createProperty(t,e);throw Kh(652,e)}return new Ma(t,e)}}function ff(t,e){throw Kh(653,t,e)}function pf(t,e){return t===e}df.register=V(La);class gf{constructor(t,e,s,i){this.type=_h|qh|zh,this.v=void 0,this.ov=void 0,this.Je=void 0,this.ti=void 0,this.ht=!1,this.lt=t,this.oL=i,this.cf=s}getValue(){return this.v}setValue(t){const e=this.v;t!==e&&(this.v=t,this.ov=e,this.ei(),this.ii(),this.Tt())}handleCollectionChange(){this.ii()}handleChange(t,e){this.ii()}ii(){const t=this.v,e=this.lt,s=Ah.call(e,"model")?e.model:e.value,i="radio"===e.type,n=void 0!==e.matcher?e.matcher:pf;if(i)e.checked=!!n(t,s);else if(!0===t)e.checked=!0;else{let i=!1;if(l(t))i=-1!==t.findIndex(t=>!!n(t,s));else if(t instanceof Set){for(const e of t)if(n(e,s)){i=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(n(t,s)&&!0===r){i=!0;break}}e.checked=i}}handleEvent(){let t=this.ov=this.v;const e=this.lt,s=Ah.call(e,"model")?e.model:e.value,i=e.checked,n=void 0!==e.matcher?e.matcher:pf;if("checkbox"===e.type){if(l(t)){const e=t.findIndex(t=>!!n(t,s));return void(i&&-1===e?t.push(s):i||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===n(e,s)){r=e;break}return void(i&&r===e?t.add(s):i||r===e||t.delete(r))}if(t instanceof Map){let e;for(const i of t){const t=i[0];if(!0===n(t,s)){e=t;break}}return void t.set(e,i)}t=i}else{if(!i)return;t=s}this.v=t,this.Tt()}ct(){this.ei()}ut(){this.v=this.ov=void 0,this.Je?.unsubscribe(this),this.ti?.unsubscribe(this),this.Je=this.ti=void 0}Tt(){mf=this.ov,this.ov=this.v,this.subs.notify(this.v,mf),mf=void 0}ei(){const t=this.lt;(this.ti??=t.$observers?.model??t.$observers?.value)?.subscribe(this),this.Je?.unsubscribe(this),this.Je=void 0,"checkbox"===t.type&&(this.Je=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))?.subscribe(this)}}let mf;Lc(gf),go(gf,null);class vf{bind(t,e){if(!(e instanceof cc))throw Kh(9994,e);e.useTargetObserver(of)}}vf.$au={type:il,name:"attr"};class bf{bind(t,e){if(!("handleEvent"in e))throw Kh(801);e.self=!0}unbind(t,e){e.self=!1}}bf.$au={type:il,name:"self"};class wf{constructor(){this.oL=at(ja),this.si=at(La)}bind(t,e,...s){if(!(this.si instanceof df))throw Kh(9993);if(0===s.length)throw Kh(802);if(!(e instanceof cc&&e.mode&mh))throw Kh(803);const i=this.si.getNodeObserverConfig(e.target,e.targetProperty);if(null==i)throw Kh(9992,e);const n=this.si.getNodeObserver(e.target,e.targetProperty,this.oL);n.useConfig({readonly:i.readonly,default:i.default,events:s}),e.useTargetObserver(n)}}wf.$au={type:il,name:"updateTrigger"};class yf{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.ni=!1,this.ri=0,this.oi=at($c),this.l=at(wd)}attaching(t,e){return this.li(this.value)}detaching(t,e){return this.ni=!0,P(this.pending,()=>{this.ni=!1,this.pending=void 0,this.view?.deactivate(t,this.$controller)})}valueChanged(t,e){if(this.$controller.isActive)return(t=!!t)!=(e=!!e)?this.li(t):void 0}li(t){const e=this.view,s=this.$controller,i=this.ri++,n=()=>!this.ni&&this.ri===i+1;let r;return P(this.pending,()=>this.pending=P(e?.deactivate(e,s),()=>{if(n()&&(r=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.oi.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:this.elseFactory?.create(),null!=r))return r.setLocation(this.l),P(r.activate(r,s,s.scope),()=>{n()&&(this.pending=void 0)})}))}dispose(){this.ifView?.dispose(),this.elseView?.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}yf.$au={type:Ol,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:t=>""===t||!!t&&"false"!==t}}};class kf{constructor(){this.f=at($c)}link(t,e,s,i){const n=t.children,r=n[n.length-1];if(r instanceof yf)r.elseFactory=this.f;else{if(!(r.viewModel instanceof yf))throw Kh(810);r.viewModel.elseFactory=this.f}}}function $f(t){t.dispose()}kf.$au={type:"custom-attribute",name:"else",isTemplateController:!0};const Cf=["BindingBehavior","ValueConverter"];class Tf{constructor(){this.views=[],this.key=null,this.hi=[],this.ai=[],this.ci=[],this.ui=new Map,this.fi=void 0,this.di=!1,this.mi=!1,this.gi=null,this.pi=void 0,this.xi=!1,this.l=at(wd),this.yi=at(ed),this.f=at($c),this.wi=at(If);const t=at(an).props[0].props[0];if(void 0!==t){const{to:e,value:s,command:i}=t;if("key"!==e)throw Kh(776,e);if(null===i)this.key=s;else{if("bind"!==i)throw Kh(775,i);this.key=at(Je).parse(s,Dh)}}}binding(t,e){const s=this.yi.bindings,i=s.length;let n,r,o=0;for(;i>o;++o)if(n=s[o],n.target===this&&"items"===n.targetProperty){r=this.forOf=n.ast,this.bi=n;let t=r.iterable;for(;null!=t&&Cf.includes(t.$kind);)t=t.expression,this.di=!0;this.gi=t;break}this.ki();const a=r.declaration;(this.xi="ArrayDestructuring"===a.$kind||"ObjectDestructuring"===a.$kind)||(this.local=Fr(a,this.$controller.scope,n,null))}attaching(t,e){return this.Ci(),this.Bi(void 0),this.Si(t,this.pi??It)}detaching(t,e){return this.ki(),this.Ai(t)}unbinding(t,e){this.ui.clear()}itemsChanged(){this.$controller.isActive&&(this.ki(),this.Ci(),this.Bi(void 0),this.Ri(void 0))}handleCollectionChange(t,e){const s=this.$controller;if(s.isActive){if(this.di){if(this.mi)return;return this.mi=!0,this.items=Fr(this.forOf.iterable,s.scope,this.bi,null),void(this.mi=!1)}this.Ci(),this.Bi(null===this.key?e:void 0),this.Ri(e)}}Ri(t){const e=this.views;this.hi=e.slice();const s=e.length,i=this.key,n=null!==i,r=this.ci,o=this.ai;if(n||void 0===t){const e=this.local,a=this.pi.length,h=this.forOf.declaration,l=this.bi,c=this.xi;t=po(a);let u=0;if(0===s)for(;u<a;++u)t[u]=-2;else if(0===a)for(u=0;u<s;++u)t.deletedIndices.push(u),t.deletedItems.push(Ff(c,h,r[u],l,e));else if(n){const n=Array(s);for(u=0;u<s;++u)n[u]=qf(c,i,h,r[u],l,e);const d=Array(s);for(u=0;u<a;++u)d[u]=qf(c,i,h,o[u],l,e);for(u=0;u<a;++u)n.includes(d[u])?t[u]=n.indexOf(d[u]):t[u]=-2;for(u=0;u<s;++u)d.includes(n[u])||(t.deletedIndices.push(u),t.deletedItems.push(Ff(c,h,r[u],l,e)))}else{for(u=0;u<a;++u)r.includes(o[u])?t[u]=r.indexOf(o[u]):t[u]=-2;for(u=0;u<s;++u)o.includes(r[u])||(t.deletedIndices.push(u),t.deletedItems.push(Ff(c,h,r[u],l,e)))}}if(t.deletedIndices.length>0){const e=P(this.Ti(t),()=>this.Ei(t));h(e)&&e.catch(Mh)}else this.Ei(t)}ki(){const t=this.$controller.scope;let e,s=this.Li,i=this.di;i&&(s=this.Li=Fr(this.gi,t,this.bi,null)??null,i=this.di=!v(this.items,s));const n=this.fi;if(this.$controller.isActive){const t=i?s:this.items;e=this.fi=this.wi.resolve(t).getObserver?.(t),n!==e&&(n?.unsubscribe(this),e?.subscribe(this))}else n?.unsubscribe(this),this.fi=void 0}Bi(t){const e=this.ai;this.ci=e.slice();const s=this.pi,i=s.length,n=this.ai=Array(s.length),r=this.ui,o=new Map,a=this.$controller.scope,h=this.bi,l=this.forOf,c=this.local,u=this.xi;if(void 0===t){const t=this.key;if(null!==t){const e=Array(i);if("string"==typeof t)for(let n=0;n<i;++n)e[n]=s[n][t];else for(let n=0;n<i;++n){const i=zf(s[n],l,a,h,c,u);Vf(u,l.declaration,i,h,c,s[n]),e[n]=Fr(t,i,h,null)}for(let t=0;t<i;++t)n[t]=_f(r,o,e[t],s[t],l,a,h,c,u)}else for(let t=0;t<i;++t)n[t]=_f(r,o,s[t],s[t],l,a,h,c,u)}else{const r=e.length;for(let o=0;o<i;++o){const i=t[o];n[o]=i>=0&&i<r?e[i]:zf(s[o],l,a,h,c,u),Vf(u,l.declaration,n[o],h,c,s[o])}}r.clear(),this.ui=o}Ci(){const t=this.items;if(l(t))return void(this.pi=t.slice(0));const e=[];this.wi.resolve(t).iterate(t,(t,s)=>{e[s]=t}),this.pi=e}Si(t,e){let s,i,n,r;const{$controller:o,f:a,l,ai:c}=this,u=e.length,d=this.views=Array(u);for(let e=0;e<u;++e)n=d[e]=a.create().setLocation(l),n.nodes.unlink(),r=c[e],Ef(r.overrideContext,e,u),i=n.activate(t??n,o,r),h(i)&&(s??=[]).push(i);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}Ai(t){let e,s,i,n=0;const{views:r,$controller:o}=this,a=r.length;for(;a>n;++n)i=r[n],i.release(),s=i.deactivate(t??i,o),h(s)&&(e??(e=[])).push(s);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Ti(t){let e,s,i;const{$controller:n,views:r}=this,o=t.deletedIndices.slice().sort(Kf),a=o.length;let l=0;for(;a>l;++l)i=r[o[l]],i.release(),s=i.deactivate(i,n),h(s)&&(e??(e=[])).push(s);for(l=0;a>l;++l)r.splice(o[l]-l,1);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}Ei(t){let e,s,i,n=0;const{$controller:r,f:o,l:a,views:l,ai:c,hi:u}=this,d=t.length;for(;d>n;++n)-2===t[n]&&(i=o.create(),l.splice(n,0,i));if(l.length!==d)throw Kh(814,[l.length,d]);let f=0;for(n=0;n<t.length;++n)-2!==(f=t[n])&&(l[n]=u[f]);const p=function(t){const e=t.length;e>xf&&(xf=e,Af=new Int32Array(e),Rf=new Int32Array(e));let s=0,i=0,n=0,r=0,o=0,a=0,h=0,l=0;for(;r<e;r++)if(i=t[r],-2!==i){if(o=Af[s],n=t[o],-2!==n&&n<i){Rf[r]=o,Af[++s]=r;continue}for(a=0,h=s;a<h;)l=a+h>>1,n=t[Af[l]],-2!==n&&n<i?a=l+1:h=l;n=t[Af[a]],(i<n||-2===n)&&(a>0&&(Rf[r]=Af[a-1]),Af[a]=r)}r=++s;const c=new Int32Array(r);for(i=Af[s-1];s-- >0;)c[s]=i,i=Rf[i];for(;r-- >0;)Af[r]=0;return c}(t);let g,m=p.length-1;for(n=d-1;n>=0;--n)i=l[n],g=l[n+1],-2===t[n]?(i.nodes.link(g?.nodes??a),i.setLocation(a),Ef(c[n].overrideContext,n,d),s=i.activate(i,r,c[n]),h(s)&&(e??(e=[])).push(s)):m<0||n!==p[m]?(i.nodes.link(g?.nodes??a),Ef(i.scope.overrideContext,n,d),i.nodes.insertBefore(i.location)):(Ef(i.scope.overrideContext,n,d),--m);if(void 0!==e)return 1===e.length?e[0]:Promise.all(e)}dispose(){this.views.forEach($f),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let s=0,i=e.length;s<i;++s)if(!0===e[s].accept(t))return!0}}Tf.$au={type:Ol,name:"repeat",isTemplateController:!0,bindables:["items"]};let xf=16,Af=new Int32Array(xf),Rf=new Int32Array(xf);class Sf{get $odd(){return!this.$even}get $even(){return this.$index%2==0}get $first(){return 0===this.$index}get $middle(){return!this.$first&&!this.$last}get $last(){return this.$index===this.$length-1}constructor(t=0,e=1){this.$index=t,this.$length=e}}const Ef=(t,e,s)=>{t.$index=e,t.$length=s},If=Yh("IRepeatableHandlerResolver",t=>t.singleton(Pf));class Pf{constructor(){this.Mi=at(jt(Of))}resolve(t){if(Mf.handles(t))return Mf;if(Bf.handles(t))return Bf;if(jf.handles(t))return jf;if(Lf.handles(t))return Lf;if(Nf.handles(t))return Nf;const e=this.Mi.find(e=>e.handles(t));return void 0!==e?e:Df}}const Of=Yh("IRepeatableHandler"),Mf={handles:l,getObserver:Fa,iterate(t,e){const s=t.length;let i=0;for(;i<s;++i)e(t[i],i,t)}},Bf={handles:c,getObserver:Fa,iterate(t,e){let s,i=0;for(s of t.keys())e(s,i++,t)}},jf={handles:u,getObserver:Fa,iterate(t,e){let s,i=0;for(s of t.entries())e(s,i++,t)}},Lf={handles:t=>"number"==typeof t,iterate(t,e){let s=0;for(;s<t;++s)e(s,s,t)}},Nf={handles:t=>null==t,iterate(){}},Df={handles:t=>!1,iterate(t,e){throw Kh(777,t)}},Vf=(t,e,s,i,n,r)=>{t?Vr(e,s,i,null,r):s.bindingContext[n]=r},Ff=(t,e,s,i,n)=>t?Fr(e,s,i,null):s.bindingContext[n],qf=(t,e,s,i,n,r)=>"string"==typeof e?Ff(t,s,i,n,r)[e]:Fr(e,i,n,null),_f=(t,e,s,i,n,r,o,a,h)=>{let l=t.get(s);if(void 0===l?l=zf(i,n,r,o,a,h):l instanceof Lr?t.delete(s):1===l.length?(l=l[0],t.delete(s)):l=l.shift(),e.has(s)){const t=e.get(s);t instanceof Lr?e.set(s,[t,l]):t.push(l)}else e.set(s,l);return Vf(h,n.declaration,l,o,a,i),l},zf=(t,e,s,i,n,r)=>{if(r){const n=Lr.fromParent(s,new Nr,new Sf);Vr(e.declaration,n,i,null,t)}return Lr.fromParent(s,new Nr(n,t),new Sf)},Kf=(t,e)=>t-e;class Uf{constructor(){this.view=at($c).create().setLocation(at(wd))}valueChanged(t,e){const s=this.$controller,i=this.view.bindings;let n,r=0,o=0;if(s.isActive&&null!=i)for(n=Lr.fromParent(s.scope,void 0===t?{}:t),o=i.length;o>r;++r)i[r].bind(n)}attaching(t,e){const{$controller:s,value:i}=this,n=Lr.fromParent(s.scope,void 0===i?{}:i);return this.view.activate(t,s,n)}detaching(t,e){return this.view.deactivate(t,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}}Uf.$au={type:Ol,name:"with",isTemplateController:!0,bindables:["value"]};class Wf{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this.f=at($c),this.l=at(wd)}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return this.queue(()=>s.activate(t,i,i.scope)),this.queue(()=>this.swap(t,this.value)),this.promise}detaching(t,e){return this.queue(()=>this.view.deactivate(t,this.$controller)),this.promise}dispose(){this.view?.dispose(),this.view=void 0}valueChanged(t,e){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(t){this.queue(()=>this.Di(t))}Di(t){const e=t.isMatch(this.value),s=this.activeCases,i=s.length;if(!e)return i>0&&s[0].id===t.id?this.Pi(null):void 0;if(i>0&&s[0].id<t.id)return;const n=[];let r=t.fallThrough;if(r){const e=this.cases,s=e.indexOf(t);for(let t=s,i=e.length;t<i&&r;t++){const s=e[t];n.push(s),r=s.fallThrough}}else n.push(t);return P(this.Pi(null,n),()=>(this.activeCases=n,this.qi(null)))}swap(t,e){const s=[];let i=!1;for(const t of this.cases)if((i||t.isMatch(e))&&(s.push(t),i=t.fallThrough),s.length>0&&!i)break;const n=this.defaultCase;return 0===s.length&&void 0!==n&&s.push(n),P(this.activeCases.length>0?this.Pi(t,s):void 0,()=>{if(this.activeCases=s,0!==s.length)return this.qi(t)})}qi(t){const e=this.$controller;if(!e.isActive)return;const s=this.activeCases,i=s.length;if(0===i)return;const n=e.scope;return 1===i?s[0].activate(t,n):O(...s.map(e=>e.activate(t,n)))}Pi(t,e=[]){const s=this.activeCases,i=s.length;if(0!==i){if(1===i){const i=s[0];return e.includes(i)?void 0:(s.length=0,i.deactivate(t))}return P(O(...s.reduce((s,i)=>(e.includes(i)||s.push(i.deactivate(t)),s),[])),()=>{s.length=0})}}queue(t){const e=this.promise;let s;s=this.promise=P(P(e,t),()=>{this.promise===s&&(this.promise=void 0)})}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some(e=>e.accept(t))||void 0}}Wf.$au={type:Ol,name:"switch",isTemplateController:!0,bindables:["value"]};let Hf=0;const Gf=["value",{name:"fallThrough",mode:ph,set(t){switch(t){case"true":return!0;case"false":return!1;default:return!!t}}}];class Xf{constructor(){this.id=++Hf,this.fallThrough=!1,this.view=void 0,this.f=at($c),this.Ye=at(ja),this.l=at(wd),this.Ii=at(Wt).scopeTo(`Case-#${this.id}`)}link(t,e,s,i){const n=t.parent,r=n?.viewModel;if(!(r instanceof Wf))throw Kh(815);this.$switch=r,this.linkToSwitch(r)}detaching(t,e){return this.deactivate(t)}isMatch(t){this.Ii.debug("isMatch()");const e=this.value;return l(e)?(void 0===this.fi&&(this.fi=this._i(e)),e.includes(t)):e===t}valueChanged(t,e){l(t)?(this.fi?.unsubscribe(this),this.fi=this._i(t)):void 0!==this.fi&&this.fi.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(t??s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(t??e,this.$controller)}dispose(){this.fi?.unsubscribe(this),this.view?.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}_i(t){const e=this.Ye.getArrayObserver(t);return e.subscribe(this),e}accept(t){return!0===this.$controller.accept(t)||this.view?.accept(t)}}Nl({name:"case",bindables:Gf,isTemplateController:!0},Xf);class Yf extends Xf{linkToSwitch(t){if(void 0!==t.defaultCase)throw Kh(816);t.defaultCase=this}}Nl({name:"default-case",bindables:Gf,isTemplateController:!0},Yf);class Qf{constructor(){this.preSettledTask=null,this.postSettledTask=null,this.f=at($c),this.l=at(wd),this.p=at(xl),this.logger=at(Wt).scopeTo("promise.resolve")}link(t,e,s,i){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e){const s=this.view,i=this.$controller;return P(s.activate(t,i,this.viewScope=Lr.fromParent(i.scope,{})),()=>this.swap(t))}valueChanged(t,e){this.$controller.isActive&&this.swap(null)}swap(t){const e=this.value;if(!h(e))return;const s=this.fulfilled,i=this.rejected,n=this.pending,r=this.viewScope;let o;const a=()=>{O(o=(this.preSettledTask=ao(()=>O(s?.deactivate(t),i?.deactivate(t),n?.activate(t,r)))).result.catch(t=>{throw t}),e.then(a=>{if(this.value!==e)return;const h=()=>{this.postSettlePromise=(this.postSettledTask=ao(()=>O(n?.deactivate(t),i?.deactivate(t),s?.activate(t,r,a)))).result};this.preSettledTask.status===Fh?o.then(h):(this.preSettledTask.cancel(),h())},a=>{if(this.value!==e)return;const h=()=>{this.postSettlePromise=(this.postSettledTask=ao(()=>O(n?.deactivate(t),s?.deactivate(t),i?.activate(t,r,a)))).result};this.preSettledTask.status===Fh?o.then(h):(this.preSettledTask.cancel(),h())}))};this.postSettledTask?.status===Fh?this.postSettlePromise.then(a):(this.postSettledTask?.cancel(),a())}detaching(t,e){return this.preSettledTask?.cancel(),this.postSettledTask?.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller)}dispose(){this.view?.dispose(),this.view=void 0}}Qf.$au={type:Ol,name:"promise",isTemplateController:!0,bindables:["value"]};class Jf{constructor(){this.view=void 0,this.f=at($c),this.l=at(wd)}link(t,e,s,i){ep(t).pending=this}activate(t,e){let s=this.view;if(void 0===s&&(s=this.view=this.f.create().setLocation(this.l)),!s.isActive)return s.activate(s,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}Jf.$au={type:Ol,name:"pending",isTemplateController:!0,bindables:{value:{mode:gh}}};class Zf{constructor(){this.view=void 0,this.f=at($c),this.l=at(wd)}link(t,e,s,i){ep(t).fulfilled=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}Zf.$au={type:Ol,name:"then",isTemplateController:!0,bindables:{value:{mode:mh}}};class tp{constructor(){this.view=void 0,this.f=at($c),this.l=at(wd)}link(t,e,s,i){ep(t).rejected=this}activate(t,e,s){this.value=s;let i=this.view;if(void 0===i&&(i=this.view=this.f.create().setLocation(this.l)),!i.isActive)return i.activate(i,this.$controller,e)}deactivate(t){const e=this.view;if(void 0!==e&&e.isActive)return e.deactivate(e,this.$controller)}detaching(t,e){return this.deactivate(t)}dispose(){this.view?.dispose(),this.view=void 0}}function ep(t){const e=t.parent,s=e?.viewModel;if(s instanceof Qf)return s;throw Kh(813)}tp.$au={type:Ol,name:"catch",isTemplateController:!0,bindables:{value:{mode:mh}}};class sp{"promise.resolve"(t,e){return new Wi(t,e,"promise","bind")}}sp[Symbol.metadata]={[X]:Yi.create([{pattern:"promise.resolve",symbols:""}],sp)};class ip{then(t,e){return new Wi(t,e,"then","from-view")}}ip[Symbol.metadata]={[X]:Yi.create([{pattern:"then",symbols:""}],ip)};class np{catch(t,e){return new Wi(t,e,"catch","from-view")}}np[Symbol.metadata]={[X]:Yi.create([{pattern:"catch",symbols:""}],np)};class rp{constructor(){this.Vi=!1,this.qe=at(Sl),this.p=at(xl)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Fi():this.Vi=!0}attached(){this.Vi&&(this.Vi=!1,this.Fi()),this.qe.addEventListener("focus",this),this.qe.addEventListener("blur",this)}detaching(){const t=this.qe;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Hi||(this.value=!1)}Fi(){const t=this.qe,e=this.Hi,s=this.value;s&&!e?t.focus():!s&&e&&t.blur()}get Hi(){return this.qe===this.p.document.activeElement}}rp.$au={type:Ol,name:"focus",bindables:{value:{mode:vh}}};class op{constructor(){this.position="beforeend",this.strict=!1;const t=at($c),e=at(wd),s=at(xl);this.p=s,this.Oi=s.document.createElement("div"),(this.view=t.create()).setLocation(this.$i=Tc(s)),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)kd.set(t,e);else{const s=t.childNodes;for(let t=0,i=s.length;t<i;++t)kd.set(s[t],e)}}(this.view.nodes,e)}attaching(t){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const e=this.Oi=this.Ni();return this.Wi(e,this.position),this.ji(t,e)}detaching(t){return this.zi(t,this.Oi)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.Ni();if(this.Oi===e)return;this.Oi=e;const s=P(this.zi(null,e),()=>(this.Wi(e,this.position),this.ji(null,e)));h(s)&&s.catch(Mh)}positionChanged(){const{$controller:t,Oi:e}=this;if(!t.isActive)return;const s=P(this.zi(null,e),()=>(this.Wi(e,this.position),this.ji(null,e)));h(s)&&s.catch(Mh)}ji(t,e){const{activating:s,callbackContext:i,view:n}=this;return P(s?.call(i,e,n),()=>this.Ui(t,e))}Ui(t,e){const{$controller:s,view:i}=this;return null!==t?P(i.activate(t??i,s,s.scope),()=>this.Gi(e)):(i.nodes.insertBefore(this.$i),this.Gi(e))}Gi(t){const{activated:e,callbackContext:s,view:i}=this;return e?.call(s,t,i)}zi(t,e){const{deactivating:s,callbackContext:i,view:n}=this;return P(s?.call(i,e,n),()=>this.Xi(t,e))}Xi(t,e){const{$controller:s,view:i}=this;return null!==t?P(i.deactivate(t,s),()=>this.Ki(e)):(i.nodes.remove(),this.Ki(e))}Ki(t){const{deactivated:e,callbackContext:s,view:i}=this;return P(e?.call(s,t,i),()=>this.Qi())}Ni(){const t=this.p,e=t.document;let s=this.target,i=this.renderContext;if(""===s){if(this.strict)throw Kh(811);return e.body}if(g(s)){let n=e;g(i)&&(i=e.querySelector(i)),i instanceof t.Node&&(n=i),s=n.querySelector(s)}if(s instanceof t.Node)return s;if(null==s){if(this.strict)throw Kh(812);return e.body}return s}Qi(){this.$i.remove(),this.$i.$start.remove()}Wi(t,e){const s=this.$i,i=s.$start,n=t.parentNode,r=[i,s];switch(e){case"beforeend":xc(t,null,r);break;case"afterbegin":xc(t,t.firstChild,r);break;case"beforebegin":xc(n,t,r);break;case"afterend":xc(n,t.nextSibling,r);break;default:throw Kh(779,e)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){if(!0===this.view?.accept(t))return!0}}let ap;op.$au={type:Ol,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};class hp{constructor(){this.Yi=null,this.Zi=null,this.ne=!1,this.expose=null,this.slotchange=null,this.Ji=new Set,this.fi=null;const t=at(sd),e=at(wd),s=at(an),i=at(ku),n=this.name=s.data.name,r=s.projections?.[Sc],o=t.instruction?.projections?.[n],a=t.controller.container;let h,l;null==o?(l=a.createChild({inheritParentResources:!0}),h=i.getViewFactory(r??(ap??=Sd.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),l),this.ts=!1):(l=a.createChild(),l.useResources(t.parent.controller.container),tl(l,sd,new St(void 0,t.parent)),h=i.getViewFactory(o,l),this.ts=!0,this.es=a.getAll(Pc,!1)?.filter(t=>"*"===t.slotName||t.slotName===n)??It),this.ss=(this.es??=It).length>0,this.rs=t,this.view=h.create().setLocation(this.l=e)}get nodes(){const t=[],e=this.l;let s=e.$start.nextSibling;for(;null!=s&&s!==e;)8!==s.nodeType&&t.push(s),s=s.nextSibling;return t}subscribe(t){this.Ji.add(t)}unsubscribe(t){this.Ji.delete(t)}binding(t,e){for(this.Yi=e.scope;"synthetic"===e.vmKind&&e.parent?.viewModel instanceof hp;)e=e.parent.parent;const s=e.scope.bindingContext;let i;this.ts&&(i=this.rs.controller.scope.parent,(this.Zi=Lr.fromParent(i,i.bindingContext)).overrideContext.$host=this.expose??s)}attaching(t,e){return P(this.view.activate(t,this.$controller,this.ts?this.Zi:this.Yi),()=>{(this.ss||p(this.slotchange))&&(this.es.forEach(t=>t.watch(this)),this.ei(),this.ls(),this.ne=!0)})}detaching(t,e){return this.ne=!1,this.cs(),this.es.forEach(t=>t.unwatch(this)),this.view.deactivate(t,this.$controller)}exposeChanged(t){this.ts&&null!=this.Zi&&(this.Zi.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){if(!0===this.view?.accept(t))return!0}ei(){if(null!=this.fi)return;const t=this.l,e=t.parentElement;null!=e&&(this.fi=Ac(e,e=>{cp(t,e)&&this.ls()})).observe(e,{childList:!0})}cs(){this.fi?.disconnect(),this.fi=null}ls(){const t=this.nodes,e=new Set(this.Ji);let s;for(s of(this.ne&&this.slotchange?.call(void 0,this.name,t),e))s.handleSlotChange(this,t)}}hp.$au={type:jd,name:"au-slot",template:null,containerless:!0,processContent(t,e,s){s.name=t.getAttribute("name")??Sc;let i=t.firstChild,n=null;for(;null!==i;)n=i.nextSibling,Rc(i)&&i.hasAttribute("au-slot")&&t.removeChild(i),i=n},bindables:["expose","slotchange"]};const lp=(t,e)=>t.compareDocumentPosition(e),cp=(t,e)=>{for(const{addedNodes:s,removedNodes:i,nextSibling:n}of e){let e,r=0,o=s.length;for(;r<o;++r)if(e=s[r],4===lp(t.$start,e)&&2===lp(t,e))return!0;if(i.length>0&&null!=n&&4===lp(t.$start,n)&&2===lp(t,n))return!0}};class up{constructor(){this.scopeBehavior="auto",this.us=void 0,this.tag=null,this.c=at(Ct),this.parent=at(ed),this.ds=at(Sl),this.l=at(wd),this.p=at(xl),this.r=at(ku),this.gs=at(an),this.ps=at(function(t){return null==t?xt:xt(t)}(fp)),this.yt=at(Oi),this.it=at(sd),this.ep=at(Je),this.oL=at(ja),this.ne=!1}get composing(){return this.xs}get composition(){return this.us}attaching(t,e){return this.ne=!0,this.xs=P(this.queue(new pp(this.template,this.component,this.model,void 0),t),t=>{this.ps.ys(t)&&(this.xs=void 0)})}detaching(t){this.ne=!1;const e=this.us,s=this.xs;return this.ps.invalidate(),this.us=this.xs=void 0,P(s,()=>e?.deactivate(t))}propertyChanged(t){this.ne&&"composing"!==t&&"composition"!==t&&("model"!==t||null==this.us?"tag"===t&&this.us?.controller.vmKind===Uu||(this.xs=P(this.xs,()=>P(this.queue(new pp(this.template,this.component,this.model,t),void 0),t=>{this.ps.ys(t)&&(this.xs=void 0)}))):this.us.update(this.model))}queue(t,e){const s=this.ps,i=this.us;return P(s.create(t),t=>s.ys(t)?P(this.compose(t),n=>s.ys(t)?P(n.activate(e),()=>s.ys(t)?(this.us=n,P(i?.deactivate(e),()=>t)):P(n.controller.deactivate(n.controller,this.$controller),()=>(n.controller.dispose(),t))):(n.controller.dispose(),t)):t)}compose(t){const{ws:e,bs:s,ks:i}=t.change,{c:n,$controller:r,l:o,gs:a}=this,h=this.Cs(this.it.controller.container,s),l=n.createChild(),c=this.p.document.createElement(null==h?this.tag??"div":h.name);let u;o.parentNode.insertBefore(c,o),u=null==h?null==this.tag?Cd(c):null:h.containerless?Cd(c):null;const d=()=>{if(c.remove(),null!=u){let t=u.$start.nextSibling,e=null;for(;null!==t&&t!==u;)e=t.nextSibling,t.remove(),t=e;u.$start?.remove(),u.remove()}},f=this.Bs(l,"string"==typeof s?h.Type:s,c,u),g=()=>{const s=a.captures??It;if(null!==h){const e=h.capture,[i,n]=s.reduce((t,s)=>(t[!(s.target in h.bindables)&&(!0===e||p(e)&&e(s.target))?0:1].push(s),t),[[],[]]),o=Pu.$el(l,f,c,{projections:a.projections,captures:i},h,u);return this.Ss(c,h,n).forEach(t=>o.addBinding(t)),new vp(o,t=>o.activate(t??o,r,r.scope.parent),t=>P(o.deactivate(t??o,r),d),t=>f.activate?.(t),t)}{const i=Sd.create({name:zd.generateName(),template:e}),n=this.r.getViewFactory(i,l),o=Pu.$view(n,r),a="auto"===this.scopeBehavior?Lr.fromParent(this.parent.scope,f):Lr.create(f);return o.setHost(c),null==u?this.Ss(c,i,s).forEach(t=>o.addBinding(t)):o.setLocation(u),new vp(o,t=>o.activate(t??o,r,a),t=>P(o.deactivate(t??o,r),d),t=>f.activate?.(t),t)}};return"activate"in f?P(f.activate(i),()=>g()):g()}Bs(t,e,s,i){if(null==e)return new dp;if("object"==typeof e)return e;const n=this.p;Ad(t,s,n),tl(t,wd,new St("IRenderLocation",i));const r=t.invoke(e);return tl(t,e,new St("au-compose.component",r)),r}Cs(t,e){if("string"==typeof e){const s=zd.find(t,e);if(null==s)throw Kh(806,e);return s}const s=p(e)?e:e?.constructor;return zd.isType(s,void 0)?zd.getDefinition(s,null):null}Ss(t,e,s){const i=new id(this.$controller,{projections:null,captures:s},this.it.parent);return Oc.create(i,t,e,this.r,this.yt,this.p,this.ep,this.oL)}}up.$au={type:jd,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:t=>{if("scoped"===t||"auto"===t)return t;throw Kh(805,t)}},{name:"composing",mode:mh},{name:"composition",mode:mh},"tag"]};class dp{}class fp{constructor(){this.id=0}ys(t){return t.id===this.id}create(t){return P(t.load(),t=>new mp(++this.id,t))}invalidate(){this.id++}}class pp{constructor(t,e,s,i){this.ws=t,this.bs=e,this.ks=s,this.As=i}load(){return h(this.ws)||h(this.bs)?Promise.all([this.ws,this.bs]).then(([t,e])=>new gp(t,e,this.ks,this.As)):new gp(this.ws,this.bs,this.ks,this.As)}}class gp{constructor(t,e,s,i){this.ws=t,this.bs=e,this.ks=s,this.As=i}}class mp{constructor(t,e){this.id=t,this.change=e}}class vp{constructor(t,e,s,i,n){this.controller=t,this.start=e,this.stop=s,this.update=i,this.context=n,this.state=0}activate(t){if(0!==this.state)throw Kh(807,this);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw Kh(808);default:this.state=-1}}}const bp=Yh("ISanitizer",t=>t.singleton(class{sanitize(){throw Kh(99,"sanitize")}}));class wp{constructor(){this.Rs=at(bp)}toView(t){return null==t?null:this.Rs.sanitize(t)}}wp.$au={type:Wl,name:"sanitize"};class yp{constructor(){this.el=at(Sl),this.p=at(xl),this.Ts=!1,this.L=!1,this.$val="",this.$prio="",this.update=()=>{this.L=!1,Boolean(this.value)!==this.Es&&(this.Es===this.Ls?(this.Es=!this.Ls,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Es=this.Ls,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))};const t=at(an);this.Es=this.Ls="hide"!==t.alias}binding(){this.Ts=!0,this.update()}detaching(){this.Ts=!1,this.L=!1}valueChanged(){this.Ts&&!this.L&&(this.L=!0,oo(this.update))}}yp.$au={type:Ol,name:"show",bindables:["value"],aliases:["hide"]};const kp=[Jd,class{static register(t){t.register(D.singleton(this,this),D.aliasTo(this,Sa))}constructor(){this.tracked=[],this.q=null,this.K=0,this.p=at(Mt),this.check=()=>{if(Ea.disabled)return;if(++this.K<Ea.timeoutsPerCheck)return;this.K=0;const t=this.tracked.slice(0),e=t.length;let s,i=0;for(;i<e;++i)s=t[i],s.isDirty()&&s.flush()},go(Ia,null)}createProperty(t,e){if(Ea.throw)throw jr(218,e);return new Ia(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.q=(t=>{const e=new co(t,Math.max(0,0));return Qr.push(e),e.O(),e})(this.check))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.q.cancel(),this.q=null)}},df],$p=[Ji,Qi,Zi,kc],Cp=[Dn,Bn,Ln,jn,Nn,Vn,Un,Fn,qn,Kn,zn,_n,Wn],Tp=[ml,ul,dl,fl,wl,kl,pl,wp,yf,kf,Tf,Uf,Wf,Xf,Yf,Qf,Jf,Zf,tp,sp,ip,np,vf,bf,wf,up,op,rp,yp,hp],xp=[Zc,tu,Qc,Jc,Wc,Hc,Gc,Xc,Yc,iu,hu,nu,ru,ou,au,eu,lu,cu],Ap=Rp(Ot);function Rp(t){return{optionsProvider:t,register(e){const s={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return t(s),e.register(Zh(uo,s.coercingOptions),Ze,...kp,...Tp,...$p,...Cp,...xp)},customize:e=>Rp(e??t)}}const Sp=dh.getOrCreate(globalThis);class Ep extends Hd{constructor(t=function(){return $t.createContainer().register(D.instance(xl,Sp),Ap)}()){super(t)}static app(t){return(new Ep).app(t)}static enhance(t){return(new Ep).enhance(t)}static register(...t){return(new Ep).register(...t)}app(t){if(zd.isType(t)){const e=zd.getDefinition(t);let s=document.querySelector(e.name);return null===s&&(s=document.body),super.app({host:s,component:t})}return super.app(t)}}const Ip=$t.createInterface("IValidationExpressionHydrator"),Pp=s.get,Op=s.define,Mp=s.delete,{annotation:Bp}=K,jp=Bp.keyFor,Lp=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`),Np=Symbol.for("au:validation:explicit-message-key"),Dp=$t.createInterface("IValidationMessageProvider"),Vp=Object.freeze({aliasKey:jp("validation-rule-alias-message"),define(t,e,s){this.setDefaultMessage(t,e,s)},setDefaultMessage(t,{aliases:e},s){const i=s?Pp(this.aliasKey,t):void 0;if(void 0!==i){const t={...Object.fromEntries(i.map(({name:t,defaultMessage:e})=>[t,e])),...Object.fromEntries(e.map(({name:t,defaultMessage:e})=>[t,e]))};e=T(Object.entries(t)).map(([t,e])=>({name:t,defaultMessage:e}))}Op(e,t,this.aliasKey)},getDefaultMessages(t){const e=Pp(this.aliasKey,t);return null!=e||t instanceof Function?e:Pp(this.aliasKey,t.constructor)}});class Fp{get messageKey(){return this.t}set messageKey(t){this.t=t}constructor(t=void 0){this.tag=void 0,this.t=t}canExecute(t){return!0}execute(t,e){throw Lp(99,"execute")}accept(t){throw Lp(99,"accept")}}Fp.$TYPE="";class qp extends Fp{constructor(){super("required")}execute(t){return null!=t&&!("string"==typeof t&&!/\S/.test(t))}accept(t){return t.visitRequiredRule(this)}}qp.$TYPE="RequiredRule";class _p extends Fp{constructor(t,e="matches"){super(e),this.pattern=t}execute(t){return null==t||0===t.length||this.pattern.test(t)}accept(t){return t.visitRegexRule(this)}}_p.$TYPE="RegexRule";class zp extends Fp{constructor(t,e){super(e?"maxLength":"minLength"),this.length=t,this.isMax=e}execute(t){return null==t||0===t.length||(this.isMax?t.length<=this.length:t.length>=this.length)}accept(t){return t.visitLengthRule(this)}}zp.$TYPE="LengthRule";class Kp extends Fp{constructor(t,e){super(e?"maxItems":"minItems"),this.count=t,this.isMax=e}execute(t){return null==t||(this.isMax?t.length<=this.count:t.length>=this.count)}accept(t){return t.visitSizeRule(this)}}Kp.$TYPE="SizeRule";class Up extends Fp{constructor(t,{min:e,max:s}){super(void 0!==e&&void 0!==s?t?"range":"between":void 0!==e?"min":"max"),this.isInclusive=t,this.min=Number.NEGATIVE_INFINITY,this.max=Number.POSITIVE_INFINITY,this.min=e??this.min,this.max=s??this.max}execute(t,e){return null==t||(this.isInclusive?t>=this.min&&t<=this.max:t>this.min&&t<this.max)}accept(t){return t.visitRangeRule(this)}}Up.$TYPE="RangeRule";class Wp extends Fp{constructor(t){super("equals"),this.expectedValue=t}execute(t){return null==t||""===t||t===this.expectedValue}accept(t){return t.visitEqualsRule(this)}}Wp.$TYPE="EqualsRule";class Hp extends Fp{get messageKey(){return this.i??this.t??void 0}set messageKey(t){this.i=t}constructor(t,e,s){super(void 0),this.validState=t,this.stateFunction=e,this.messages=s,this.i=null;const i=[];for(const[t,e]of Object.entries(s))i.push({name:t,defaultMessage:e});Vp.setDefaultMessage(this,{aliases:i},!1)}execute(t,e){return P(this.stateFunction(t,e),t=>(this.t=t,t===this.validState))}accept(t){}}Hp.$TYPE="StateRule",Vp.define(Wp,{aliases:[{name:"equals",defaultMessage:"${$displayName} must be ${$rule.expectedValue}."}]},!1),Vp.define(Up,{aliases:[{name:"min",defaultMessage:"${$displayName} must be at least ${$rule.min}."},{name:"max",defaultMessage:"${$displayName} must be at most ${$rule.max}."},{name:"range",defaultMessage:"${$displayName} must be between or equal to ${$rule.min} and ${$rule.max}."},{name:"between",defaultMessage:"${$displayName} must be between but not equal to ${$rule.min} and ${$rule.max}."}]},!1),Vp.define(Kp,{aliases:[{name:"minItems",defaultMessage:"${$displayName} must contain at least ${$rule.count} item${$rule.count === 1 ? '' : 's'}."},{name:"maxItems",defaultMessage:"${$displayName} cannot contain more than ${$rule.count} item${$rule.count === 1 ? '' : 's'}."}]},!1),Vp.define(zp,{aliases:[{name:"minLength",defaultMessage:"${$displayName} must be at least ${$rule.length} character${$rule.length === 1 ? '' : 's'}."},{name:"maxLength",defaultMessage:"${$displayName} cannot be longer than ${$rule.length} character${$rule.length === 1 ? '' : 's'}."}]},!1),Vp.define(_p,{aliases:[{name:"matches",defaultMessage:"${$displayName} is not correctly formatted."},{name:"email",defaultMessage:"${$displayName} is not a valid email."}]},!1),Vp.define(qp,{aliases:[{name:"required",defaultMessage:"${$displayName} is required."}]},!1),Vp.define(Fp,{aliases:[{name:void 0,defaultMessage:"${$displayName} is invalid."}]},!1);const Gp=$t.createInterface("ICustomMessages");class Xp{constructor(t,e=void 0,s=void 0){this.expression=t,this.name=e,this.displayName=s}accept(t){return t.visitRuleProperty(this)}}Xp.$TYPE="RuleProperty";const Yp=Object.freeze({allRulesAnnotations:jp("validation-rules-annotations"),name:"validation-rules",defaultRuleSetName:"__default",set(t,e,s){const i=`${Yp.name}:${s??Yp.defaultRuleSetName}`;Op(e,t,jp(i));const n=Pp(this.allRulesAnnotations,t);void 0===n?Op([i],t,this.allRulesAnnotations):n.push(i)},get(t,e){const s=jp(Yp.name,e??Yp.defaultRuleSetName);return Pp(s,t)??Pp(s,t.constructor)},unset(t,e){const s=Pp(this.allRulesAnnotations,t);if(Array.isArray(s))for(const i of s.slice(0))if(i.startsWith(Yp.name)&&(void 0===e||i.endsWith(e))){Mp(jp(i),t);const e=s.indexOf(i);e>-1&&s.splice(e,1)}},isValidationRulesSet(t){const e=Pp(this.allRulesAnnotations,t);return void 0!==e&&e.some(t=>t.startsWith(Yp.name))}});class Qp{constructor(t,e,s,i,n,r){this.messageProvider=t,this.$displayName=e,this.$propertyName=s,this.$value=i,this.$rule=n,this.$object=r}$getDisplayName(t,e){return this.messageProvider.getDisplayName(t,e)}}class Jp{constructor(t,e,s,i,n=[[]]){this.validationRules=e,this.messageProvider=s,this.property=i,this.$rules=n,this.l=t}accept(t){return t.visitPropertyRule(this)}addRule(t){return this.getLeafRules().push(this.latestRule=t),this}getLeafRules(){const t=this.$rules.length-1;return this.$rules[t]}async validate(t,e,s){void 0===s&&(s=Lr.create({[ig]:t}));const i=this.property.expression;let n;n=void 0===i?t:Fr(i,s,this,null);let r=!0;const o=async s=>{const i=async e=>{let s=e.execute(n,t);s instanceof Promise&&(s=await s),r=r&&s;const{displayName:i,name:o}=this.property;let a;if(!s){const s=Lr.create(new Qp(this.messageProvider,this.messageProvider.getDisplayName(o,i),o,n,e,t));a=Fr(this.messageProvider.getMessage(e),s,this,null)}return new rg(s,a,o,t,e,this)},o=[];for(const n of s)!n.canExecute(t)||void 0!==e&&n.tag!==e||o.push(i(n));return Promise.all(o)};return this.$rules.reduce(async(t,e)=>t.then(async t=>r?(async(t,e)=>{const s=await o(e);return t.push(...s),t})(t,e):Promise.resolve(t)),Promise.resolve([]))}then(){return this.$rules.push([]),this}withMessageKey(t){return this.assertLatestRule(this.latestRule),this.latestRule.messageKey=t,this}withMessage(t){const e=this.latestRule;return this.assertLatestRule(e),this.messageProvider.setMessage(e,t,Np),this}when(t){return this.assertLatestRule(this.latestRule),this.latestRule.canExecute=t,this}tag(t){return this.assertLatestRule(this.latestRule),this.latestRule.tag=t,this}assertLatestRule(t){if(void 0===t)throw Lp(4101)}displayName(t){return this.property.displayName=t,this}satisfiesState(t,e,s){return this.addRule(new Hp(t,e,s))}satisfies(t){const e=new class extends Fp{constructor(){super(...arguments),this.execute=t}};return this.addRule(e)}satisfiesRule(t){return this.addRule(t)}required(){return this.addRule(new qp)}matches(t){return this.addRule(new _p(t))}email(){return this.addRule(new _p(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"email"))}minLength(t){return this.addRule(new zp(t,!1))}maxLength(t){return this.addRule(new zp(t,!0))}minItems(t){return this.addRule(new Kp(t,!1))}maxItems(t){return this.addRule(new Kp(t,!0))}min(t){return this.addRule(new Up(!0,{min:t}))}max(t){return this.addRule(new Up(!0,{max:t}))}range(t,e){return this.addRule(new Up(!0,{min:t,max:e}))}between(t,e){return this.addRule(new Up(!1,{min:t,max:e}))}equals(t){return this.addRule(new Wp(t))}ensure(t){return this.latestRule=void 0,this.validationRules.ensure(t)}ensureObject(){return this.latestRule=void 0,this.validationRules.ensureObject()}get rules(){return this.validationRules.rules}on(t,e){return this.validationRules.on(t,e)}}Jp.$TYPE="PropertyRule",zr(Jp);const Zp=$t.createInterface("IValidationRules");class tg{constructor(){this.rules=[],this.targets=new Set,this.locator=at(Tt),this.parser=at(Je),this.messageProvider=at(Dp),this.deserializer=at(Ip)}ensure(t){const[e,s]=ng(t,this.parser);let i=this.rules.find(t=>t.property.name==e);return void 0===i&&(i=new Jp(this.locator,this,this.messageProvider,new Xp(s,e)),this.rules.push(i)),i}ensureObject(){const t=new Jp(this.locator,this,this.messageProvider,new Xp);return this.rules.push(t),t}on(t,e){const s=Yp.get(t,e);return Object.is(s,this.rules)||(this.rules=s??[],Yp.set(t,this.rules,e),this.targets.add(t)),this}off(t,e){const s=void 0!==t?[t]:Array.from(this.targets);for(const t of s)Yp.unset(t,e),Yp.isValidationRulesSet(t)||this.targets.delete(t)}applyModelBasedRules(t,e){const s=new Set;for(const i of e){const e=i.tag,n=this.deserializer.hydrateRuleset(i.ruleset,this);Yp.set(t,n,e),s.add(e)}}}const eg=/^(?:function)?\s*\(?[$_\w\d]+\)?\s*(?:=>)?\s*\{(?:\s*["']{1}use strict["']{1};)?(?:[$_\s\w\d\/\*.['"\]+;\(\)]+)?\s*return\s+[$_\w\d]+((\.[$_\w\d]+|\[['"$_\w\d]+\])+)\s*;?\s*\}$/,sg=/^\(?[$_\w\d]+\)?\s*=>\s*[$_\w\d]+((\.[$_\w\d]+|\[['"$_\w\d]+\])+)$/,ig="$root";function ng(t,e){switch(typeof t){case"string":break;case"function":{const e=t.toString(),s=sg.exec(e)??eg.exec(e);if(null===s)throw Lp(4102,e);t=s[1].substring(1);break}default:throw Lp(4102,t)}return[t,e.parse(`${ig}.${t}`,"IsProperty")]}class rg{constructor(t,e,s,i,n,r,o=!1){this.valid=t,this.message=e,this.propertyName=s,this.object=i,this.rule=n,this.propertyRule=r,this.isManual=o,this.id=rg.nextId++}toString(){return this.valid?"Valid.":this.message}}rg.nextId=0;const og=new Set(["displayName","propertyName","value","object","config","getDisplayName"]);class ag{constructor(t=at(Wt),e=at(Gp)){this.registeredMessages=new WeakMap,this.parser=at(Je),this.logger=t.scopeTo(ag.name);for(const{rule:t,aliases:s}of e)Vp.setDefaultMessage(t,{aliases:s},!0)}getMessage(t){const e=t.messageKey,s=this.registeredMessages.get(t);if(null!=s){const t=s.get(Np)??s.get(e);if(void 0!==t)return t}const i=Vp.getDefaultMessages(t);let n;return n=1===i.length&&void 0===e?i[0].defaultMessage:i.find(t=>t.name===e)?.defaultMessage,n||(n=Vp.getDefaultMessages(Fp)[0].defaultMessage),this.setMessage(t,n)}setMessage(t,e,s){const i=this.parseMessage(e),n=this.registeredMessages;let r=n.get(t);return void 0===r&&n.set(t,r=new Map),r.set(s??t.messageKey,i),i}parseMessage(t){const e=this.parser.parse(t,"Interpolation");if("Interpolation"===e?.$kind){for(const s of e.expressions){const e=s.name;if(og.has(e)&&this.logger.warn(`Did you mean to use "$${e}" instead of "${e}" in this validation message template: "${t}"?`),"AccessThis"===s.$kind||s.ancestor>0)throw new Error("$parent is not permitted in validation message expressions.")}return e}return new je(t)}getDisplayName(t,e){if(null!=e)return e instanceof Function?e():e;if(void 0===t)return;const s=t.toString().split(/(?=[A-Z])/).join(" ");return s.charAt(0).toUpperCase()+s.slice(1)}}var hg,lg;(lg=hg||(hg={})).BindingBehaviorExpression="BindingBehaviorExpression",lg.ValueConverterExpression="ValueConverterExpression",lg.AssignExpression="AssignExpression",lg.ConditionalExpression="ConditionalExpression",lg.AccessThisExpression="AccessThisExpression",lg.AccessBoundaryExpression="AccessBoundaryExpression",lg.AccessScopeExpression="AccessScopeExpression",lg.AccessMemberExpression="AccessMemberExpression",lg.AccessKeyedExpression="AccessKeyedExpression",lg.CallScopeExpression="CallScopeExpression",lg.CallMemberExpression="CallMemberExpression",lg.CallFunctionExpression="CallFunctionExpression",lg.BinaryExpression="BinaryExpression",lg.UnaryExpression="UnaryExpression",lg.PrimitiveLiteralExpression="PrimitiveLiteralExpression",lg.ArrayLiteralExpression="ArrayLiteralExpression",lg.ObjectLiteralExpression="ObjectLiteralExpression",lg.TemplateExpression="TemplateExpression",lg.TaggedTemplateExpression="TaggedTemplateExpression",lg.ArrayBindingPattern="ArrayBindingPattern",lg.ObjectBindingPattern="ObjectBindingPattern",lg.BindingIdentifier="BindingIdentifier",lg.ForOfStatement="ForOfStatement",lg.Interpolation="Interpolation",lg.DestructuringAssignment="DestructuringAssignment",lg.DestructuringSingleAssignment="DestructuringSingleAssignment",lg.DestructuringRestAssignment="DestructuringRestAssignment",lg.ArrowFunction="ArrowFunction",lg.Custom="Custom";class cg{static deserialize(t){const e=new cg,s=JSON.parse(t);return e.hydrate(s)}hydrate(t){switch(t.$TYPE){case hg.AccessMemberExpression:{const e=t;return new Ae(this.hydrate(e.object),e.name)}case hg.AccessKeyedExpression:{const e=t;return new Re(this.hydrate(e.object),this.hydrate(e.key))}case hg.AccessThisExpression:return new $e(t.ancestor);case hg.AccessBoundaryExpression:return new Ce;case hg.AccessScopeExpression:{const e=t;return new Te(e.name,e.ancestor)}case hg.ArrayLiteralExpression:{const e=t;return new Le(this.hydrate(e.elements))}case hg.ObjectLiteralExpression:{const e=t;return new Ne(this.hydrate(e.keys),this.hydrate(e.values))}case hg.PrimitiveLiteralExpression:{const e=t;return new je(this.hydrate(e.value))}case hg.CallFunctionExpression:{const e=t;return new Pe(this.hydrate(e.func),this.hydrate(e.args))}case hg.CallMemberExpression:{const e=t;return new Ie(this.hydrate(e.object),e.name,this.hydrate(e.args))}case hg.CallScopeExpression:{const e=t;return new Ee(e.name,this.hydrate(e.args),e.ancestor)}case hg.TemplateExpression:{const e=t;return new De(this.hydrate(e.cooked),this.hydrate(e.expressions))}case hg.TaggedTemplateExpression:{const e=t;return new Ve(this.hydrate(e.cooked),this.hydrate(e.raw),this.hydrate(e.func),this.hydrate(e.expressions))}case hg.UnaryExpression:{const e=t;return new Be(e.operation,this.hydrate(e.expression))}case hg.BinaryExpression:{const e=t;return new Me(e.operation,this.hydrate(e.left),this.hydrate(e.right))}case hg.ConditionalExpression:{const e=t;return new ye(this.hydrate(e.condition),this.hydrate(e.yes),this.hydrate(e.no))}case hg.AssignExpression:{const e=t;return new we(this.hydrate(e.target),this.hydrate(e.value))}case hg.ValueConverterExpression:{const e=t;return new be(this.hydrate(e.expression),e.name,this.hydrate(e.args))}case hg.BindingBehaviorExpression:{const e=t;return new ve(this.hydrate(e.expression),e.name,this.hydrate(e.args))}case hg.ArrayBindingPattern:{const e=t;return new Fe(this.hydrate(e.elements))}case hg.ObjectBindingPattern:{const e=t;return new qe(this.hydrate(e.keys),this.hydrate(e.values))}case hg.BindingIdentifier:return new _e(t.name);case hg.ForOfStatement:{const e=t;return new ze(this.hydrate(e.declaration),this.hydrate(e.iterable),this.hydrate(e.semiIdx))}case hg.Interpolation:{const e=t;return new Ke(this.hydrate(e.cooked),this.hydrate(e.expressions))}case hg.DestructuringAssignment:return new Ue(this.hydrate(t.$kind),this.hydrate(t.list),this.hydrate(t.source),this.hydrate(t.initializer));case hg.DestructuringSingleAssignment:return new We(this.hydrate(t.target),this.hydrate(t.source),this.hydrate(t.initializer));case hg.DestructuringRestAssignment:return new He(this.hydrate(t.target),this.hydrate(t.indexOrProperties));case hg.ArrowFunction:return new Ge(this.hydrate(t.parameters),this.hydrate(t.body),this.hydrate(t.rest));default:if(Array.isArray(t))return"object"==typeof t[0]?this.deserializeExpressions(t):t.map(ug);if("object"!=typeof t)return ug(t);throw Lp(4100,t)}}deserializeExpressions(t){const e=[];for(const s of t)e.push(this.hydrate(s));return e}}function ug(t){if("string"==typeof t){if("null"===t)return null;if("undefined"===t)return;return t.substring(1,t.length-1)}return t}class dg{static register(t){this.container=t}static deserialize(t,e){const s=this.container.get(Dp),i=this.container.get(Je),n=new dg(this.container,s,i),r=JSON.parse(t);return n.hydrate(r,e)}constructor(t=at(Tt),e=at(Dp),s=at(Je)){this.locator=t,this.messageProvider=e,this.parser=s,this.astDeserializer=new cg}hydrate(t,e){switch(t.$TYPE){case qp.$TYPE:{const e=t,s=new qp;return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case _p.$TYPE:{const e=t,s=e.pattern,i=this.astDeserializer,n=new _p(new RegExp(i.hydrate(s.source),s.flags),e.messageKey);return n.tag=i.hydrate(e.tag),n}case zp.$TYPE:{const e=t,s=new zp(e.length,e.isMax);return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case Kp.$TYPE:{const e=t,s=new Kp(e.count,e.isMax);return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case Up.$TYPE:{const e=t,s=new Up(e.isInclusive,{min:e.min??Number.NEGATIVE_INFINITY,max:e.max??Number.POSITIVE_INFINITY});return s.messageKey=e.messageKey,s.tag=this.astDeserializer.hydrate(e.tag),s}case Wp.$TYPE:{const e=t,s=this.astDeserializer,i=new Wp("object"!=typeof e.expectedValue?s.hydrate(e.expectedValue):e.expectedValue);return i.messageKey=e.messageKey,i.tag=s.hydrate(e.tag),i}case Xp.$TYPE:{const e=t,s=this.astDeserializer;let i=e.name;i="undefined"===i?void 0:s.hydrate(i);let n=e.expression;null!=n?n=s.hydrate(n):void 0!==i?[,n]=ng(i,this.parser):n=void 0;let r=e.displayName;return r="undefined"===r?void 0:s.hydrate(r),new Xp(n,i,r)}case Jp.$TYPE:{const s=t;return new Jp(this.locator,e,this.messageProvider,this.hydrate(s.property,e),s.$rules.map(t=>t.map(t=>this.hydrate(t,e))))}}}hydrateRuleset(t,e){if(!Array.isArray(t))throw Lp(4104);return t.map(t=>this.hydrate(t,e))}}class fg{constructor(){this.astDeserializer=new cg,this.l=at(Tt),this.messageProvider=at(Dp),this.parser=at(Je)}hydrate(t,e){throw Lp(99,"hydrate")}hydrateRuleset(t,e){const s=[],i=(t,n=[])=>{for(const[r,o]of t)if(this.isModelPropertyRule(o)){const t=o.rules.map(t=>Object.entries(t).map(([t,e])=>this.hydrateRule(t,e))),i=n.join("."),a=this.hydrateRuleProperty({name:""!==i?`${i}.${r}`:r,displayName:o.displayName});s.push(new Jp(this.l,e,this.messageProvider,a,t))}else i(Object.entries(o),[...n,r])};return i(Object.entries(t)),s}hydrateRule(t,e){switch(t){case"required":return this.hydrateRequiredRule(e);case"regex":return this.hydrateRegexRule(e);case"maxLength":return this.hydrateLengthRule({...e,isMax:!0});case"minLength":return this.hydrateLengthRule({...e,isMax:!1});case"maxItems":return this.hydrateSizeRule({...e,isMax:!0});case"minItems":return this.hydrateSizeRule({...e,isMax:!1});case"range":return this.hydrateRangeRule({...e,isInclusive:!0});case"between":return this.hydrateRangeRule({...e,isInclusive:!1});case"equals":return this.hydrateEqualsRule(e);default:throw Lp(4105,t)}}setCommonRuleProperties(t,e){const s=t.messageKey;null!=s&&(e.messageKey=s),e.tag=t.tag;const i=t.when;if(i)if("string"==typeof i){const t=this.parser.parse(i,"None");e.canExecute=e=>Fr(t,Lr.create({$object:e}),this,null)}else"function"==typeof i&&(e.canExecute=i)}isModelPropertyRule(t){return"object"==typeof t&&"rules"in t}hydrateRequiredRule(t){const e=new qp;return this.setCommonRuleProperties(t,e),e}hydrateRegexRule(t){const e=t.pattern,s=new _p(new RegExp(e.source,e.flags),t.messageKey);return s.tag=t.tag,s}hydrateLengthRule(t){const e=new zp(t.length,t.isMax);return this.setCommonRuleProperties(t,e),e}hydrateSizeRule(t){const e=new Kp(t.count,t.isMax);return this.setCommonRuleProperties(t,e),e}hydrateRangeRule(t){const e=new Up(t.isInclusive,{min:t.min,max:t.max});return this.setCommonRuleProperties(t,e),e}hydrateEqualsRule(t){const e=new Wp(t.expectedValue);return this.setCommonRuleProperties(t,e),e}hydrateRuleProperty(t){const e=t.name;if(!e||"string"!=typeof e)throw Lp(4106,typeof e);const[s,i]=ng(e,this.parser);return new Xp(i,s,t.displayName)}}Zl(fg);class pg{constructor(t=void 0,e=void 0,s=void 0,i=void 0,n=void 0){this.object=t,this.propertyName=e,this.rules=s,this.objectTag=i,this.propertyTag=n}}const gg=$t.createInterface("IValidator");class mg{async validate(t){const e=t.object;let s=t.propertyName;const i=t.propertyTag,n=t.rules??Yp.get(e,t.objectTag)??[],r=Lr.create({[ig]:e});if(void 0!==s){let t=n.find(t=>t.property.name===s);return null==t&&"string"==typeof s&&s.startsWith("[")&&s.endsWith("]")&&(s=s.replaceAll("][",".").slice(1,-1),t=n.find(t=>t.property.name===s)),await(t?.validate(e,i,r))??[]}return(await Promise.all(n.map(async t=>t.validate(e,i,r)))).flat()}}function vg(){return{ValidatorType:mg,MessageProviderType:ag,CustomMessages:[],HydratorType:fg}}function bg(t){return{optionsProvider:t,register(e){const s=vg();return t(s),e.register(D.instance(Gp,s.CustomMessages),D.singleton(gg,s.ValidatorType),D.singleton(Dp,s.MessageProviderType),D.singleton(Ip,s.HydratorType),D.transient(Zp,tg),dg),e},customize:e=>bg(e??t)}}const wg=bg(Ot);function yg(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,l="getter"===h?"get":"setter"===h?"set":"value",c=!e&&t?i.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d=!1,f=s.length-1;f>=0;f--){var p={};for(var g in i)p[g]="access"===g?{}:i[g];for(var g in i.access)p.access[g]=i.access[g];p.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[f])("accessor"===h?{get:u.get,set:u.set}:u[l],p);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[l]=a)}c&&Object.defineProperty(c,i.name,u),d=!0}function kg(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t);return i?s:void 0}"function"==typeof SuppressedError&&SuppressedError;const $g=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`);class Cg{constructor(t,e,s){this.valid=t,this.results=e,this.instruction=s}}class Tg{constructor(t,e){this.result=t,this.targets=e}}class xg{constructor(t,e,s){this.kind=t,this.addedResults=e,this.removedResults=s}}class Ag{constructor(t,e,s,i,n=void 0){this.sourceObserver=t,this.target=e,this.scope=s,this.rules=i,this.propertyInfo=n}}class Rg{constructor(t,e){this.object=t,this.propertyName=e}}function Sg(t,e){let s=e.propertyInfo;if(void 0!==s)return s;const i=e.scope;let n,r=t.ast.expression,o=!0,a="";for(;void 0!==r&&"AccessScope"!==r?.$kind;){let s;switch(r.$kind){case"BindingBehavior":case"ValueConverter":r=r.expression;continue;case"AccessMember":s=r.name;break;case"AccessKeyed":{const n=r.key;o&&(o="PrimitiveLiteral"===n.$kind),s=`[${Fr(n,i,t,e.sourceObserver).toString()}]`;break}default:throw $g(4205,r.constructor.name)}const n=a.startsWith("[")?"":".";a=0===a.length?s:`${s}${n}${a}`,r=r.object}if(void 0===r)throw $g(4206,t.ast.expression);return 0===a.length?(a=r.name,n=i.bindingContext):n=Fr(r,i,t,e.sourceObserver),null!=n?(s=new Rg(n,a),o&&(e.propertyInfo=s),s):void 0}const Eg=$t.createInterface("IValidationController");class Ig{constructor(){this.bindings=new Map,this.subscribers=new Set,this.results=[],this.validating=!1,this.elements=new WeakMap,this.objects=new Map,this.validator=at(gg),this.parser=at(Je),this.platform=at(xl),this.locator=at(Tt)}addObject(t,e){this.objects.set(t,e)}removeObject(t){this.objects.delete(t),this.processResultDelta("reset",this.results.filter(e=>e.object===t),[])}addError(t,e,s){let i;void 0!==s&&([i]=ng(s,this.parser));const n=new rg(!1,t,i,e,void 0,void 0,!0);return this.processResultDelta("validate",[],[n]),n}removeError(t){this.results.includes(t)&&this.processResultDelta("reset",[t],[])}addSubscriber(t){this.subscribers.add(t)}removeSubscriber(t){this.subscribers.delete(t)}registerBinding(t,e){this.bindings.set(t,e)}unregisterBinding(t){this.resetBinding(t),this.bindings.delete(t)}async validate(t){const{object:e,objectTag:s}=t??{};let i;i=void 0!==e?[new pg(e,t?.propertyName,t?.rules??this.objects.get(e),s,t?.propertyTag)]:[...Array.from(this.objects.entries()).map(([t,e])=>new pg(t,void 0,e,s)),...Array.from(this.bindings.entries()).reduce((e,[i,n])=>{if(!i.isBound)return e;const r=Sg(i,n);return void 0===r||this.objects.has(r.object)||e.push(new pg(r.object,r.propertyName,n.rules,s,t?.propertyTag)),e},[])],this.validating=!0;const n=ao(async()=>{try{const e=await Promise.all(i.map(async t=>this.validator.validate(t))),s=e.reduce((t,e)=>(t.push(...e),t),[]),n=this.getInstructionPredicate(t),r=this.results.filter(n);return this.processResultDelta("validate",r,s),new Cg(void 0===s.find(t=>!t.valid),s,t)}finally{this.validating=!1}});return n.result}reset(t){const e=this.getInstructionPredicate(t),s=this.results.filter(e);this.processResultDelta("reset",s,[])}async validateBinding(t){if(!t.isBound)return;const e=this.bindings.get(t);if(void 0===e)return;const s=Sg(t,e),i=e.rules;if(void 0===s)return;const{object:n,propertyName:r}=s;await this.validate(new pg(n,r,i))}resetBinding(t){const e=this.bindings.get(t);if(void 0===e)return;const s=Sg(t,e);if(void 0===s)return;e.propertyInfo=void 0;const{object:i,propertyName:n}=s;this.reset(new pg(i,n))}async revalidateErrors(){const t=this.results.reduce((t,{isManual:e,object:s,propertyRule:i,rule:n,valid:r})=>{if(!r&&!e&&void 0!==i&&void 0!==s&&void 0!==n){let e=t.get(s);void 0===e&&t.set(s,e=new Map);let r=e.get(i);void 0===r&&e.set(i,r=[]),r.push(n)}return t},new Map),e=[];for(const[s,i]of t)e.push(this.validate(new pg(s,void 0,Array.from(i).map(([{validationRules:t,messageProvider:e,property:s},i])=>new Jp(this.locator,t,e,s,[i])))));await Promise.all(e)}getInstructionPredicate(t){if(void 0===t)return()=>!0;const e=t.propertyName,s=t.rules;return i=>!i.isManual&&i.object===t.object&&(void 0===e||i.propertyName===e)&&(void 0===s||s.includes(i.propertyRule)||s.some(t=>void 0===i.propertyRule||t.$rules.flat().every(t=>i.propertyRule.$rules.flat().includes(t))))}getAssociatedElements({object:t,propertyName:e}){const s=[];for(const[i,n]of this.bindings.entries()){const r=Sg(i,n);void 0!==r&&r.object===t&&r.propertyName===e&&s.push(n.target)}return s}processResultDelta(t,e,s){const i=new xg(t,[],[]);s=s.slice(0);const n=this.elements;for(const t of e){const e=n.get(t);n.delete(t),i.removedResults.push(new Tg(t,e));const r=s.findIndex(e=>e.rule===t.rule&&e.object===t.object&&e.propertyName===t.propertyName);if(-1===r)this.results.splice(this.results.indexOf(t),1);else{const e=s.splice(r,1)[0],o=this.getAssociatedElements(e);n.set(e,o),i.addedResults.push(new Tg(e,o)),this.results.splice(this.results.indexOf(t),1,e)}}for(const t of s){const e=this.getAssociatedElements(t);i.addedResults.push(new Tg(t,e)),n.set(t,e),this.results.push(t)}for(const t of this.subscribers)t.handleValidationEvent(i)}}class Pg{constructor(){this.Type=void 0}registerTransformer(t){return!1}construct(t,e){return t.invoke(Ig,e)}}function Og(t,e){switch(2&t.compareDocumentPosition(e)){case 0:return 0;case 2:return 1;default:return-1}}const Mg={name:"validation-container",shadowOptions:{mode:"open"},hasSlots:!0};let Bg=(()=>{var t;let e,s,i=[],n=[],r=[],o=[];return t=class{constructor(){this.controller=kg(this,i,void 0),this.errors=(kg(this,n),kg(this,r,[])),this.host=(kg(this,o),at(Sl)),this.scopedController=at(Lt(Eg))}handleValidationEvent(t){for(const{result:e}of t.removedResults){const t=this.errors.findIndex(t=>t.result===e);-1!==t&&this.errors.splice(t,1)}for(const{result:e,targets:s}of t.addedResults){if(e.valid)continue;const t=s.filter(t=>this.host.contains(t));t.length>0&&this.errors.push(new Tg(e,t))}this.errors.sort((t,e)=>t.targets[0]===e.targets[0]?0:Og(t.targets[0],e.targets[0]))}binding(){this.controller=this.controller??this.scopedController,this.controller.addSubscriber(this)}unbinding(){this.controller.removeSubscriber(this)}},(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;e=[Uh],s=[Uh],yg(null,null,e,{kind:"field",name:"controller",static:!1,private:!1,access:{has:t=>"controller"in t,get:t=>t.controller,set:(t,e)=>{t.controller=e}},metadata:a},i,n),yg(null,null,s,{kind:"field",name:"errors",static:!1,private:!1,access:{has:t=>"errors"in t,get:t=>t.errors,set:(t,e)=>{t.errors=e}},metadata:a},r,o),a&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})})(),t})();class jg{constructor(){this.errors=[],this.errorsInternal=[],this.host=at(Sl),this.scopedController=at(Lt(Eg))}handleValidationEvent(t){for(const{result:e}of t.removedResults){const t=this.errorsInternal.findIndex(t=>t.result===e);-1!==t&&this.errorsInternal.splice(t,1)}for(const{result:e,targets:s}of t.addedResults){if(e.valid)continue;const t=s.filter(t=>this.host.contains(t));t.length>0&&this.errorsInternal.push(new Tg(e,t))}this.errorsInternal.sort((t,e)=>t.targets[0]===e.targets[0]?0:Og(t.targets[0],e.targets[0])),this.errors=this.errorsInternal}binding(){this.controller=this.controller??this.scopedController,this.controller.addSubscriber(this)}unbinding(){this.controller.removeSubscriber(this)}}var Lg;Vl.define({name:"validation-errors",bindables:{controller:{},errors:{primary:!0,mode:Pi.twoWay}}},jg),function(t){t.manual="manual",t.blur="blur",t.focusout="focusout",t.change="change",t.changeOrBlur="changeOrBlur",t.changeOrFocusout="changeOrFocusout"}(Lg||(Lg={}));const Ng=$t.createInterface("IDefaultTrigger"),Dg=new WeakMap,Vg=new WeakMap;class Fg{constructor(){this.p=at(xl),this.oL=at(ja)}bind(t,e){if(!(e instanceof cc))throw $g(4200);let s=Dg.get(e);null==s&&Dg.set(e,s=new qg(this.p,this.oL,e.get(Ng),e,e.get(Ct)));let i=Vg.get(e);null==i&&Vg.set(e,i=new _g(s,e,e.get(tc))),s.start(t),e.useTargetSubscriber(i)}unbind(t,e){Dg.get(e)?.stop()}}al.define("validate",Fg);class qg{constructor(t,e,s,i,n){this.isChangeTrigger=!1,this.isDirty=!1,this.validatedOnce=!1,this.triggerEvent=null,this.t=!1,this.propertyBinding=i,this.target=i.target,this.defaultTrigger=s,this.p=t,this.oL=e,this.l=n,this.i=new Kg("handleSourceChange",this,e,n),this.h=new Kg("handleTriggerChange",this,e,n),this.u=new Kg("handleControllerChange",this,e,n),this.V=new Kg("handleRulesChange",this,e,n),n.has(Eg,!0)&&(this.scopedController=n.get(Eg))}C(){this.isDirty=!0;const t=this.triggerEvent;this.isChangeTrigger&&(null===t||null!==t&&this.validatedOnce)&&this.validateBinding()}handleEvent(t){(!this.isChangeTrigger||this.isChangeTrigger&&this.isDirty)&&this.validateBinding()}start(t){this.scope=t,this.target=this.B();const e=this._();this.R(e)||null==this.bindingInfo||(this.controller?.registerBinding(this.propertyBinding,this.bindingInfo),this.controller?.addSubscriber(this))}stop(){this.t=!1,this.scope=void 0;const t=this.triggerEvent;null!==t&&this.target?.removeEventListener(t,this),this.controller?.resetBinding(this.propertyBinding),this.controller?.unregisterBinding(this.propertyBinding),this.controller?.removeSubscriber(this)}handleTriggerChange(t,e){this.R(new zg(void 0,this.T(t),void 0))}handleControllerChange(t,e){this.R(new zg(this.I(t),void 0,void 0))}handleRulesChange(t,e){this.R(new zg(void 0,void 0,this.P(t)))}handleSourceChange(t,e){this.source!==t&&(this.source=t,this.bindingInfo.propertyInfo=void 0)}handleValidationEvent(t){if(this.validatedOnce||!this.isChangeTrigger)return;if(null===this.triggerEvent)return;const e=this.bindingInfo.propertyInfo?.propertyName;void 0!==e&&(this.validatedOnce=void 0!==t.addedResults.find(t=>t.result.propertyName===e))}_(){const t=this.scope;let e,s,i,n=this.propertyBinding.ast;for(;"validate"!==n.name&&void 0!==n;)n=n.expression;const r=n.args;for(let n=0,o=r.length;n<o;n++){const o=r[n];switch(n){case 0:s=this.T(Fr(o,t,this,this.h));break;case 1:i=this.I(Fr(o,t,this,this.u));break;case 2:e=this.P(Fr(o,t,this,this.V));break;default:throw $g(4201,n+1,Fr(o,t,this,null))}}return new zg(this.I(i),this.T(s),e)}validateBinding(){this.t||(this.t=!0,ao(()=>(this.t=!1,this.controller.validateBinding(this.propertyBinding))))}R(t){const e=t.trigger??this.trigger,s=t.controller??this.controller,i=t.rules;if(this.trigger!==e){let t=this.triggerEvent;null!==t&&this.target.removeEventListener(t,this),this.validatedOnce=!1,this.isDirty=!1,this.trigger=e,this.isChangeTrigger=e===Lg.change||e===Lg.changeOrBlur||e===Lg.changeOrFocusout,t=this.triggerEvent=this.A(this.trigger),null!==t&&this.target.addEventListener(t,this)}return(this.controller!==s||void 0!==i)&&(this.controller?.removeSubscriber(this),this.controller?.unregisterBinding(this.propertyBinding),this.controller=s,s.registerBinding(this.propertyBinding,this.M(i)),s.addSubscriber(this),!0)}T(t){if(null==t)t=this.defaultTrigger;else if(!Object.values(Lg).includes(t))throw $g(4202,t);return t}I(t){if(null==t)t=this.scopedController;else if(!(t instanceof Ig))throw $g(4203,t);return t}P(t){if(Array.isArray(t)&&t.every(t=>t instanceof Jp))return t}B(){const t=this.propertyBinding.target;if(t instanceof this.p.Node)return t;{const e=t?.$controller;if(void 0===e)throw $g(4204);return e.host}}A(t){let e=null;switch(t){case Lg.blur:case Lg.changeOrBlur:e="blur";break;case Lg.focusout:case Lg.changeOrFocusout:e="focusout"}return e}M(t){return this.bindingInfo=new Ag(this.i,this.target,this.scope,t)}}xo(qg,null),zr(qg);class _g extends Ql{constructor(t,e,s){super(e,s),this.vs=t}handleChange(t,e){super.handleChange(t,e),this.vs.C()}}class zg{constructor(t,e,s){this.controller=t,this.trigger=e,this.rules=s}}class Kg{constructor(t,e,s,i){this.key=t,this.binding=e,this.oL=s,this.l=i}handleChange(t,e){this.binding[this.key](t,e)}}function Ug(t){return{optionsProvider:t,register(e){const s={...vg(),ValidationControllerFactoryType:Pg,DefaultTrigger:Lg.focusout,UseSubscriberCustomAttribute:!0,SubscriberCustomElementTemplate:"\n<slot></slot>\n<slot name='secondary'>\n  <span repeat.for=\"error of errors\">\n    ${error.result.message}\n  </span>\n</slot>\n"};t(s),e.registerFactory(Eg,new s.ValidationControllerFactoryType),e.register(wg.customize(t=>{for(const e of Object.keys(t))e in s&&(t[e]=s[e])}),D.instance(Ng,s.DefaultTrigger),Fg),s.UseSubscriberCustomAttribute&&e.register(jg);const i=s.SubscriberCustomElementTemplate;return i&&e.register(zd.define({...Mg,template:i},Bg)),e},customize:e=>Ug(e??t)}}xo(Kg,null),zr(Kg);const Wg=Ug(Ot);function Hg(t,e,s,i,n,r){function o(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,h=i.kind,l="getter"===h?"get":"setter"===h?"set":"value",c=!e&&t?i.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d=!1,f=s.length-1;f>=0;f--){var p={};for(var g in i)p[g]="access"===g?{}:i[g];for(var g in i.access)p.access[g]=i.access[g];p.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(t||null))};var m=(0,s[f])("accessor"===h?{get:u.get,set:u.set}:u[l],p);if("accessor"===h){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=o(m.get))&&(u.get=a),(a=o(m.set))&&(u.set=a),(a=o(m.init))&&n.unshift(a)}else(a=o(m))&&("field"===h?n.unshift(a):u[l]=a)}c&&Object.defineProperty(c,i.name,u),d=!0}function Gg(t,e,s){for(var i=arguments.length>2,n=0;n<e.length;n++)s=i?e[n].call(t,s):e[n].call(t);return i?s:void 0}function Xg(t,e,s){return"symbol"==typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:s?"".concat(s," ",e):e})}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;class Yg{constructor(){this.cache=new Map,this.delete=t=>this.cache.delete(t),this.has=t=>this.cache.has(t),this.set=(t,e)=>this.cache.set(t,e),this.get=t=>this.cache.get(t),this.clear=()=>this.cache.clear()}}const Qg=$t.createInterface(t=>t.singleton(Yg));class Jg{constructor(){this.baseUrl="",this.defaults={},this.interceptors=[],this.dispatcher=null,this.c=at(Ct)}withBaseUrl(t){return this.baseUrl=t,this}withDefaults(t){return this.defaults=t,this}withInterceptor(t){return this.interceptors.push(t),this}useStandardConfiguration(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()}rejectErrorResponses(){return this.withInterceptor({response:Zg})}withRetry(t){const e=this.c.invoke(vm,[t]);return this.withInterceptor(e)}withDispatcher(t){return this.dispatcher=t,this}}function Zg(t){if(!t.ok)throw t;return t}const tm=(t,...e)=>new Error(`AUR${String(t).padStart(4,"0")}:${e.map(String)}`),em=/^([a-z][a-z0-9+\-.]*:)?\/\//i,sm=$t.createInterface("fetch",t=>{if("function"!=typeof fetch)throw tm(5e3);return t.instance(fetch)}),im=$t.createInterface("IHttpClient",t=>t.aliasTo(nm));class nm{constructor(){this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.t=[],this.i=null,this.h=at(Nt(Jg)),this.u=at(sm)}get interceptors(){return this.t.slice(0)}configure(t){let e;if("object"==typeof t)e={defaults:t};else{if("function"!=typeof t)throw tm(5002,typeof t);{e=this.h(),e.baseUrl=this.baseUrl,e.defaults={...this.defaults},e.interceptors=this.t,e.dispatcher=this.i;const s=t(e);if(null!=s){if("object"!=typeof s)throw tm(5001,typeof s);e=s}}}const s=e.defaults;if(s?.headers instanceof Headers)throw tm(5003);const i=e.interceptors;if(i?.length>0){if(i.filter(t=>t instanceof vm).length>1)throw tm(5004);const t=i.findIndex(t=>t instanceof vm);if(t>=0&&t!==i.length-1)throw tm(5005)}return this.baseUrl=e.baseUrl,this.defaults=s,this.t=e.interceptors??[],this.i=e.dispatcher,this.isConfigured=!0,this}fetch(t,e){this.C();let s=this.buildRequest(t,e);return this.processRequest(s,this.t).then(t=>{let e;if(t instanceof Response)e=Promise.resolve(t);else{if(!(t instanceof Request))throw tm(5006,t);s=t,e=this.u.call(void 0,s)}return this.processResponse(e,this.t,s)}).then(t=>t instanceof Request?this.fetch(t):t).then(t=>(this.R(),t),t=>{throw this.R(),t})}buildRequest(t,e){const s=this.defaults??{};let i,n,r;const o=function(t){const e={},s=t??{};for(const t of Object.keys(s))e[t]="function"==typeof s[t]?s[t]():s[t];return e}(s.headers);if(t instanceof Request)i=t,r=new Headers(i.headers).get("Content-Type");else{e||(e={}),n=e.body;const o=void 0!==n?{body:n}:null,a={...s,headers:{},...e,...o};r=new Headers(a.headers).get("Content-Type"),i=new Request(function(t,e){return em.test(e)?e:(t??"")+e}(this.baseUrl,t),a)}return r||(new Headers(o).has("content-type")?i.headers.set("Content-Type",new Headers(o).get("content-type")):void 0!==n&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(n)&&i.headers.set("Content-Type","application/json")),function(t,e){const s=e??{};for(const e of Object.keys(s))t.has(e)||t.set(e,s[e])}(i.headers,o),n instanceof Blob&&n.type&&i.headers.set("Content-Type",n.type),i}get(t,e){return this.fetch(t,e)}post(t,e,s){return this.I(t,e,s,"POST")}put(t,e,s){return this.I(t,e,s,"PUT")}patch(t,e,s){return this.I(t,e,s,"PATCH")}delete(t,e,s){return this.I(t,e,s,"DELETE")}dispose(){this.t.forEach(t=>t.dispose?.()),this.t.length=0,this.i=null}C(){this.isRequesting=!!++this.activeRequestCount,this.isRequesting&&null!=this.i&&am(this.i,hm.started)}R(){this.isRequesting=!! --this.activeRequestCount,this.isRequesting||null==this.i||am(this.i,hm.drained)}processRequest(t,e){return this.B(t,e,"request","requestError",Request,this)}processResponse(t,e,s){return this.B(t,e,"response","responseError",Response,s,this)}B(t,e,s,i,n,...r){return(e??[]).reduce((t,e)=>{const o=e[s],a=e[i];return t.then(o?t=>t instanceof n?o.call(e,t,...r):t:rm,a?t=>a.call(e,t,...r):om)},Promise.resolve(t))}I(t,e,s,i){return s||(s={}),s.method=i,null!=e&&(s.body=e),this.fetch(t,s)}}function rm(t){return t}function om(t){throw t}function am(t,e){const s=new t.ownerDocument.defaultView.CustomEvent(e,{bubbles:!0,cancelable:!0});setTimeout(()=>{t.dispatchEvent(s)},1)}const hm=Object.freeze({started:"aurelia-fetch-client-request-started",drained:"aurelia-fetch-client-requests-drained"}),lm=$t.createInterface(t=>t.singleton(um)),cm=Object.freeze({Set:"au:fetch:cache:set",Get:"au:fetch:cache:get",Clear:"au:fetch:cache:clear",Reset:"au:fetch:cache:reset",Dispose:"au:fetch:cache:dispose",CacheHit:"au:fetch:cache:hit",CacheMiss:"au:fetch:cache:miss",CacheStale:"au:fetch:cache:stale",CacheStaleRefreshed:"au:fetch:cache:stale:refreshed",CacheExpired:"au:fetch:cache:expired",CacheBackgroundRefreshed:"au:fetch:cache:background:refreshed",CacheBackgroundRefreshing:"au:fetch:cache:background:refreshing",CacheBackgroundStopped:"au:fetch:cache:background:stopped"});class um{constructor(){this.storage=at(Qg),this.p=at(Mt),this.ea=at(ne),this.q=at(im),this.H=[],this.O=-1,this.j=[],this.T=new Map}subscribe(t,e){const s=this.ea.subscribe(t,e);return this.H.push(s),s}subscribeOnce(t,e){const s=this.ea.subscribeOnce(t,e);return this.H.push(s),s}setStaleTimer(t,e,s){const i=this.p.setTimeout(async()=>{this.delete(t),await this.q.get(s);const e=this.getItem(t);this.ea.publish(cm.CacheStaleRefreshed,{key:t,value:e}),this.N(i)},e);this.j.push(i)}startBackgroundRefresh(t){!t||this.O>-1||(this.O=this.p.setInterval(()=>{this.ea.publish(cm.CacheBackgroundRefreshing),this.T.forEach((t,e)=>{this.delete(e),this.q.get(t).then(()=>{const t=this.getItem(e);this.ea.publish(cm.CacheBackgroundRefreshed,{key:e,value:t})})})},t))}stopBackgroundRefresh(){this.p.clearInterval(this.O),this.O=-1,this.ea.publish(cm.CacheBackgroundStopped)}set(t,e,s,i){const n={data:e,...s};this.setItem(t,n,i)}get(t){return this.getItem(t)?.data}setItem(t,e,s){e.lastCached=Date.now(),this.storage.set(t,e),this.T.set(t,s),this.ea.publish(cm.Set,{key:t,value:e})}getItem(t){if(!this.storage.has(t))return void this.ea.publish(cm.CacheMiss,{key:t});const e=this.storage.get(t);if(!e?.staleTime||!e?.lastCached)return this.ea.publish(cm.CacheHit,{key:t,value:e}),e;const s=Date.now();if(s>e.lastCached+(e.staleTime??0))this.ea.publish(cm.CacheStale,{key:t,value:e});else{if(!(s>e.lastCached+(e.cacheTime??0)))return this.ea.publish(cm.CacheHit,{key:t,value:e}),e;this.ea.publish(cm.CacheExpired,{key:t,value:e})}}delete(t){this.storage.delete(t),this.ea.publish(cm.Clear,{key:t})}clear(){this.storage.clear(),this.T.clear(),this.ea.publish(cm.Reset),this.stopBackgroundRefresh(),this.j.forEach(t=>{this.p.clearTimeout(t)}),this.j.length=0}dispose(){this.clear(),this.H.forEach(t=>t.dispose()),this.ea.publish(cm.Dispose)}N(t){this.p.clearTimeout(t);const e=this.j.indexOf(t);e>-1&&this.j.splice(e,1)}}const dm={cacheTime:3e5,staleTime:0,refreshStaleImmediate:!1,refreshInterval:0};class fm{constructor(t){this.P=at(lm),this.cf={...dm,...t??{}}}request(t){if(this.P.startBackgroundRefresh(this.cf.refreshInterval),"GET"!==t.method)return t;const e=this.P.get(this.key(t));return this.mark(e)??t}response(t,e){if(!e)return t;if(t.headers.has(fm.cacheHeader))return t;const s=this.key(e);return this.P.setItem(s,{data:t,...this.cf},e),this.cf?.refreshStaleImmediate&&this.cf.staleTime>0&&this.P.setStaleTimer(s,this.cf.staleTime,e),t}dispose(){this.P.stopBackgroundRefresh()}key(t){return`${fm.prefix}${t.url}`}mark(t){return t?.headers.set(fm.cacheHeader,"hit"),t}}fm.prefix="au:interceptor:",fm.cacheHeader="x-au-fetch-cache";class pm{constructor(){this.cache=at(Mt).globalThis.indexedDB,this.getStore=()=>this.database.transaction(pm.cacheName,"readwrite").objectStore(pm.cacheName),this.delete=t=>{this.getStore().delete(t)},this.has=t=>this.getStore().count(t).result>0,this.set=(t,e)=>this.getStore().put(e,t),this.get=t=>this.getStore().get(t).result,this.clear=()=>{const t=this.getStore();t.getAllKeys().result.forEach(e=>{t.delete(e)})},this.database=this.cache.open(pm.cacheName).result}}pm.cacheName="au-cache";const gm=Object.freeze({fixed:0,incremental:1,exponential:2,random:3}),mm={maxRetries:3,interval:1e3,strategy:gm.fixed};class vm{constructor(t){if(this.p=at(Mt),this.retryConfig={...mm,...t??{}},this.retryConfig.strategy===gm.exponential&&this.retryConfig.interval<=1e3)throw tm(5007,this.retryConfig.interval)}request(t){return t.retryConfig||(t.retryConfig={...this.retryConfig},t.retryConfig.counter=0),t.retryConfig.requestClone=t.clone(),t}response(t,e){return delete e.retryConfig,t}responseError(t,e,s){const{retryConfig:i}=e,{requestClone:n}=i;return Promise.resolve().then(()=>{if(i.counter<i.maxRetries){const r=null==i.doRetry||i.doRetry(t,e);return Promise.resolve(r).then(r=>{if(r){i.counter++;const t=function(t){const{interval:e,strategy:s,minRandomInterval:i,maxRandomInterval:n,counter:r}=t;if("function"==typeof s)return t.strategy(r);switch(s){case gm.fixed:return bm[gm.fixed](e);case gm.incremental:return bm[gm.incremental](r,e);case gm.exponential:return bm[gm.exponential](r,e);case gm.random:return bm[gm.random](r,e,i,n);default:throw tm(5008,s)}}(i);return new Promise(e=>this.p.setTimeout(e,isNaN(t)?0:t)).then(()=>{const t=n.clone();return"function"==typeof i.beforeRetry?i.beforeRetry(t,s):t}).then(t=>{const e={...t,retryConfig:i};return s.fetch(e)})}throw delete e.retryConfig,t})}throw delete e.retryConfig,t})}}const bm=[t=>t,(t,e)=>e*t,(t,e)=>1===t?e:e**t/1e3,(t,e,s=0,i=6e4)=>Math.random()*(i-s)+s];class wm{constructor(){}getApiBaseUrl(){return this.apiBaseUrl||(this.apiBaseUrl=window.apiBaseUrl?window.apiBaseUrl:"/fractal-cms"),this.apiBaseUrl}}class ym{constructor(t=at(im),e=at(wm),s=at(Wt).scopeTo("ApiServices")){this.httpClient=t,this.configService=e,this.logger=s,this.logger.trace("constructor"),this.httpClient.configure(t=>(t.withDefaults({headers:{"X-Requested-With":"XMLHttpRequest"},credentials:"include"}).withInterceptor({request:t=>(console.log(`Requesting ${t.method} ${t.url}`),t),response:t=>(console.log(`Received ${t.status} ${t.url}`),t)}).rejectErrorResponses(),t))}delete(t){return this.httpClient.fetch(t,{method:"DELETE"}).then(t=>t.text())}}let km=(()=>{let t,e,s,i=[Il("fractal-cms-core-list-line")],n=[],r=[],o=[];return e=class{constructor(t=at(Wt).scopeTo("ListLine"),e=at(ne),s=at(Sl),i=at(ym),n=at(xl)){this.logger=t,this.ea=e,this.element=s,this.apiService=i,this.platform=n,this.id=Gg(this,r,void 0),this.buttonDelete=Gg(this,o),this.onDelete=t=>{if(this.logger.trace("onDelete"),t.preventDefault(),this.buttonDelete&&!0===confirm("Attention !! vous allez supprimer définitivement cet élément ?")){const t=this.buttonDelete.href;this.apiService.delete(t).then(t=>{this.platform.taskQueue.queueTask(()=>{this.platform.window.location.reload()})}).catch(t=>{this.logger.trace("Delete  ERROR",t)})}},this.logger.trace("constructor")}attached(){this.logger.trace("attached")}detached(){this.logger.trace("detached")}bound(){this.logger.trace("bound"),this.addEvent()}unbinding(){this.logger.trace("unbinding"),this.removeEvent()}addEvent(){this.logger.trace("addEvent"),this.buttonDelete=this.element.querySelector(".user-button-delete"),this.buttonDelete&&this.buttonDelete.addEventListener("click",this.onDelete)}removeEvent(){this.logger.trace("removeEvent"),this.buttonDelete&&this.buttonDelete.removeEventListener("click",this.onDelete)}onValidate(t){return this.logger.trace("onValidate"),!0}},Xg(e,"ListLine"),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;s=[Uh()],Hg(null,null,s,{kind:"field",name:"id",static:!1,private:!1,access:{has:t=>"id"in t,get:t=>t.id,set:(t,e)=>{t.id=e}},metadata:a},r,o),Hg(null,t={value:e},i,{kind:"class",name:e.name,metadata:a},null,n),e=t.value,a&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),Gg(e,n)})(),e})(),$m=(()=>{let t,e,s,i=[Il("fractal-cms-core-check-rules")],n=[],r=[],o=[];return e=class{constructor(t=at(Wt).scopeTo("CheckRules"),e=at(Sl)){this.logger=t,this.element=e,this.id=Gg(this,r,void 0),this.mainCheck=Gg(this,o),this.onCheckMain=t=>{if(this.logger.trace("onCheckMain"),this.mainCheck)return this.childCheck&&this.childCheck.forEach((t,e)=>{t.checked=this.mainCheck.checked}),!0},this.onCheckChild=t=>{this.logger.trace("onCheckMain");const e=t.currentTarget;if(e)return e.checked||this.mainCheck&&(this.mainCheck.checked=!1),!0},this.logger.trace("constructor")}attached(){this.logger.trace("attached"),this.mainCheck=this.element.querySelector("input.main-check"),this.childCheck=this.element.querySelectorAll("input.sub-check"),this.mainCheck&&this.mainCheck.addEventListener("click",this.onCheckMain),this.childCheck&&this.childCheck.forEach((t,e)=>{t.addEventListener("click",this.onCheckChild)})}detached(){this.logger.trace("detached"),this.mainCheck&&this.mainCheck.removeEventListener("click",this.onCheckMain),this.childCheck&&this.childCheck.forEach((t,e)=>{t.removeEventListener("click",this.onCheckChild)})}},Xg(e,"CheckRules"),(()=>{const a="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;s=[Uh()],Hg(null,null,s,{kind:"field",name:"id",static:!1,private:!1,access:{has:t=>"id"in t,get:t=>t.id,set:(t,e)=>{t.id=e}},metadata:a},r,o),Hg(null,t={value:e},i,{kind:"class",name:e.name,metadata:a},null,n),e=t.value,a&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a}),Gg(e,n)})(),e})(),Cm=(()=>{let t,e,s=[Il("fractal-cms-core-menu")],i=[];return e=class{constructor(t=at(Wt).scopeTo("Menu"),e=at(Sl),s=at(ne),i=at(ym),n=at(xl)){this.logger=t,this.element=e,this.ea=s,this.apiService=i,this.platform=n,this.onAction=t=>{this.logger.trace("onAction");let e=t.target;if(e){const t=e.getAttribute("aria-controls");if(t){this.closeOthers(t);const s=this.element.querySelector("#"+t);s&&(s.classList.contains("show")?(s.classList.remove("show"),s.setAttribute("aria-expanded","false"),e.setAttribute("aria-expanded","false")):(s.classList.add("show"),s.setAttribute("aria-expanded","true"),e.setAttribute("aria-expanded","true")))}}},this.logger.trace("constructor")}attached(){this.logger.trace("attached"),this.addEvent()}detached(){this.logger.trace("attached"),this.removeEvent()}addEvent(){this.logger.trace("addEvent"),this.actionButtons=this.element.querySelectorAll('[data-toggle="dropdown"]'),this.actionButtons.forEach((t,e)=>{t.addEventListener("click",this.onAction)})}removeEvent(){this.logger.trace("removeEvent"),this.actionButtons.forEach((t,e)=>{t.removeEventListener("click",this.onAction)})}closeOthers(t){this.logger.trace("closeOthers"),this.element.querySelectorAll(".dropdown-menu").forEach((e,s)=>{e.id!=t&&e.classList.remove("show")})}},Xg(e,"Menu"),(()=>{const n="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;Hg(null,t={value:e},s,{kind:"class",name:e.name,metadata:n},null,i),e=t.value,n&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:n}),Gg(e,i)})(),e})();void 0!==webpackBaseUrl&&(t.p=webpackBaseUrl);const Tm=document.querySelector("body");Ep.register(e).register(Wg.customize(t=>{t.DefaultTrigger=Lg.blur})).enhance({host:Tm,component:class{constructor(t=at(Wt)){this.logger=t,this.logger=t.scopeTo("FractalCmsApp")}binding(){this.logger.trace("binding")}attaching(){this.logger.trace("Attaching")}}})})();